<view class="{{[isUps==true?'prevent':'']}}"><cu-custom vue-id="c9e6e518-1" isBack="{{true}}" bind:__l="__l" vue-slots="{{['backText','content','right']}}"><view slot="backText">返回</view><view slot="content">产品详情</view><view slot="right"><view class="action"><view class="{{['cu-load','load-cuIcon',isLoad?'loading':'over']}}"></view></view></view></cu-custom><view class="page bg-white"><view class="carousel"><swiper indicator-dots="{{true}}" circular="true" duration="400"><block wx:for="{{product.carouse}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="swiper-item" data-src="{{item}}" data-event-opts="{{[['tap',[['previewImage',['$event']]]]]}}" bindtap="__e"><view class="image-wrapper"><image src="{{item}}" mode="aspectFill"></image></view></swiper-item></block></swiper></view><view class="cu-list menu-avatar"><view data-event-opts="{{[['tap',[['goQrcode',['$0'],['product._id']]]]]}}" class="cu-item" style="height:110rpx;background-color:gainsboro;" bindtap="__e"><view class="cu-avatar round "><image class="cu-avatar round " src="{{product.avatar}}" mode="aspectFill"></image></view><view class="content flex-sub"><view class="text-grey">{{product.title}}</view><view class="text-gray text-sm flex justify-between">{{'价格：'+priceAndUnitName+''}}</view></view><view class="action"><text class="cuIcon-qr_code" style="font-size:36px;"></text></view></view></view><block wx:if="{{product.detail.content}}"><textarea class="text-box font40 width100 padding-sm solid text-gray text-cut" style="background-color:gainsboro;" readonly="{{true}}" disabled="{{true}}" scroll-y="true" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','content','$event',[]],['product.detail']]]]]}}" value="{{product.detail.content}}" bindinput="__e"></textarea></block><block wx:if="{{product.detail.videos.length>0}}"><view><video src="{{product.detail.videos[0]}}" objectFit="contain" controls="{{true}}" show-mute-btn="{{true}}" muted="{{true}}"></video></view></block><block wx:for="{{product.detail.images}}" wx:for-item="item" wx:for-index="index" wx:key="index"><image style="vertical-align:middle;" src="{{item}}" data-src="{{item}}" mode="widthFix" data-event-opts="{{[['tap',[['previewImage',['$event']]]]]}}" bindtap="__e"></image></block><view class="cu-tabbar-height"></view><view class="cu-tabbar-height"></view><block wx:if="{{!isUps}}"><view class="cu-bar bg-white tabbar border  foot"><button data-event-opts="{{[['tap',[['goMy',['$event']]]]]}}" class="action" bindtap="__e"><view class="cuIcon-home"></view>我的</button><button class="action" open-type="share" data-product="{{product}}"><view class="cuIcon-share"></view>分享</button><view data-event-opts="{{[['tap',[['startTalk',['$event']]]]]}}" class="action" bindtap="__e"><view class="cuIcon-message"></view>咨询</view><view data-event-opts="{{[['tap',[['goWishOrderList',['$event']]]]]}}" class="action" bindtap="__e"><view class="cuIcon-goods"></view>购物袋</view><view data-event-opts="{{[['tap',[['showWishProduct',['$event']]]]]}}" class="action" bindtap="__e"><view class="cuIcon-roundadd"></view>收藏</view><block wx:if="{{product.on_sale}}"><view data-event-opts="{{[['tap',[['showBuyProduct',['$event']]]]]}}" class="bg-green submit text-lg" bindtap="__e">立即购买</view></block><block wx:else><view class="bg-gray submit text-lg">产品已下架</view></block></view></block></view><block wx:if="{{isUps}}"><view class="shade"></view></block><uni-popup class="vue-ref" vue-id="c9e6e518-2" type="bottom" data-ref="showPopupWishProduct" data-event-opts="{{[['^change',[['change']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup bg-white"><text data-event-opts="{{[['tap',[['cancel',['PopupWishProduct']]]]]}}" class="cuIcon-close popup-close" bindtap="__e"></text><text class="popup-title">加入购物袋</text><view class="popup-content"><scroll-view class="ups-height" scroll-y="true"><view class="cu-card article" style="width:100%;"><view class="cu-item shadow" style="margin:10rpx;padding:20rpx 0;"><view class="content"><image class="bg-gray" src="{{product.cover}}" mode="aspectFill"></image><view class="desc"><view class="text-content">{{''+product.title+''}}<text class="text-cut text-sm">{{''+product.detail.content+''}}</text></view><view class="flex margin-top-sm justify-between"><view class="cu-capsule radius "><text class="text-red">{{''+priceAndUnitName+''}}</text></view><view><ups-stepper vue-id="{{('c9e6e518-3')+','+('c9e6e518-2')}}" label="{{product._id}}" max="{{100}}" val="{{product.num}}" step="{{1}}" min="{{1}}" data-event-opts="{{[['^change',[['stepper']]]]}}" bind:change="__e" bind:__l="__l"></ups-stepper></view></view></view></view></view></view><view><view class="cu-bar solid-bottom margin-top-xxs radius"></view><view class="cu-bar btn-group  foot bg-white"><button class="cu-btn   round line-grey" disabled="{{isLoad}}" data-event-opts="{{[['tap',[['submitOrder',['$event']]]]]}}" bindtap="__e">确定</button></view></view></scroll-view></view></view></uni-popup><uni-popup class="vue-ref" vue-id="c9e6e518-4" type="bottom" data-ref="showPopupBuyProduct" data-event-opts="{{[['^change',[['change']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup bg-white"><text data-event-opts="{{[['tap',[['cancel',['PopupBuyProduct']]]]]}}" class="cuIcon-close popup-close" bindtap="__e"></text><text class="popup-title">购买</text><view class="popup-content"><scroll-view class="ups-height" scroll-y="true"><view class="cu-card article" style="width:100%;"><view class="cu-item shadow" style="margin:10rpx;padding:20rpx 0;"><view class="content"><image class="bg-gray" src="{{product.cover}}" mode="aspectFill"></image><view class="desc"><view class="text-content">{{''+product.title+''}}<text class="text-cut text-sm">{{''+product.detail.content+''}}</text></view><view class="flex margin-top-sm justify-between"><view class="cu-capsule radius "><text class="text-red">{{''+priceAndUnitName+''}}</text></view><view><ups-stepper vue-id="{{('c9e6e518-5')+','+('c9e6e518-4')}}" label="{{product._id}}" max="{{100}}" val="{{product.num}}" step="{{1}}" min="{{1}}" data-event-opts="{{[['^change',[['stepper']]]]}}" bind:change="__e" bind:__l="__l"></ups-stepper></view></view></view></view></view></view><view><view class="cu-bar solid-bottom margin-top-xxs radius"></view><view class="cu-bar btn-group  foot bg-white"><button class="cu-btn   round line-grey" disabled="{{isLoad}}" data-event-opts="{{[['tap',[['placeOrder',['$event']]]]]}}" bindtap="__e">确定</button></view></view></scroll-view></view></view></uni-popup></view>