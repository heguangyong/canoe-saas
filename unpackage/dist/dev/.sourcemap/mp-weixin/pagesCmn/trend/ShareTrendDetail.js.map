{"version":3,"sources":["uni-app:///main.js","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/trend/ShareTrendDetail.vue?b993","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/trend/ShareTrendDetail.vue?619e","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/trend/ShareTrendDetail.vue?f892","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/trend/ShareTrendDetail.vue?08f8","uni-app:///pagesCmn/trend/ShareTrendDetail.vue","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/trend/ShareTrendDetail.vue?2618"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","isUps","__map","playList","item","idx","$orig","__get_orig","g0","Math","abs","index","m0","existVideo","src","g1","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","total","name","that","trend","res","result","authBizInfo","needWxAuth","log","code","type","$forceUpdate","tips","comments_num"],"mappings":"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","file":"pagesCmn/trend/ShareTrendDetail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesCmn/trend/ShareTrendDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./ShareTrendDetail.vue?vue&type=template&id=6da1d432&scoped=true&style=background-color%3A%20%23000&\"\nvar renderjs\nimport script from \"./ShareTrendDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareTrendDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShareTrendDetail.vue?vue&type=style&index=0&id=6da1d432&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6da1d432\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesCmn/trend/ShareTrendDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareTrendDetail.vue?vue&type=template&id=6da1d432&scoped=true&style=background-color%3A%20%23000&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = !_vm.isUps\n    ? _vm.__map(_vm.playList, function(item, idx) {\n        var $orig = _vm.__get_orig(item)\n\n        var g0 = Math.abs(_vm.index - idx)\n        var m0 = g0 <= 1 ? _vm.existVideo(item.src) : null\n        var g1 = g0 <= 1 && m0 ? Math.abs(_vm.index - idx) : null\n        return {\n          $orig: $orig,\n          g0: g0,\n          m0: m0,\n          g1: g1\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareTrendDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareTrendDetail.vue?vue&type=script&lang=js&\"","<template style=\"background-color: #000\">\n    <view class=\"page\" :class=\"isUps == true ? 'prevent' : ''\" :style=\"{ height: windowHeight }\">\n        <cu-custom    :isBack=\"isReturn\" :bgColor=\"'bg-dark'\">\n            <block slot=\"backText\">返回</block>\n            <block slot=\"content\">{{playList[index].title}}</block>\n        </cu-custom>\n        <slot v-if=\"!isUps\">\n            <swiper class=\"swiper\" :vertical=\"true\"  @change=\"changeCurrent\" @animationfinish=\"animationFinish\"  :current=\"index\">\n                <swiper-item v-for=\"(item, idx) in playList\" :key=\"idx\" class=\"swiper-item\" @tap = \"videoPlayPause\">\n                    <div v-if=\"Math.abs(index-idx)<=1\" class=\"video-box\">\n\t\t\t\t\t\t<slot v-if=\"existVideo(item.src)\">\n\t\t\t\t\t\t\t<ups-play class=\"video\" :src=\"item.src\"  :height=\"height\" :width=\"width\"\n\t\t\t\t\t\t\t\t\t\t   :play=\"item.flag\" v-if=\"Math.abs(index-idx)<=1\" :gDuration=\"item.duration\"\n\t\t\t\t\t\t\t\t\t\t   :initialTime=\"item.initialTime\" @pause=\"pauseVideo\" :objectFit=\"item.objectFit\"\n\t\t\t\t\t\t\t\t\t\t   @playEnd=\"playEnd\" :danmuList=\"danmuList\">\n\t\t\t\t\t\t\t</ups-play>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t<slot v-else>\n\t\t\t\t\t\t\t<swiper   :style=\"'min-height:'+ windowHeight +'px;'\" :indicator-dots=\"true\" :circular=\"true\" :autoplay=\"true\" interval=\"5000\" duration=\"500\">\n\t\t\t\t\t\t\t\t<swiper-item v-for=\"(image,iidx) in item.carousels\" :key=\"iidx\">\n\t\t\t\t\t\t\t\t\t<image :src=\"image.tempFileURL\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t\t</swiper-item>\n\t\t\t\t\t\t\t</swiper>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t<slot v-if=\"isShowLabels\">\n\t\t\t\t\t\t\t<cover-view  class=\"cover-view-left padding-left-sm\">\n\t\t\t\t\t\t\t\t<cover-view class=\"left-view\">\n\t\t\t\t\t\t\t\t\t<cover-view class=\"left-text\">@{{item.at||''}}</cover-view>\n\t\t\t\t\t\t\t\t</cover-view>\n\t\t\t\t\t\t\t\t<cover-view class=\"left-view\">\n\t\t\t\t\t\t\t\t\t<cover-view class=\"left-text line-limit-length\">{{item.content}}</cover-view>\n\t\t\t\t\t\t\t\t</cover-view>\n\t\t\t\t\t\t\t</cover-view>\n\t\t\t\t\t\t\t<cover-view class=\"cover-view-right\">\n\t\t\t\t\t\t\t\t<cover-image :src=\"item.avatar\" class=\"avatar img\" @click.stop=\"tapAvatar\"></cover-image>\n\t\t\t\t\t\t\t\t<cover-view class=\"right-text\"></cover-view>\n\t\t\t\t\t\t\t\t<cover-image :src=\"item.check?'cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/heartRed.png':'cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/heart.png'\" class=\"img\" @click.stop=\"tapLove\"></cover-image>\n\t\t\t\t\t\t\t\t<cover-view class=\"right-text\">{{item.like}}</cover-view>\n\t\t\t\t\t\t\t\t<cover-image src=\"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/msg.png\" class=\"img\" @click.stop=\"tapMsg()\"></cover-image>\n\t\t\t\t\t\t\t\t<cover-view class=\"right-text\">{{item.comments_num}}</cover-view>\n\t\t\t\t\t\t\t\t<button :data-videoObj=\"item\" style=\"background: transparent\" open-type=\"share\">\n\t\t\t\t\t\t\t\t\t<cover-image src=\"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/share-fill.png\" class=\"img\" ></cover-image>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<cover-view class=\"right-text\">分享</cover-view>\n\t\t\t\t\t\t\t\t<slot v-if=\"item.productList.length>0\">\n\t\t\t\t\t\t\t\t\t<button :data-videoObj=\"item\" style=\"background: transparent\" @click.stop=\"tapBuy\">\n\t\t\t\t\t\t\t\t\t\t<cover-image src=\"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/product.png\" class=\"img\" ></cover-image>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<cover-view class=\"right-text\">产品</cover-view>\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t\t<slot v-if=\"item.activityList.length>0\">\n\t\t\t\t\t\t\t\t\t<button :data-videoObj=\"item\" style=\"background: transparent\" @click.stop=\"tapJoin\">\n\t\t\t\t\t\t\t\t\t\t<cover-image src=\"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/activity.png\" class=\"img\" ></cover-image>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<cover-view class=\"right-text\">活动</cover-view>\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t\t<cover-image src=\"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/qrcode.png\" class=\"img\" @click.stop=\"goQrcode()\"></cover-image>\n\t\t\t\t\t\t\t</cover-view>\n\t\t\t\t\t\t</slot>\n                    </div>\n                </swiper-item>\n            </swiper>\n        </slot>\n        <!-- 遮罩 -->\n        <view class=\"shade\" v-if=\"isUps\"></view>\n        <!-- 底部活动预定展现弹窗 -->\n        <uni-popup ref=\"showActivityList\" type=\"bottom\" @change=\"change\">\n            <!-- 底部活动预定弹窗 -->\n            <view class=\"trend-popup bg-white\">\n                <text class=\"cuIcon-close trend-popup-close\" @click=\"cancel('ActivityList')\"></text>\n                <text class=\"trend-popup-title\" >活动一览</text>\n                <view class=\"trend-popup-content\">\n                    <scroll-view class=\"ups-height\" scroll-y=\"true\">\n                        <view class=\"cu-list menu-avatar\" >\n                            <view class=\"cu-item\" @tap=\"goActivityDetail(activity)\" v-for=\"(activity,aIndex) in playList[index].activityList\" :key=\"aIndex\">\n                                <view  class=\"cu-avatar lg radius\">\n                                    <image :src=\"activity.cover\" mode=\"aspectFill\"></image>\n                                </view>\n                                <view class=\"content\">\n                                    <view class=\"text-grey\">{{activity.title}}</view>\n                                    <view class=\"text-gray text-sm flex\">\n                                        <view class=\"text-cut\"> {{activity.sign_up}} </view>\n                                    </view>\n                                </view>\n                            </view>\n                        </view>\n                    </scroll-view>\n                </view>\n            </view>\n        </uni-popup>\n\n        <!-- 底部产品预定展现弹窗 -->\n        <uni-popup ref=\"showProductList\" type=\"bottom\" @change=\"change\">\n            <!-- 底部活动预定弹窗 -->\n            <view class=\"trend-popup bg-white\">\n                <text class=\"cuIcon-close trend-popup-close\" @click=\"cancel('ProductList')\"></text>\n                <text class=\"trend-popup-title\" >产品一览</text>\n                <view class=\"trend-popup-content\">\n                    <scroll-view class=\"ups-height\" scroll-y=\"true\">\n                        <view class=\"cu-list menu-avatar \" >\n                            <view class=\"cu-item\" @tap=\"goProductDetail(product)\" v-for=\"(product,gIndex) in playList[index].productList\" :key=\"gIndex\">\n                                <view  class=\"cu-avatar lg radius\">\n                                    <image :src=\"product.carouse[0]\" mode=\"aspectFill\"></image>\n                                </view>\n                                <view class=\"content\">\n                                    <view class=\"text-grey\">{{product.title}}</view>\n                                    <view class=\"text-gray text-sm flex\">\n                                        <view class=\"text-cut\"> ¥{{product.price}} </view>\n                                    </view>\n                                </view>\n                            </view>\n                        </view>\n                    </scroll-view>\n                </view>\n            </view>\n        </uni-popup>\n\n        <!-- 底部评论弹窗 -->\n        <uni-popup ref=\"showComments\" type=\"bottom\" @change=\"change\">\n            <view class=\"trend-popup bg-white\" :style=\"{height:height}\" >\n                    <text class=\"cuIcon-close trend-popup-close\" @click=\"cancel('Comments')\"></text>\n                    <text class=\"trend-popup-title\" v-if=\"playList[index].comments_num>0\">{{playList[index].comments_num}}条评论</text>\n                    <text class=\"trend-popup-title\" v-else>评论</text>\n                <view class=\"trend-popup-content\">\n                    <scroll-view class=\"ups-height-padding bg-white\" :style=\"{height:commentHeight}\" scroll-y=\"true\" @scrolltolower=\"loadMoreComments\">\n                        <view v-for=\"(comment,pidx) in commentList\" :key=\"pidx\">\n                            <ups-comment :comment=\"comment\" :idx=pidx @operateCard=\"operateComment\"></ups-comment>\n                            <view v-if=\"comment.replys_num>0\">\n                                <view class=\"cu-reply\"  @click=\"commentExpend(comment)\" >\n                                    <text  v-if=\"!comment.isSpread\" >展开{{comment.replys_num}}条回复</text>\n                                </view>\n                                <view class=\"cu-reply\" v-if=\"comment.isSpread\">\n                                    <view v-for=\"(reply,idx) in comment.replys\" :key=\"idx\">\n                                        <ups-comment :comment=\"reply\" :idx=idx :pidx=pidx :isReply=\"true\" :isSubReply=\"isSubReply\" @operateCard=\"operateReply\" ></ups-comment>\n                                    </view>\n                                </view>\n                            </view>\n                            <view class=\"card-popup-line\"></view>\n                        </view>\n                    </scroll-view>\n\n                    <view class=\"cu-bar foot input\">\n                        <input class=\"solid-bottom\" :adjust-position=\"true\" :focus=\"isFocus\" maxlength=\"140\" cursor-spacing=\"10\" v-model=\"inputContent\" @input=\"contentInput\" :placeholder=\"tips\"></input>\n                        <view class=\"action\">\n                            <text class=\"text-gray\">{{textCont}}/140</text>\n                        </view>\n                        <button class=\"cu-btn  shadow-blur radius bg-grey\"    @click=\"sendComment\" >发送</button>\n                    </view>\n                </view>\n            </view>\n        </uni-popup>\n\n        <!-- 底部扩展功能弹窗 -->\n        <uni-popup ref=\"showRemove\" type=\"bottom\" @change=\"removeChange\">\n            <view class=\"trend-popup bg-white\">\n                <view class=\"trend-popup-content\">\n                    <text class=\"remove-popup-btn\" @click=\"removeComment(currentComment)\">删除</text>\n                </view>\n                <text class=\"trend-popup-btn\" @click=\"cancel('Remove')\">取消</text>\n            </view>\n        </uni-popup>\n    </view>\n</template>\n<script>\n    import { mapState,mapMutations } from 'vuex'\n    import upsPlay from '@/components/ups-play/index'\n    import upsComment from '@/components/ups-comment/index';\n    import upsProduct from '@/components/ups-product/index';\n    import upsActivity from \"@/components/ups-activity/index\";\n    import uniPopup from '@/components/uni-popup/uni-popup';\n\n\n    export default {\n        components:{\n            \"ups-play\":upsPlay,\n            \"ups-comment\":upsComment,\n            \"ups-product\":upsProduct,\n            \"ups-activity\":upsActivity,\n            \"uniPopup\":uniPopup,\n        },\n        data() {\n            return {\n               isReturn: true,\n                isUps:false,\n\t\t\t\tisShowLabels:true,//显示文字标签\n                page:1,\n                trend:{_id:'',qrcode:'',card_id:'-1'},\n                tips:'写评论...',\n                //被回复者名称\n                repliedName:'',\n                //二级回复（子回复）\n                isSubReply:false,\n                //设定输入框焦点\n                isFocus:false,\n                //以下是评论页面数据定义\n                //用于删除评论时传递_id\n                currentComment:null,\n                commentList:[],\n                commentListPage:1,\n                replyInfo:{\n                    isReply:false,\n                    pidx:0,\n                    comment_id:''\n                },\n                lastComment:{\n                },\n                lastReply:{\n                },\n                inputContent:'',\n                textCont:0,\n                sysHeight:0,\n                playCount:2,//剩余多少视频加载视频列表\n                playList:[],\n                height:'',\n                commentHeight:'',\n                index:0,\n                width:'',\n                oldIndex:0,\n                windowHeight:-1,\n                authBizInfo:{}\n            }\n        },\n        onLoad(options){\n            let that = this;\n            if(options.isReturn){\n              that.isReturn =  options.isReturn;\n            }\n            if(options.id){\n                that.trend._id=options.id;\n                that.getTrendById();\n            }\n            //扫码加好友\n            else if (options.scene) {\n                that.isReturn = false;\n                that.paramsStr +='scene='+options.scene;\n                let res = {};\n                let params = decodeURIComponent(options.scene).split(\"&\");\n                params.forEach(item => {\n                    let paramMap = item.split(\"=\");\n                    res[paramMap[0]] = paramMap[1];\n                    if(paramMap[0]=='qrcode'){\n                        that.trend.qrcode=paramMap[1];\n                    }\n                });\n                that.getTrendIdByQrcode();\n            }\n            let system = that.getSystem();\n            that.windowHeight=system.h*0.77;\n        },\n        created(){\n            //#ifdef APP-PLUS\n            plus.screen.lockOrientation(\"portrait-primary\");\n            //隐藏subnvue\n            uni.getSubNVueById('comment').hide();\n            uni.getSubNVueById('input-box').hide();\n            //#endif\n            this.sysHeight = uni.getSystemInfoSync().windowHeight;\n            this.height = `${this.sysHeight*0.77}px`;\n            this.commentHeight = `${this.sysHeight*0.77-60}px`;\n            let width = uni.getSystemInfoSync().windowWidth;\n            this.width = `${width}px`;\n            this.playList.length = 0;\n            this.playList.fill({src:''});\n        },\n        async mounted() {\n            //设置id 通过id轮到相应位置\n            let id = \"http://img.kaiyanapp.com/255365dbfc2622930eb0cdb33e43abf0.jpeg?imageMogr2/quality/60/format/jpg\";\n            // console.log('mounted',this.page,this.index);\n            await this.pushPlayList();\n\t\t\t\n            this.index = this.playList.reduce((total,item)=>{\n                if(id==''||id==item.id){\n                    id = ''\n                }else{\n                    total++\n                }\n                // console.log('id',id,'item.id',item.id,'total',total);\n                return total\n            },0);\n            if(!this.index){\n                this.$nextTick(()=>{\n                    this.videoPlay(this.index)\n                })\n            }\n        },\n\t\tonShow(){\n\t\t\t\n\t\t},\n        onHide(){\n            for (let item of this.playList) {\n                item.flag = false\n            }\n        },\n\t\t\n        onShareAppMessage(res){\n            console.log('res',res);\n            if(res.from=== 'button'){\n                let dyTrend=res.target.dataset.videoobj;\n                return{\n                    title:dyTrend.content,\n                    imageUrl:dyTrend.cover,\n                    path:\"/pagesCmn/trend/ShareTrendDetail?isReturn=false&id=\"+dyTrend.id,\n                    success:function(r){\n                        uni.showToast({\n                            'icon':'success',\n                            'title':'分享成功'\n                        })\n                    }\n                }\n            }\n        },\n\n        computed:{\n            ...mapState(['needAuthFlag','user','cardAccount','cloudPath']),\n            existVideo(){\n                return function (src) {\n                    let url = src||'';\n                    return url.length>0;\n                }\n            }\n        },\n\n        methods: {\n            ...mapMutations(['needWxAuth','wxAuth','updateUser','updateUserAuth']),\n            getSystem(){\n                let system = wx.getSystemInfoSync();\n                this.scale = 667 / 375; //按照苹果留 375*667比例 其他型号手机等比例缩放 显示\n                this.systemScale = system.windowWidth / 375; //按照苹果留 375*667比例 其他型号手机等比例缩放 显示\n                return {w:system.windowWidth,h:system.windowHeight}\n            },\n\n            async animationFinish(e){\n                if(!this.isUps){\n\t\t\t\t\tthis.isShowLabels= false;\n\t\t\t\t\tthis.$forceUpdate();\n                    this.changeCurrent(e)\n\t\t\t\t\tsetTimeout (() => {\n\t\t\t\t\t    this.isShowLabels= true;\n\t\t\t\t\t\tthis.$forceUpdate();\n\t\t\t\t\t} , 100 )\n                }\n            },\n\t\t\t\n            async changeCurrent(e){\n                this.isUps = true;\n                this.index = e.detail.current;\n                this.$nextTick(()=>{\n                    for (let item of this.playList) {\n                        item.flag = false\n                    }\n                    this.playList[this.index].flag = true\n\n                });\n                this.isUps=false;\n            },\n\n            async getTrendById(){\n                let that = this;\n                let res = {};\n                res =await wx.cloud.callFunction({\n                    name: 'cmn',\n                    data: {\n                        $url: 'getTrendDetail',\n                        id: that.trend._id,\n                    }\n                });\n                that.trend = res.result.data;\n                that.authBizInfo = {_id:that.trend.card_id,name:that.trend.name,avatar:that.trend.avatar};\n                that.needWxAuth(that.authBizInfo);\n\t\t\t\tthat.pushPlayList();\n            },\n\n            async getTrendIdByQrcode(){\n                let that = this;\n                let res = {};\n                res =await wx.cloud.callFunction({\n                    name: 'cmn',\n                    data: {\n                        $url: 'getTrendDetailByQrcode',\n                        qrcode: that.trend.qrcode,\n                    }\n                });\n                that.trend = res.result.data;\n                that.authBizInfo = {_id:that.trend.card_id,name:that.trend.name,avatar:that.trend.avatar};\n                that.needWxAuth(that.authBizInfo);\n\t\t\t\tthat.pushPlayList();\n            },\n\n\n             //展台内容转换成抖音模式\n             pushPlayList(){\n                let that = this;\n                console.log('page:'+that.page+\",trendId:\"+that.trend.card_id);\n                let promise = new Promise((resolve,reject)=>{\n                    wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'getTrendListByCardId',\n                        cardId:that.trend.card_id,\n                        page:that.page,\n                    }\n                    }).then((res)=>{\n                        console.log('getDyTrendList res',res);\n                         let result=res.result;\n                         if (result.code == 0) {\n                           let playGroup = [];\n                           if(that.page==1){\n                             that.playList=[];\n                             //传入的trendId\n                             if(that.trend._id != ''){\n                               playGroup.push({\n                                 src:that.trend.video_temp_url||'',\n                                 title:that.trend.title,\n                                 content:that.trend.content,\n                                 flag:false,\n                                 check:that.trend.isLike||false,\n                                 like:that.trend.likes_num||0,\n                                 comments_num:that.trend.comments_num||0,\n                                 at:that.trend.name,\n                                 id:that.trend._id,\n                                 cardId:that.trend.card_id,\n                                 avatar:that.trend.avatar,\n                                 initialTime:0,\n                                 duration:300,\n                                 cover:that.trend.cover,\n                                 activityList:that.trend.activityList,\n                                 productList:that.trend.productList,\n                                 carousels:that.trend.img_urls||[]\n                               });\n                              }else{\n                                that.trend._id = '-1'\n                              }\n                           }\n                           result.data.forEach(item => {\n                             if(that.trend._id != item._id ){\n                               // console.log('pushPlayList trend',item._id,item.title,item.content);\n                               playGroup.push({\n                                 src:item.video_temp_url||'',\n                                 title:item.title,\n                                 content:item.content,\n                                 flag:false,\n                                 check:item.isLike||false,\n                                 like:item.likes_num||0,\n                                 comments_num:item.comments_num||0,\n                                 at:item.name,\n                                 id:item._id,\n                                 cardId:item.card_id,\n                                 avatar:item.avatar,\n                                 initialTime:0,\n                                 duration:300,\n                                 cover:item.cover,\n                                 activityList:item.activityList,\n                                 productList:item.productList,\n                                 carousels:item.img_urls||[]\n                               });\n                             }\n                           });\n                           console.log('playGroup',playGroup);\n                           let len = that.playList.filter(item=>item.src).length;\n                           for(let i = len;i<len+playGroup.length;i++){\n                               that.$set(that.playList,i,playGroup[i-len])\n                           }\n                         }\n                    });\n\n                });\n                return promise\n            },\n            async tapLove(){\n                if(this.needAuthFlag){\n                    this.wxAuth(this.authBizInfo);\n                    setTimeout (() => {\n                        this.tapLove();\n                    } , 2000 );\n                    return;\n                }\n                this.updateUserAuth(this.authBizInfo);\n                this.playList[this.index].check = !this.playList[this.index].check;\n                this.playList = [...this.playList];\n                //更新统计信息\n                if(this.playList[this.index].check ){\n                    this.playList[this.index].like +=1;\n                    let like={\n                        corp_user_id:this.user._id\n                    };\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'addTrendLike',\n                            id:this.playList[this.index].id,\n                            like:like,\n                        }\n                    });\n                }else{\n                    this.playList[this.index].like -=1;\n                    let like={\n                        corp_user_id:this.user._id\n                    };\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'removeTrendLike',\n                            id:this.playList[this.index].id,\n                            like:like,\n                        }\n                    });\n                }\n                this.$forceUpdate()\n            },\n            playEnd(e){\n                // this.index++;\n                this.$forceUpdate();\n            },\n            tapAvatar(){\n                if(this.needAuthFlag){\n                    this.wxAuth(this.authBizInfo);\n                    setTimeout (() => {\n                        this.tapAvatar();\n                    } , 2000 );\n                    return;\n                }\n                this.updateUserAuth(this.authBizInfo);\n                setTimeout (() => {\n                    uni.reLaunch({\n                        url:'/pages/site/trend'\n                    })\n                } , 1000 )\n            },\n            tapMsg(){\n                if(this.needAuthFlag){\n                    this.wxAuth(this.authBizInfo);\n                    setTimeout (() => {\n                        this.tapMsg();\n                    } , 2000 );\n                    return;\n                }\n                this.updateUserAuth(this.authBizInfo);\n                this.commentListPage = 1;\n                this.getCommentList();\n                this.$nextTick(() => {\n                    this.isUps=true;\n                    this.$refs['showComments'].open();\n                })\n            },\n            tapShare(){\n\n            },\n\n            tapBuy(){\n                if(this.needAuthFlag){\n                    this.wxAuth(this.authBizInfo);\n                    setTimeout (() => {\n                        this.tapBuy();\n                    } , 2000 );\n                    return;\n                }\n                this.updateUserAuth(this.authBizInfo);\n                this.$nextTick(() => {\n                    this.isUps=true;\n                    this.$refs['showProductList'].open();\n                })\n\n            },\n\n            tapJoin(){\n                if(this.needAuthFlag){\n                    this.wxAuth(this.authBizInfo);\n                    setTimeout (() => {\n                        this.tapJoin();\n                    } , 2000 );\n                    return;\n                }\n                this.updateUserAuth(this.authBizInfo);\n                this.$nextTick(() => {\n                    this.isUps=true;\n                    this.$refs['showActivityList'].open();\n                })\n            },\n\n            videoPlay(index){\n                let promise = new Promise((resolve,reject)=>{\n                    resolve()\n                });\n                promise.then(res=>{\n                    if(this.playList[index]){\n                        this.$set(this.playList[index],'flag',!this.playList[index].flag)\n                    }\n                })\n            },\n            pauseVideo(val){\n                if(typeof this.playList[this.oldIndex].initialTime !='undefined') this.playList[this.oldIndex].initialTime = val\n            },\n            clickVideo(){\n                this.playList[this.index].flag = !this.playList[this.index].flag\n            },\n\n            cancel(type){\n                this.$refs['show' + type].close()\n            },\n            change(e){\n                if(e.show){\n                    this.isUps = true;\n                }else{\n                    this.isUps =false;\n                }\n            },\n            removeChange(e){\n                if(e.show){\n                }else{\n                }\n            },\n            //当前评论方法\n            async getCommentList(type){\n                let that = this;\n                console.log('getCommentList',that.playList[that.index].id);\n                let res =await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'getCommentList',\n                        trendId:that.playList[that.index].id,\n                        userId:that.user._id,\n                        page:that.commentListPage,\n                    }\n                });\n                let result=res.result;\n                if (result.code == 0) {\n                    if (that.commentListPage == 1) {\n                        that.commentList=[]\n                    }\n                    if( result.data.length > 0){\n                        result.data.forEach(d => {\n                            that.commentList.push(d)\n                        })\n                    }else{\n                        that.commentListPage--;\n                    }\n                }\n                if (type == \"refresh\") {\n                    uni.stopPullDownRefresh(); // 停止刷新\n                }\n                that.$forceUpdate();\n            },\n\n            async sendComment(e){\n                let that = this;\n                if(that.inputContent){\n                    let secRes = await wx.cloud.callFunction({\n                        name:'sys',\n                        data:{\n                            $url:'msgSecCheck',\n                            value:that.inputContent\n                        }\n                    });\n                    if(secRes.result.code!=0){\n                        uni.showToast({\n                            icon:'none',\n                            title:'内容含有违规内容，请修改后提交'\n                        });\n                        that.inputContent='';\n                        return;\n                    }\n                    that.doSendComment();\n                }\n                that.tips='写评论...';\n                that.$forceUpdate();\n            },\n\n            async doSendComment(){\n                let that = this;\n                if(that.replyInfo.isReply){\n                    if(!that.lastReply.user_id){\n                        that.lastReply.trend_id = that.trend._id;\n                        that.lastReply.user_id = that.user._id;\n                        that.lastReply.name = that.user.userInfo.nickName;\n                        that.lastReply.avatar = that.user.userInfo.avatarUrl;\n                    }\n                    that.lastReply.create_at = new Date();\n                    that.lastReply.content = that.inputContent;\n                    that.lastReply.replied_name = that.repliedName;\n                    that.lastReply.is_sub_reply = that.isSubReply;\n                    that.lastReply.uid =  that.genPopupReplyUid(10);\n                    let res = await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'addCommentReply',\n                            id:that.replyInfo.comment_id,\n                            trendId:that.trend._id,\n                            reply:that.lastReply,\n                        }\n                    });\n                    // console.log(res)\n                    let result=res.result;\n                    if(result.code==0){\n                        if(!that.commentList[that.replyInfo.pidx].replys_num){\n                            that.commentList[that.replyInfo.pidx].replys_num=0;\n                            that.commentList[that.replyInfo.pidx].replys=[]\n                        }\n                        that.commentList[that.replyInfo.pidx].replys_num +=1;\n                        let tempReply ={};\n                        Object.assign(tempReply,that.lastReply);\n                        that.commentList[that.replyInfo.pidx].replys.push(tempReply);\n                        that.inputContent='';\n                        that.replyInfo.isReply=false;\n                        delete(that.lastReply.uid);\n\n                        await wx.cloud.callFunction({\n                            name:'cmn',\n                            data:{\n                                $url:'commentOpt',\n                                type:'inc',\n                                trendId:that.trend._id\n                            }\n                        });\n                    }\n                }else{\n                    if(!that.lastComment.user_id){\n                        that.lastComment.trend_id = that.trend._id;\n                        that.lastComment.user_id = that.user._id;\n                        that.lastComment.name = that.user.userInfo.nickName;\n                        that.lastComment.avatar = that.user.userInfo.avatarUrl;\n                    }\n                    that.lastComment.create_at = new Date();\n                    that.lastComment.content = that.inputContent;\n                    that.lastComment.replys =[];//初始化\n                    let res = await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'addComment',\n                            comment:that.lastComment\n                        }\n                    });\n                    that.lastComment._id=res._id;\n                    let tempComment ={};\n                    Object.assign(tempComment,that.lastComment);\n                    that.commentList.push(tempComment);\n                    that.inputContent='';\n                    delete(that.lastComment._id);\n\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'commentOpt',\n                            type:'inc',\n                            trendId:that.trend._id\n                        }\n                    });\n                }\n                that.playList[that.index].comments_num++;\n                that.tips='写评论...';\n                that.$forceUpdate();\n            },\n\n            contentInput(e){\n                this.textCont = e.detail.value.length;\n                if(this.replyInfo.isReply){\n                    let tempComment=e.detail.value;\n                    if(tempComment.length==0){\n                        this.replyInfo.isReply=false\n                    }\n                }\n            },\n\n            async operateComment(type,comment,idx,pidx){\n                let that = this;\n                if(type=='addLike'){\n                    this.commentList[idx].isLike=true;\n                    if(!this.commentList[idx].likes_num){\n                        this.commentList[idx].likes_num =0;\n                    }\n                    this.commentList[idx].likes_num +=1;\n\n                    let like={\n                        corp_user_id:this.user._id,\n                        name:this.user.name,\n                        avatar:this.user.avatar,\n                        create_at:new Date()\n                    };\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'addTrendLike',\n                            id:comment._id,\n                            like:like,\n                        }\n                    });\n                    that.$forceUpdate();\n                }else if(type=='removeComment'){\n                    this.currentComment = comment;\n                    this.$nextTick(() => {\n                        this.$refs['showRemove'].open()\n                    });\n                    that.$forceUpdate();\n                }else if(type=='removeLike'){\n                    this.commentList[idx].isLike=false;\n                    this.commentList[idx].likes_num -=1;\n\n                    let like={\n                        corp_user_id:this.user._id,\n                    };\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'removeTrendLike',\n                            id:comment._id,\n                            like:like,\n                        }\n                    });\n                    that.$forceUpdate();\n\n                }else if(type=='addReply'){\n                    this.isFocus =true;\n                    this.replyInfo.isReply =true;\n                    this.replyInfo.pidx=idx;\n                    this.replyInfo.comment_id=this.commentList[idx]._id;\n                    this.tips='回复 '+comment.name;\n                    this.repliedName = comment.name;\n                    this.isSubReply =false;\n                    this.inputContent='';\n                    this.$forceUpdate()\n                }else if(type=='removeReply'){\n\n                }\n            },\n            async operateReply(type,reply,idx,pidx){\n                let that = this;\n                if(type=='addLike'){\n                    this.commentList[pidx].replys[idx].isLike=true;\n                    if(!this.commentList[pidx].replys[idx].likes_num){\n                        this.commentList[pidx].replys[idx].likes_num =0;\n                    }\n                    this.commentList[pidx].replys[idx].likes_num +=1;\n\n                    let like={\n                        corp_user_id:this.user._id,\n                        name:this.user.name,\n                        avatar:this.user.avatar,\n                        create_at:new Date()\n                    };\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'addCommentReplyLike',\n                            id:that.commentList[pidx]._id,\n                            replyUid:reply.uid,\n                            like:like,\n                        }\n                    });\n                }else if(type=='removeLike'){\n                    this.commentList[pidx].replys[idx].isLike=false;\n                    this.commentList[pidx].replys[idx].likes_num -=1;\n\n                    let like={\n                        user_id:this.user._id,\n                    };\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'removeCommentReplyLike',\n                            id:that.commentList[pidx]._id,\n                            replyUid:reply.uid,\n                            like:like\n                        }\n                    });\n                }else if(type=='addReply'){\n                    this.isFocus =true;\n                    this.replyInfo.isReply=true;\n                    this.replyInfo.pidx=pidx;\n                    this.replyInfo.comment_id=this.commentList[pidx]._id;\n                    this.tips='回复 '+reply.name;\n                    this.repliedName = reply.name;\n                    this.isSubReply = true;\n                    this.inputContent='';\n                }else if(type=='removeReply'){\n\n                }\n            },\n            commentExpend(comment){\n                if(comment.isSpread){\n                    comment.isSpread=false\n                }else{\n                    comment.isSpread = true\n                }\n                //强制更新\n                this.$forceUpdate()\n            },\n            genPopupReplyUid(len){\n                return Math.random().toString(20).substr(3,len);\n            },\n\n            loadMoreComments(){\n                this.commentListPage +=1;\n                this.getCommentList()\n            },\n            async removeComment(comment){\n                await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'removeComment',\n                        id:this.currentTrend._id,\n                        content:comment,\n                    }\n                });\n                this.playList[this.index].comment--;\n                this.getCommentList(\"refresh\");\n                this.$refs['showRemove'].close();\n                this.$forceUpdate();\n            },\n\t\t\tvideoPlayPause(){\n\t\t\t\tthis.videoPlay(this.index)\n\t\t\t},\n\n\n            goProductDetail(product){\n                uni.navigateTo({\n                    \"url\":\"/pagesCmn/product/ShareProductDetail?id=\"+product._id\n                });\n            },\n\n            //跳至活动页\n            goActivityDetail(activity){\n                //活动页\n                uni.navigateTo({\n                    \"url\":\"/pagesCmn/activity/ShareActivityDetail?id=\"+activity._id\n                });\n            },\n\n            goQrcode(){\n                uni.navigateTo({\n                    url:\"/pagesCmn/trend/TrendQrcode?id=\"+ this.playList[this.index].id\n                })\n            },\n        },\n        watch:{\n            index(newVal,oldVal){\n                let len = this.playList.filter(item=>item.src).length;\n                //加载视频\n                if(len - this.index - 1 <= this.playCount){\n                    this.page++;\n                    // console.log('watch index',this.page,this.index);\n                    this.pushPlayList()\n                }\n                this.oldIndex = oldVal\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    page{\n        background-color:#000000;\n    }\n    .swiper{\n        flex: 1;\n        background-color: #000;\n        height: 92vh;\n    }\n    .swiper-item {\n        flex: 1;\n    }\n    .video {\n        flex: 1;\n    }\n    .video-box{\n        flex: 1;\n        width: 750rpx;\n    }\n\n    .cover-view-left{\n        position: absolute;\n        margin-left: 10upx;\n        width: 500upx;\n        bottom: 120upx;\n        z-index: 1;\n        font-size: 16px;\n        /*color: #FFFFFF;*/\n        /* #ifndef APP-PLUS */\n        white-space: pre-wrap;\n        text-overflow:ellipsis;\n        overflow:hidden;\n        /* #endif */\n    }\n\n    .left-view{\n        margin-bottom: 20upx;\n    }\n    .left-text{\n        font-size: 16px;\n        color: #FFFFFF;\n    }\n    .avatar{\n        border-radius: 50upx;\n        border-color: #fff;\n        border-style: solid;\n        border-width: 2px;\n    }\n\n    .cover-view-right{\n        position: absolute;\n        bottom: 160upx;\n        right: 20upx;\n        /* #ifndef APP-PLUS-NVUE */\n        display: flex;\n        flex-direction: column;\n        /* #endif */\n        z-index: 1;\n    }\n\n    .right-text{\n        text-align: center;\n        font-size: 14px;\n        color: #FFFFFF;\n        margin-bottom: 15upx;\n        height: 20px;\n    }\n    .img{\n        height: 64rpx;\n        width: 64rpx;\n        opacity: 0.9;\n    }\n    .page{\n        /* #ifndef APP-PLUS-NVUE */\n        display: flex;\n        flex-direction: column;\n        /* #endif */\n        flex: 1;\n    }\n    /* 底部分享 */\n    .trend-popup {\n        display: flex;\n        flex-direction: column;\n        height: 950rpx;\n        padding-bottom:62px;\n        position: fixed;\n        left:0;\n        bottom: 0;\n        width:100%;\n        z-index: 95;\n        border-top-left-radius: 3%;\n        border-top-right-radius: 3%;\n    }\n\n    .trend-popup-close {\n        position:absolute;\n        top:30rpx;\n        left:30rpx;\n        font-size: 39rpx;\n        text-align: center;\n        font-weight: bold;\n        z-index: 99;\n    }\n\n    .trend-popup-title {\n        margin-top:15rpx;\n        line-height: 60rpx;\n        font-size: 28rpx;\n        padding: 5rpx 0;\n        text-align: center;\n        font-weight: bold;\n    }\n\n    .trend-popup-content {\n        /* #ifndef APP-NVUE */\n        display: flex;\n        /* #endif */\n        flex-direction: row;\n        flex-wrap: wrap;\n        justify-content: center;\n        padding: 5px;\n        max-height: 850rpx;\n    }\n\n    .trend-popup-btn {\n        height: 90rpx;\n        line-height: 90rpx;\n        font-size: 14px;\n        border-top-color: #DADADA;\n        border-top-width: 1px;\n        border-top-style: solid;\n        text-align: center;\n        color: #666;\n    }\n\n    .remove-popup-btn {\n        height: 90rpx;\n        line-height: 90rpx;\n        font-size: 14px;\n        text-align: center;\n        color: #ed1c24;\n    }\n\n    .cu-btn{\n        padding: 0 10rpx;\n    }\n\n    .cu-reply {\n        margin-left: 90rpx;\n    }\n    .card-popup-line {\n        line-height: 90rpx;\n        border-top-color: #DADADA;\n        border-top-width: 1px;\n        border-top-style: solid;\n        margin:25rpx 20rpx 25rpx 70rpx;\n    }\n\n    .card-btn{\n        width: 60rpx;\n    }\n\n    /* 起到固定的作用 ,从而解决原页面触摸穿透的问题*/\n    .prevent {\n        width: 100%;\n        height: 100%;\n        /*自动回到顶部*/\n        /*position: fixed;*/\n        top: 0;\n        left: 0;\n        overflow: hidden;\n    }\n\n    /* 遮罩样式 */\n    .shade{\n        width:100%;\n        height: 100%;\n        position: fixed;\n        top:0;\n        left:0;\n        z-index: 90;\n    }\n\n    .ups-height-padding{\n        height: 850rpx;\n        padding-bottom:62px;\n        position: fixed;\n        left:0;\n        bottom: 0;\n        z-index: 99;\n    }\n\n    .ups-height{\n        height: 850rpx;\n        position: fixed;\n        left:0;\n        bottom: 0;\n        z-index: 99;\n    }\n</style>","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareTrendDetail.vue?vue&type=style&index=0&id=6da1d432&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareTrendDetail.vue?vue&type=style&index=0&id=6da1d432&scoped=true&lang=css&\""],"sourceRoot":""}