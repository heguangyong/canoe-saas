{"version":3,"sources":["uni-app:///main.js","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/product/ShareProductDetail.vue?f13d","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/product/ShareProductDetail.vue?befb","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/product/ShareProductDetail.vue?cfe4","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/product/ShareProductDetail.vue?773c","uni-app:///pagesCmn/product/ShareProductDetail.vue","webpack:////Users/fustic/Workspace/canoe-saas/pagesCmn/product/ShareProductDetail.vue?57f1"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","that","wxAuth","authBizInfo","setTimeout","url","$url","order"],"mappings":"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","file":"pagesCmn/product/ShareProductDetail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesCmn/product/ShareProductDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./ShareProductDetail.vue?vue&type=template&id=35d89432&\"\nvar renderjs\nimport script from \"./ShareProductDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareProductDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShareProductDetail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesCmn/product/ShareProductDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareProductDetail.vue?vue&type=template&id=35d89432&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareProductDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareProductDetail.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"\" :class=\"isUps == true ? 'prevent' : ''\">\n\t\t<!-- #ifdef MP-WEIXIN-->\n\t\t<cu-custom>\n            <block slot=\"content\">产品详情</block>\n\t\t\t<block slot=\"right\">\n\t\t\t\t<view class=\"action\">\n\t\t\t\t\t<view class=\"cu-load load-cuIcon\" :class=\"isLoad?'loading':'over'\"></view>\n\t\t\t\t</view>\n\t\t\t</block>\n        </cu-custom>\n\t\t<!-- #endif -->\n        <view class=\"page bg-white\">\n\t\t\t<view class=\"carousel\">\n\t\t\t\t<swiper indicator-dots circular=true duration=\"400\">\n\t\t\t\t\t<swiper-item class=\"swiper-item\" v-for=\"(item,index) in product.carouse\" :key=\"index\" :data-src=\"item\" @tap=\"previewImage\">\n\t\t\t\t\t\t<view class=\"image-wrapper\">\n\t\t\t\t\t\t\t<image\n\t\t\t\t\t\t\t\t\t:src=\"item\"\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\t\t\t></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</swiper-item>\n\t\t\t\t</swiper>\n\t\t\t</view>\n            <view class=\"cu-list menu-avatar\">\n            \t<view class=\"cu-item\" style=\"height: 110rpx; background-color:gainsboro\" @tap=\"goQrcode(product._id)\">\n            \t\t<view class=\"cu-avatar round \">\n            \t\t\t<image :src=\"product.avatar\" mode=\"aspectFill\" class=\"cu-avatar round \"></image>\n            \t\t</view>\n            \t\t<view class=\"content flex-sub\">\n            \t\t\t<view class=\"text-grey\">{{product.title}}</view>\n\t\t\t\t\t\t<view  class=\"text-gray text-sm flex justify-between\">\n\t\t\t\t\t\t\t价格：{{priceAndUnitName}}\n\t\t\t\t\t\t</view>\n            \t\t</view>\n\t\t\t\t\t<view class=\"action\" >\n\t\t\t\t\t\t<text class=\"cuIcon-qr_code\" style=\"font-size: 36px;\"></text>\n\t\t\t\t\t</view>\n            \t</view>\n            </view>\n\t\t\t<textarea v-if=\"product.detail.content\" readonly disabled class=\"text-box font40 width100 padding-sm solid text-gray text-cut\" style=\" background-color:gainsboro\" scroll-y=\"true\" maxlength=\"200\"  v-model=\"product.detail.content\" >\n            </textarea>\n\t\t\t<view v-if=\"product.detail.videos.length>0\">\n\t\t\t\t<video  :src=\"product.detail.videos[0]\" objectFit='contain' controls show-mute-btn muted></video>\n\t\t\t</view>\n\t\t\t<image v-for=\"(item,index) in product.detail.images\" :key=\"index\" :src=\"item\" :data-src=\"item\" @tap=\"previewImage\" mode=\"widthFix\" style=\"vertical-align: middle;\"></image>\n\t\t\t<view class=\"cu-tabbar-height\"></view>\n\t\t\t<view class=\"cu-tabbar-height\"></view>\n\t\t\t<!-- #ifdef MP-WEIXIN -->\n\t\t\t<view v-if=\"!isUps\" class=\"cu-bar bg-white tabbar border  foot\">\n\t\t\t    <button class=\"action\" @tap=\"goMy\">\n\t\t\t        <view class=\"cuIcon-home\"></view>我的\n\t\t\t    </button>\n\t\t\t    <button class=\"action\" open-type=\"share\" :data-product=\"product\">\n\t\t\t        <view class=\"cuIcon-share\"></view> 分享\n\t\t\t    </button>\n\t\t\t    <view class=\"action\" @tap=\"startTalk\">\n\t\t\t        <view class=\"cuIcon-message\"></view>咨询\n\t\t\t  \t</view>\n\t\t\t\t<view class=\"action\" @tap=\"goWishOrderList\">\n\t\t\t\t\t<view class=\"cuIcon-goods\"></view>购物袋\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action\" @tap=\"showWishProduct\">\n\t\t\t\t\t<view class=\"cuIcon-roundadd\"></view>收藏\n\t\t\t\t</view>\n\t\t\t    <view v-if=\"product.on_sale\" class=\"bg-green submit text-lg\"   @tap=\"showBuyProduct\">立即购买</view>\n\t\t\t    <view v-else class=\"bg-gray submit text-lg\" >产品已下架</view>\n\t\t\t</view>\n\t\t\t<!-- #endif -->\n\t\t\t<!-- #ifdef H5 -->\n\t\t\t<view class=\"cu-bar bg-white tabbar border  foot\">\n\t\t\t\t<view class=\"cu-bar bg-white tabbar border  foot\">\n\t\t\t\t\t<view class=\"bg-grey submit text-lg\">购买详询，请点击产品二维码进入小程序</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<!-- #endif -->\n        </view>\n        <!-- 遮罩 -->\n        <view class=\"shade\" v-if=\"isUps\"></view>\n        <!-- 底部展现收藏弹窗 -->\n        <uni-popup ref=\"showPopupWishProduct\" type=\"bottom\" @change=\"change\">\n        \t<view class=\"popup bg-white\">\n        \t\t<text class=\"cuIcon-close popup-close\" @click=\"cancel('PopupWishProduct')\"></text>\n        \t\t<text class=\"popup-title\" >加入购物袋</text>\n        \t\t<view class=\"popup-content\">\n        \t\t\t<scroll-view class=\"ups-height\" scroll-y=\"true\">\n\t\t\t\t\t\t<view  class=\"cu-card article\" style=\"width: 100%\">\n\t\t\t\t\t\t\t<view class=\"cu-item shadow\" style=\"margin: 10rpx;padding: 20rpx 0\">\n\t\t\t\t\t\t\t\t<view class=\"content\">\n\t\t\t\t\t\t\t\t\t<image :src=\"product.cover\" class=\"bg-gray\" mode=\"aspectFill\" ></image>\n\t\t\t\t\t\t\t\t\t<view class=\"desc\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"text-content\">\n\t\t\t\t\t\t\t\t\t\t\t{{product.title}}\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"text-cut text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t{{product.detail.content}}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"flex margin-top-sm justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<view  class=\"cu-capsule radius \">\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"text-red\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{priceAndUnitName}}\n\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t\t\t\t\t\t<ups-stepper :label='product._id' :max=\"100\" :val=\"product.num\" :step=\"1\" :min=\"1\" @change=\"stepper\"></ups-stepper>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n        \t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n        \t\t\t\t\t</view>\n        \t\t\t\t<view>\n        \t\t\t\t\t<view class=\"cu-bar solid-bottom margin-top-xxs radius\"></view>\n        \t\t\t\t\t<view class=\"cu-bar btn-group  foot bg-white\">\n        \t\t\t\t\t\t<button class=\"cu-btn   round line-grey\" :disabled=\"isLoad\"  @click=\"submitOrder\"> 确定 </button>\n        \t\t\t\t\t</view>\n        \t\t\t\t</view>\n        \t\t\t</scroll-view>\n        \t\t</view>\n        \t</view>\n        </uni-popup>\n\t\t<!-- 底部展现购买弹窗 -->\n\t\t<uni-popup ref=\"showPopupBuyProduct\" type=\"bottom\" @change=\"change\">\n\t\t\t<view class=\"popup bg-white\">\n\t\t\t\t<text class=\"cuIcon-close popup-close\" @click=\"cancel('PopupBuyProduct')\"></text>\n\t\t\t\t<text class=\"popup-title\" >购买</text>\n\t\t\t\t<view class=\"popup-content\">\n\t\t\t\t\t<scroll-view class=\"ups-height\" scroll-y=\"true\">\n\t\t\t\t\t\t<view  class=\"cu-card article\" style=\"width: 100%\">\n\t\t\t\t\t\t\t<view class=\"cu-item shadow\" style=\"margin: 10rpx;padding: 20rpx 0\">\n\t\t\t\t\t\t\t\t<view class=\"content\">\n\t\t\t\t\t\t\t\t\t<image :src=\"product.cover\" class=\"bg-gray\" mode=\"aspectFill\" ></image>\n\t\t\t\t\t\t\t\t\t<view class=\"desc\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"text-content\">\n\t\t\t\t\t\t\t\t\t\t\t{{product.title}}\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"text-cut text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{product.detail.content}}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"flex margin-top-sm justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<view  class=\"cu-capsule radius \">\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"text-red\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{priceAndUnitName}}\n\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ups-stepper :label='product._id' :max=\"100\" :val=\"product.num\" :step=\"1\" :min=\"1\" @change=\"stepper\"></ups-stepper>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t<view class=\"cu-bar solid-bottom margin-top-xxs radius\"></view>\n\t\t\t\t\t\t\t<view class=\"cu-bar btn-group  foot bg-white\">\n\t\t\t\t\t\t\t\t<button class=\"cu-btn   round line-grey\" :disabled=\"isLoad\"  @click=\"placeOrder\"> 确定 </button>\n        \t\t\t\t\t</view>\n        \t\t\t\t</view>\n        \t\t\t</scroll-view>\n        \t\t</view>\n        \t</view>\n        </uni-popup>\n\t</view>\n</template>\n\n<script>\n    import { mapState,mapMutations } from 'vuex'\n    import uniPopup from '@/components/uni-popup/uni-popup.vue';\n    import upsStepper from '@/components/ups-stepper/index.vue';\n    // #ifdef H5\n    import cloudbase from '@cloudbase/js-sdk';\n    import jweixin from 'jweixin-module';\n    // #endif\n\t\n\t\n    export default{\n        components: {\n            \"uni-popup\":uniPopup,\n            \"ups-stepper\":upsStepper,\n        },\n        data() {\n            return {\n                isLoad:false,\n                isUps:false,\n                product:{\n                    _id:'',\n\t\t\t\t\tqrcode:'',\n                    detail:{\n                        content:'',\n                        images:[],\n                        imgList:[],\n                        videos:[]\n                    },\n\t\t\t\t\tnum:1\n                },\n                priceAndUnitName:'',\n\t\t\t\tauthBizInfo:{}\n            };\n        },\n\n        onLoad(options) {\n            let that = this;\n            if(options.id){\n                that.product._id=options.id;\n                that.getDetail();\n            }\n            //扫码加好友\n            else if (options.scene) {\n                that.paramsStr +='scene='+options.scene;\n                let res = {};\n                let params = decodeURIComponent(options.scene).split(\"&\");\n                params.forEach(item => {\n                    let paramMap = item.split(\"=\");\n                    res[paramMap[0]] = paramMap[1];\n                    if(paramMap[0]=='qrcode'){\n                        that.product.qrcode=paramMap[1];\n                    }\n                });\n                that.getDetailByQrcode();\n            }\n            //根据产品获取企业名片\n            that.authBizInfo = {_id:that.product.card_id,name:that.product.name,avatar:that.product.avatar};\n            that.needWxAuth(that.authBizInfo);\n        },\n        onReady(){\n            wx.setNavigationBarTitle({\n                title: \"产品详情\"\n            })\n        },\n\n\t\tonShareAppMessage(res){\n\t\t    if(res.from=== 'button'){\n\t\t        let  product = res.target.dataset.product;\n\t\t        return{\n\t\t            title:product.title,\n\t\t            imageUrl:product.cover||'',\n\t\t            path:\"/pagesCmn/product/ShareProductDetail?id=\"+product._id,\n\t\t            // success:function(r){\n\t\t            //     uni.showToast({\n\t\t            //         'icon':'success',\n\t\t            //         'title':'分享成功'\n\t\t            //     });\n\t\t            // }\n\t\t        }\n\t\t    }\n\t\t},\n\n        //必须是全静态，否则数据加载不了\n        // onShareTimeline(){\n        //     return {\n        //         title: this.product.title,\n        //         imageUrl: this.product.cover||'',\n        //         path:\"/pagesCmn/product/ShareProductDetail?id=\"+this.product._id,\n        //     }\n        // },\n\n\t\tcomputed:{\n\t\t\t...mapState(['needAuthFlag','user','cardAccount']),\n\t\t},\n    methods:{\n        ...mapMutations(['needWxAuth','wxAuth','updateUser','updateUserAuth']),\n\n\t\tShareProductDetail(){\n\t\t    uni.showShareMenu({\n\t\t        withShareTicket:true,\n\t\t    })\n\t\t},\n\t\tasync getDetail(){\n\t\t    let that = this;\n            let res = null;\n            // #ifdef MP-WEIXIN\n\t\t\tres = await wx.cloud.callFunction({\n\t\t        name:'cmn',\n\t\t        data:{\n\t\t            $url:'getProductDetail',\n\t\t            id:that.product._id\n\t\t        }\n\t\t    });\n\t\t\tthat.product = res.result.data;\n            // #endif\n            // #ifdef H5\n\t\t\tres = await cloudbase.callFunction({\n                name:'web',\n                data:{\n                    $url:'getProductDetail',\n                    id:that.product._id\n                }\n            });\n\t\t\t// console.log('product',res.result.data);\n            that.product = JSON.parse(res.result.data);\n            //-------------------------\n            //提供分享公众号能力\n            res = await cloudbase.callFunction({\n                name:'web',\n                data:{\n                    $url:'signWeixin',\n                    url:\"http://cb.upservce.com/#/pagesCmn/product/ShareProductDetail?id=\"+that.product._id,\n                    needRefreshSignature:false\n                }\n            });\n            let signRet =  JSON.parse(res.result.data);\n            console.log('sign',res.result.data);\n            jweixin.config({\n                debug: true, // 调试，发布的时候改为false\n                appId: 'wxc42ba3b82548c8b6',\n                nonceStr: signRet.nonceStr,\n                timestamp: signRet.timestamp,\n                signature: signRet.signature,\n                jsApiList: [ // 可能需要用到的能力\n                    'updateAppMessageShareData',\n                    'updateTimelineShareData'\n                ],\n            });\n\n            jweixin.error ((res)=>{\n                console.log('jweixin.error',res);\n                //刷新后再分享\n                cloudbase.callFunction({\n                    name:'web',\n                    data:{\n                        $url:'signWeixin',\n                        url:\"http://cb.upservce.com/#/pagesCmn/product/ShareProductDetail?id=\"+that.product._id,\n                        needRefreshSignature:true\n                    }\n                })\n            });\n\n            jweixin.ready(() => {   //需在用户可能点击分享按钮前就先调用\n                jweixin.updateAppMessageShareData({\n                    title: that.product.title, // 分享标题\n                    desc: that.product.detail.content, // 分享描述\n                    link: \"/pagesCmn/product/ShareProductDetail?id=\"+that.product._id, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\n                    imgUrl:  that.product.cover, // 分享图标\n                    success: function () {\n                        // 设置成功\n                        console.log('success');\n                    }\n                })\n            });\n            //-------------------------\n\n            // #endif\n\t\t\tthat.product.num=1;\n            that.priceAndUnitName = '¥ '+ parseFloat(that.product.price).toFixed(2) + that.product.unit_name;\n            //根据产品获取企业名片\n            that.authBizInfo = {_id:that.product.card_id,name:that.product.name,avatar:that.product.avatar};\n            that.needWxAuth(that.authBizInfo);\n\n\n\t\t},\n\n        async getDetailByQrcode(){\n            let that = this;\n            let res = {};\n            // #ifdef MP-WEIXIN\n            res =await wx.cloud.callFunction({\n                name: 'cmn',\n                data: {\n                    $url: 'getProductDetailByQrcode',\n                    qrcode: that.product.qrcode,\n                }\n            });\n            that.product = res.result.data;\n            // #endif\n            // #ifdef H5\n            res =await cloudbase.callFunction({\n                name: 'web',\n                data: {\n                    $url: 'getProductDetailByQrcode',\n                    qrcode: that.product.qrcode,\n                }\n            });\n            that.product = JSON.parse(res.result.data);\n            // #endif\n            that.product.num=1;\n            that.priceAndUnitName = '¥ '+ parseFloat(that.product.price).toFixed(2) + that.product.unit_name;\n            //根据产品获取企业名片\n            that.authBizInfo = {_id:that.product.card_id,name:that.product.name,avatar:that.product.avatar};\n            that.needWxAuth(that.authBizInfo);\n        },\n\n\t\tpreviewImage(e){\n\t\t\tlet that = this;\n\t\t\tconsole.log(e);\n\t\t\tlet image = \"\";\n\t\t\tlet images = [];\n\t\t\timage = e.currentTarget.dataset.src;\n\t\t\tfor(let i in that.product.carouse){\n\t\t\t\timages.push(that.product.carouse[i])\n\t\t\t}\n\t\t\tfor(let j=0;j<that.product.detail.images.length;j++){\n\t\t\t\timages.push(that.product.detail.images[j])\n\t\t\t}\n\t\t\twx.previewImage({\n\t\t\t\tcurrent:image,\n\t\t\t\turls:images\n\t\t\t})\n\t\t},\n        goWebLogin(){\n            uni.navigateTo({\n                \"url\":\"/pages/my/WebLogin\"\n            })\n        },\n\n\t\t//开始聊天\n\t\tasync startTalk(){ \n\t\t\tlet that = this;\n            if(that.needAuthFlag){\n                that.wxAuth(that.authBizInfo);\n                setTimeout (() => {\n                    that.startTalk();\n                } , 2000 );\n                return;\n            }\n            that.updateUserAuth(that.authBizInfo);\n            // #ifdef MP-WEIXIN\n            setTimeout (() => {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\"url\":\"/pagesSys/site/service\"\n\t\t\t\t});\n            } , 1000 )\n            // #endif\n            // #ifdef H5\n            uni.navigateTo({\n                \"url\":\"/pagesSys/site/WebService\"\n            })\n            // #endif\n\t\t},\n\t\t\n\t\tgoMy(){\n            let that = this;\n            if(that.needAuthFlag){\n                that.wxAuth(that.authBizInfo);\n                setTimeout (() => {\n                    that.goMy();\n                } , 2000 );\n                return;\n            }\n            that.updateUserAuth(that.authBizInfo);\n            setTimeout (() => {\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '/pages/my/home',\n\t\t\t\t})\n        \t} , 1000 );\n\t\t},\n\t\t\n        goWishOrderList(){\n            let that = this;\n            if(that.needAuthFlag){\n                that.wxAuth(that.authBizInfo);\n                setTimeout (() => {\n                    that.goWishOrderList();\n                } , 2000 );\n                return;\n            }\n            that.updateUserAuth(that.authBizInfo);\n            setTimeout (() => {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\"url\":\"/pagesSys/my/WishOrderList\"\n\t\t\t\t});\n            } , 1000 );\n\t\t},\n        showWishProduct(){\n        \tlet that = this;\n            if(that.needAuthFlag){\n                that.wxAuth(that.authBizInfo);\n                setTimeout (() => {\n                    that.showWishProduct();\n                } , 2000 );\n                return;\n            }\n            that.updateUserAuth(that.authBizInfo);\n            that.$nextTick(() => {\n                that.isUps=true;\n                that.$refs['showPopupWishProduct'].open();\n            })\n        },\n        showBuyProduct(){\n\t\t\tlet that = this;\n            if(that.needAuthFlag){\n                that.wxAuth(that.authBizInfo);\n                setTimeout (() => {\n                    that.showBuyProduct();\n                } , 2000 );\n                return;\n            }\n            that.updateUserAuth(that.authBizInfo);\n            that.$nextTick(() => {\n                that.isUps=true;\n                that.$refs['showPopupBuyProduct'].open();\n            })\n\t\t},\n\n\n\t\t cancel(type){\n\t\t     this.$refs['show' + type].close()\n\t\t },\n\t\t \n\t\t change(e){\n\t\t     if(e.show){\n\t\t         this.isUps = true;\n\t\t     }else{\n\t\t         this.isUps =false;\n\t\t     }\n\t\t },\n\n\t\t//步进器\n\t\tstepper(e){\n\t\t\tconsole.log(e)\n\t\t\t//存购物记录\n\t\t\tif(e.val > 0){\n\t\t\t\tthis.product.num=e.val;\n\t\t\t}\n\t\t},\n\n        //提交订单//活动跟商品公用该方法\n        async submitOrder(){\n            let that = this;\n            let items =[{\n\t\t\t\t\tid:that.product._id,\n\t\t\t\t\tnum:that.product.num,\n\t\t\t\t\tcover:that.product.carouse[0],\n\t\t\t\t\ttitle:that.product.title,\n\t\t\t\t\tcontent:that.product.detail.content,\n\t\t\t\t\tprice:that.product.price,\n\t\t\t\t\tunit_name:that.product.unit_name,\n\t\t\t\t\tnew_price:that.product.price,\n\t\t\t\t\tdiscount:10,\n\t\t\t\t}];\n\t\t\tlet order ={};\n\t\t\torder.seller_avatar=that.product.avatar;\n\t\t\torder.seller_name=that.product.name;\n\t\t\torder.user_id=that.user._id;\n\t\t\torder.avatar= that.user.userInfo.avatarUrl;\n\t\t\torder.name= that.user.userInfo.nickName;\n\t\t\torder.items=items;\n\t\t\torder.order_state='wish';//购物车\n\t\t\tthat.isLoad =true;\n            await wx.cloud.callFunction({\n                name:'cmn',\n                data:{\n                    $url:'addWishOrder',\n                    order:order\n                }\n            });\n            that.isLoad =false;\n            uni.showToast({\n                icon:'success',\n                title:'加入购物袋成功'\n            });\n            that.$refs['showPopupWishProduct'].close();\n            setTimeout (() => {\n                uni.navigateTo({\n                    url:'/pagesSys/my/WishOrderList',\n                });\n            } , 1000 )\n        },\n\n        async placeOrder(){\n            let that = this;\n            that.isLoad =true;\n            let items =[{\n                id:that.product._id,\n                num:that.product.num,\n                cover:that.product.carouse[0],\n                title:that.product.title,\n                content:that.product.detail.content,\n                price:that.product.price,\n                unit_name:that.product.unit_name,\n                new_price:that.product.price,\n                discount:10,\n            }];\n            let order ={};\n            order.seller_avatar=that.product.avatar;\n            order.seller_name=that.product.name;\n            order.user_id=that.user._id;\n            order.avatar= that.user.userInfo.avatarUrl;\n            order.name= that.user.userInfo.nickName;\n            order.items=items;\n            order.order_state='wish';//购物车\n            let res = await wx.cloud.callFunction({\n                name:'cmn',\n                data:{\n                    $url:'addWishOrder',\n                    order:order\n                }\n            });\n\t\t\tthat.isLoad = false;\n            console.log('addWishOrder res',res);\n            uni.showToast({\n                icon:'success',\n                title:'生成订单成功'\n            });\n            that.$refs['showPopupBuyProduct'].close();\n            setTimeout (() => {\n                uni.navigateTo({\n                    url:'/pagesSys/my/NeedConfirmOrder?orderIds='+res.result._id,\n                });\n            } , 1000 )\n        },\n\n        goQrcode(id){\n\t\t    console.log('goQrcode',id);\n            uni.navigateTo({\n                url:\"/pagesCmn/product/ProductQrcode?id=\"+ id\n            })\n        },\n    },\n\n    }\n</script>\n\n<style lang='scss'>\n  .page{\n  \tz-index: 0;\n  \theight: 100vh;\n  }\n\n  video {\n  \twidth: 750rpx;\n  }\n  image {\n  \twidth: 750rpx;\n  }\n\n  .carousel {\n\t  height: 600rpx;\n\t  position:relative;\n\t  swiper{\n\t\t  height: 100%;\n\t  }\n\t  .image-wrapper{\n\t\t  width: 100%;\n\t\t  height: 100%;\n\t  }\n\t  .swiper-item {\n\t\t  display: flex;\n\t\t  justify-content: center;\n\t\t  align-content: center;\n\t\t  overflow: hidden;\n\t\t  image {\n\t\t\t  width: 100%;\n\t\t\t  height: 100%;\n\t\t  }\n\t  }\n  }\n  \n  /* 底部分享 */\n  .popup {\n  \tdisplay: flex;\n  \tflex-direction: column;\n  \theight: 950rpx;\n  \tpadding-bottom:62px;\n  \tposition: fixed;\n  \tleft:0;\n  \tbottom: 0;\n  \twidth:100%;\n  \tz-index: 95;\n  \tborder-top-left-radius: 3%;\n  \tborder-top-right-radius: 3%;\n  }\n  \n  .popup-close {\n  \tposition:absolute;\n  \ttop:30rpx;\n  \tleft:30rpx;\n  \tfont-size: 39rpx;\n  \ttext-align: center;\n  \tfont-weight: bold;\n  \tz-index: 199;\n  }\n  \n  .popup-title {\n  \tmargin-top:15rpx;\n  \tline-height: 60rpx;\n  \tfont-size: 28rpx;\n  \tpadding: 5rpx 0;\n  \ttext-align: center;\n  \tfont-weight: bold;\n  }\n  \n  .popup-content {\n  \t/* #ifndef APP-NVUE */\n  \tdisplay: flex;\n  \t/* #endif */\n  \tflex-direction: row;\n  \tflex-wrap: wrap;\n  \tjustify-content: center;\n  \tpadding: 5px;\n  \tmax-height: 950rpx;\n  }\n  \n  /* 起到固定的作用 ,从而解决原页面触摸穿透的问题*/\n  .prevent {\n  \twidth: 100%;\n  \theight: 100%;\n  \t/*自动回到顶部*/\n  \t/*position: fixed;*/\n  \ttop: 0;\n  \tleft: 0;\n  \toverflow: hidden;\n  }\n  \n  /* 遮罩样式 */\n  .shade{\n  \twidth:100%;\n  \theight: 100%;\n  \tposition: fixed;\n  \ttop:0;\n  \tleft:0;\n  \tz-index: 90;\n  }\n  \n  .ups-height{\n  \theight: 850rpx;\n  \tposition: fixed;\n  \tleft:0;\n  \tbottom: 0;\n  \tz-index: 99;\n  }\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareProductDetail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareProductDetail.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}