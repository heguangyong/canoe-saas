{"version":3,"sources":["uni-app:///main.js","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/NeedConfirmOrder.vue?049a","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/NeedConfirmOrder.vue?d407","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/NeedConfirmOrder.vue?ae02","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/NeedConfirmOrder.vue?3b91","uni-app:///pagesSys/my/NeedConfirmOrder.vue","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/NeedConfirmOrder.vue?a2b5"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l1","_self","_c","__map","orderList","order","index","$orig","__get_orig","l0","items","item","itemIndex","g0","parseFloat","price","toFixed","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","name","that","res","result","totalItemNum","totalPrice","updateUser","user","$forceUpdate","$refs","close","isLoad","forEach","confirmOrder","seller_avatar","seller_name","seller_id","user_id","avatar","recipient","order_state"],"mappings":"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","file":"pagesSys/my/NeedConfirmOrder.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesSys/my/NeedConfirmOrder.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./NeedConfirmOrder.vue?vue&type=template&id=41e865af&\"\nvar renderjs\nimport script from \"./NeedConfirmOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./NeedConfirmOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NeedConfirmOrder.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesSys/my/NeedConfirmOrder.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./NeedConfirmOrder.vue?vue&type=template&id=41e865af&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.orderList, function(order, index) {\n    var $orig = _vm.__get_orig(order)\n\n    var l0 = _vm.__map(order.items, function(item, itemIndex) {\n      var $orig = _vm.__get_orig(item)\n\n      var g0 = parseFloat(item.price).toFixed(2)\n      return {\n        $orig: $orig,\n        g0: g0\n      }\n    })\n\n    return {\n      $orig: $orig,\n      l0: l0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./NeedConfirmOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./NeedConfirmOrder.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"\" :class=\"isUps == true ? 'prevent' : ''\">\n\t\t<cu-custom    :isBack=\"true\">\n\t\t\t<block slot=\"backText\">返回</block>\n\t\t\t<block slot=\"content\">确认订单</block>\n\t\t\t<block slot=\"right\">\n\t\t\t\t<view class=\"action\">\n\t\t\t\t\t<view class=\"cu-load load-cuIcon\" :class=\"isLoad?'loading':'over'\"></view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t</cu-custom>\n\t\t<view class=\"page\">\n\t\t\t<view class=\"cu-list menu-avatar no-padding\" @tap=\"goAddAddress\">\n\t\t\t\t<view class=\"cu-item  card-radius margin-top-xxs margin-left-xs margin-right-xs margin-bottom-xs shadow bg-white.light\">\n\t\t\t\t\t<view  class=\"cu-avatar round\" >\n\t\t\t\t\t\t<view class=\"text-sm text-cut\" >{{recipient.key}}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"content\">\n\t\t\t\t\t\t<view class=\"text-grey\">{{recipient.name}}\n\t\t\t\t\t\t\t<text class=\"margin-left-sm text-abc\">{{recipient.phone}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"text-gray text-sm text-cut\" >{{recipient.address}}</view>\n\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"action\">\n\t\t\t\t\t\t<text class=\"cuIcon-right text-grey\" style=\"font-size: 38rpx;\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view  class=\"cu-card article\" style=\"width: 100%\"  v-for=\"(order,index) in orderList\" :key=\"index\">\n\t\t\t\t<block v-for=\"(item,itemIndex) in order.items\" :key=\"itemIndex\">\n\t\t\t\t\t<view class=\"cu-item shadow flex solid-bottom\" style=\"margin: 0 10rpx 0 10rpx; padding: 20rpx 0\" >\n\t\t\t\t\t\t<view class=\"content\" >\n\t\t\t\t\t\t\t<image :src=\"item.cover\" class=\"bg-gray\" style=\"width: 30%\"  mode=\"aspectFill\" @tap=\"goItemDetail(item.id)\"></image>\n\t\t\t\t\t\t\t<view class=\"desc\" style=\"width: 70%\" >\n\t\t\t\t\t\t\t\t<view class=\"text-content\" @tap=\"goItemDetail(item.id)\">\n\t\t\t\t\t\t\t\t\t<text clas=\"text-bold\">{{item.title}}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"text-cut text-sm\">\n\t\t\t\t\t\t\t\t\t\t{{item.content}}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"flex margin-top-sm  justify-between\">\n\t\t\t\t\t\t\t\t\t<view  class=\"cu-capsule radius \">\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-gray\">\n\t\t\t\t\t\t\t\t\t\t\t{{'¥ '+parseFloat(item.price).toFixed(2)+item.unit_name}}\n\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"text-gray\">{{'x'+item.num}}</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</block>\n\t\t\t</view>\n\t\t\t<view class=\"margin-xs\">\n\t\t\t\t<view class=\"cu-form-group\" @tap=\"showRemark\">\n\t\t\t\t\t<view class=\"title\">备注</view>\n\t\t\t\t\t<input class=\"text-left\" placeholder=\"选填，建议先和商家沟通后再填写\" v-model=\"recipient.remark\"></input>\n\t\t\t\t\t<view class=\"action\">\n\t\t\t\t\t\t<text class=\"cuIcon-comment text-grey\" style=\"font-size: 38rpx;\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"cu-tabbar-height\"></view>\n\t\t\t<view class=\"cu-tabbar-height\"></view>\n\t\t\t<view v-if=\"!isUps\" class=\"cu-bar bg-white tabbar border  foot\">\n\t\t\t\t<view  style=\"width: 75%\">\n\t\t\t\t\t<text class=\"margin-left-sm margin-right-sm\">共{{totalItemNum}}件，合计</text><text class=\"text-red text-bold text-xl\">{{totalPrice}}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"bg-green submit text-lg\" :class=\"isLoad?'bg-gray':''\" style=\"width: 25%\" :disabled=\"isLoad\" @tap=\"placeOrder\">下单</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 遮罩 -->\n\t\t<view class=\"shade\" v-if=\"isUps\"></view>\n\t\t<!-- 底部展现收藏弹窗 -->\n\t\t<uni-popup ref=\"showPopupRemark\" type=\"bottom\" @change=\"change\">\n\t\t\t<view class=\"popup bg-white\">\n\t\t\t\t<text class=\"cuIcon-close popup-close\" @click=\"cancel('PopupRemark')\"></text>\n\t\t\t\t<text class=\"popup-title\" >添加备注</text>\n\t\t\t\t<view class=\"popup-content\">\n\t\t\t\t\t<scroll-view class=\"ups-height\" scroll-y=\"true\">\n\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t<view class=\"cu-form-group\">\n\t\t\t\t\t\t\t\t<textarea class=\"text-box font40 bg-white width100 padding-sm solid\" style=\"height: 200rpx;\" scroll-y=\"true\" maxlength=\"1200\" placeholder=\"请输入\" v-model=\"recipient.remark\" >\n\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"cu-bar solid-bottom margin-top-xxs radius\"></view>\n\t\t\t\t\t\t\t<view class=\"cu-bar btn-group  foot bg-white\">\n\t\t\t\t\t\t\t\t<button class=\"cu-btn   round line-grey\"   @click=\"saveRemark\"> 确定 </button>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\t</view>\n</template>\n\n<script>\n    import { mapState,mapMutations } from 'vuex'\n\timport cmnUtils from '@/utils/cmnUtils.js'\n    import uniPopup from '@/components/uni-popup/uni-popup.vue';\n    import upsStepper from '@/components/ups-stepper/index.vue';\n\n\n    export default {\n        components: {\n            \"ups-stepper\":upsStepper,\n            \"uni-popup\":uniPopup,\n        },\n        data() {\n            return {\n                isLoad:false,\n                isUps:false,\n                orderIds:[],//传入的待确认愿望订单列表ID集合\n                orderList: [],\n\t\t\t\ttotalItemNum:0,\n                totalPrice:'',\n                //收货地址\n                recipient:{name:'',phone:'',address:'',remark:''},\n                //生成待确认的订单\n\t\t\t\tconfirmOrder:{recipient:{name:'',phone:'',address:'',remark:''}}\n            }\n        },\n\t\tonLoad(options){\n            if(options.orderIds){\n                this.orderIds = options.orderIds.split(',');\n                console.log('orderIds',this.orderIds);\n\t\t\t}\n\t\t},\n        onShow() {\n            this.getDetail();\n        },\n\n        computed:{\n            ...mapState(['user']),\n        },\n        methods:{\n            ...mapMutations(['updateUser']),\n            async getDetail(){\n                let that = this;\n                let res = null;\n                res = await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'getNeedConfirmOrderListByUserId',\n                        userId:that.user._id,\n                        orderIds:that.orderIds,\n                        page:that.page\n                    }\n                });\n                that.orderList = res.result.data||[];\n\t\t\t\tlet totalAmount = 0;\n                that.totalItemNum = 0;\n\t\t\t\tthat.orderList.forEach(order=>{\n\t\t\t\t    order.items.forEach(item=>{\n                        that.totalItemNum += item.num;\n                        totalAmount += item.price*item.num;\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t//商品总价\n\t\t\t\tthat.confirmOrder.price_items= totalAmount;\n                that.totalPrice = '¥ '+ parseFloat(totalAmount).toFixed(2);\n                if(that.user.userInfo.recipients){\n                    that.recipient = that.user.userInfo.recipients[0];\n                    for(let i in that.user.userInfo.recipients){\n                        if(that.user.userInfo.recipients[i].as_default){\n                            that.recipient = that.user.userInfo.recipients[i];\n                            break;\n                        }\n                    }\n\t\t\t\t}\n            },\n\n            goItemDetail(id){\n                uni.navigateTo({\n                    \"url\":\"/pagesCmn/product/ProductDetailExt?id=\"+id\n                })\n            },\n            goAddAddress(){\n              uni.navigateTo({\n\t\t\t\t  url:\"/pagesSys/my/AddressList\"\n\t\t\t  })\n\t\t\t},\n            showRemark(){\n                let that = this;\n                that.$nextTick(() => {\n                    that.isUps=true;\n                    that.$refs['showPopupRemark'].open();\n                })\n            },\n\n            cancel(type){\n                this.$refs['show' + type].close()\n            },\n\n            change(e){\n                if(e.show){\n                    this.isUps = true;\n                }else{\n                    this.isUps =false;\n                }\n            },\n\n            async saveRemark(){\n                let that = this;\n                for(let i in that.user.userInfo.recipients){\n                    if(that.user.userInfo.recipients[i].key=that.recipient.key){\n                        that.user.userInfo.recipients[i].remark = that.recipient.remark;\n                        break;\n\t\t\t\t\t}\n\t\t\t\t}\n                that.updateUser(that.user);\n                await wx.cloud.callFunction({\n                    name:'sys',\n                    data:{\n                        $url:'updateUserInfo',\n                        id:that.user._id,\n                        userInfo:that.user.userInfo\n                    }\n                });\n                that.$forceUpdate();\n                that.$refs['showPopupRemark'].close();\n            },\n\n            async placeOrder(){\n                let that = this;\n                let items =[];\n                that.isLoad=true;\n                that.orderList.forEach(order=>{\n                    order.items.forEach(item=>{\n                        item.new_price=item.price;\n                        item.discount=10;\n\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t})\n\t\t\t\t});\n                //不是一个卖家不可以合并下单\n                that.confirmOrder.seller_avatar=that.user.userInfo.bizCardAvatar;\n                that.confirmOrder.seller_name=that.user.userInfo.bizCardName;\n                that.confirmOrder.seller_id=that.user.userInfo.bizCardId;\n                that.confirmOrder.user_id=that.user._id;\n                that.confirmOrder.avatar= that.user.userInfo.avatarUrl;\n                that.confirmOrder.name= that.user.userInfo.nickName;\n                that.confirmOrder.items=items;\n                that.confirmOrder.recipient=that.recipient;\n                that.confirmOrder.order_state='needPay';//下单\n\t\t\t\tthat.confirmOrder.order_total_item_num = that.totalItemNum;\n\t\t\t\tthat.confirmOrder.price_shipping=0;\n\t\t\t\tthat.confirmOrder.order_price=Number(that.confirmOrder.price_items+that.confirmOrder.price_shipping);\n\t\t\t\tthat.confirmOrder.free_price=0;//减免费用\n\t\t\t\tthat.confirmOrder.need_price=that.confirmOrder.order_price;//减免后应付金额\n\t\t\t\tlet res = await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'confirmOrder',\n                        order:that.confirmOrder\n                    }\n                });\n                let confirmOrderId = res.result._id;\n                if(!cmnUtils.isEmpty(confirmOrderId)){\n                    //删除愿望订单\n                    await wx.cloud.callFunction({\n                        name:'cmn',\n                        data:{\n                            $url:'removeWishOrder',\n                            orderIds:that.orderIds\n                        }\n                    });\n                    uni.showToast({\n                        icon:'success',\n                        title:'下单成功'\n                    });\n                    setTimeout (() => {\n                        uni.redirectTo({\n                            url:'/pagesSys/my/NeedPayOrder?id='+confirmOrderId,\n                        });\n                    } , 1000 )\n\t\t\t\t}\n                that.isLoad=false;\n\t\t\t}\n        }\n    }\n</script>\n\n<style>\n\t.page{\n\t\tz-index: 0;\n\t\theight: 100vh;\n\t}\n\t/* 底部分享 */\n\t.popup {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 420rpx;\n\t\tpadding-bottom:62px;\n\t\tposition: fixed;\n\t\tleft:0;\n\t\tbottom: 0;\n\t\twidth:100%;\n\t\tz-index: 95;\n\t\tborder-top-left-radius: 3%;\n\t\tborder-top-right-radius: 3%;\n\t}\n\n\t.popup-close {\n\t\tposition:absolute;\n\t\ttop:30rpx;\n\t\tleft:30rpx;\n\t\tfont-size: 39rpx;\n\t\ttext-align: center;\n\t\tfont-weight: bold;\n\t\tz-index: 199;\n\t}\n\n\t.popup-title {\n\t\tmargin-top:15rpx;\n\t\tline-height: 60rpx;\n\t\tfont-size: 28rpx;\n\t\tpadding: 5rpx 0;\n\t\ttext-align: center;\n\t\tfont-weight: bold;\n\t}\n\n\t.popup-content {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: center;\n\t\tpadding: 5px;\n\t\tmax-height: 950rpx;\n\t}\n\n\t/* 起到固定的作用 ,从而解决原页面触摸穿透的问题*/\n\t.prevent {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\t/*自动回到顶部*/\n\t\t/*position: fixed;*/\n\t\ttop: 0;\n\t\tleft: 0;\n\t\toverflow: hidden;\n\t}\n\n\t/* 遮罩样式 */\n\t.shade{\n\t\twidth:100%;\n\t\theight: 100%;\n\t\tposition: fixed;\n\t\ttop:0;\n\t\tleft:0;\n\t\tz-index: 90;\n\t}\n\n\t.ups-height{\n\t\theight: 350rpx;\n\t\tposition: fixed;\n\t\tleft:0;\n\t\tbottom: 0;\n\t\tz-index: 99;\n\t}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./NeedConfirmOrder.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./NeedConfirmOrder.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}