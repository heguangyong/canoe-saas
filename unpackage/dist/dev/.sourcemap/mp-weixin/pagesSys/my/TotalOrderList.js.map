{"version":3,"sources":["uni-app:///main.js","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/TotalOrderList.vue?69c4","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/TotalOrderList.vue?7507","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/TotalOrderList.vue?9c07","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/TotalOrderList.vue?3cdc","uni-app:///pagesSys/my/TotalOrderList.vue","webpack:////Users/fustic/Workspace/canoe-saas/pagesSys/my/TotalOrderList.vue?a12f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l1","_self","_c","__map","orderList","order","index","$orig","__get_orig","m0","showOrderState","order_state","l0","items","item","itemIndex","g0","parseFloat","price","toFixed","g1","need_price","m1","formatDateTime","create_at","l2","bizCard","pay_info","g2","is_open","currentOrder","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","that","page","name","uni","showToast","setTimeout","res","result","$nextTick","pay_type","$refs","close"],"mappings":"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","file":"pagesSys/my/TotalOrderList.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesSys/my/TotalOrderList.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./TotalOrderList.vue?vue&type=template&id=b444531a&\"\nvar renderjs\nimport script from \"./TotalOrderList.vue?vue&type=script&lang=js&\"\nexport * from \"./TotalOrderList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TotalOrderList.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesSys/my/TotalOrderList.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./TotalOrderList.vue?vue&type=template&id=b444531a&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.orderList, function(order, index) {\n    var $orig = _vm.__get_orig(order)\n\n    var m0 = _vm.showOrderState(order.order_state)\n\n    var l0 = _vm.__map(order.items, function(item, itemIndex) {\n      var $orig = _vm.__get_orig(item)\n\n      var g0 = parseFloat(item.price).toFixed(2)\n      return {\n        $orig: $orig,\n        g0: g0\n      }\n    })\n\n    var g1 = parseFloat(order.need_price).toFixed(2)\n    var m1 = _vm.formatDateTime(order.create_at)\n    return {\n      $orig: $orig,\n      m0: m0,\n      l0: l0,\n      g1: g1,\n      m1: m1\n    }\n  })\n\n  var l2 = _vm.__map(_vm.bizCard.pay_info, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var g2 = item.is_open\n      ? parseFloat(_vm.currentOrder.need_price).toFixed(2)\n      : null\n    return {\n      $orig: $orig,\n      g2: g2\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n        l2: l2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./TotalOrderList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./TotalOrderList.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"\" :class=\"isUps == true ? 'prevent' : ''\">\n\t\t<cu-custom    :isBack=\"true\">\n\t\t\t<block slot=\"backText\">返回</block>\n\t\t\t<block slot=\"content\">我的订单</block>\n\t\t\t<block slot=\"right\">\n\t\t\t\t<view class=\"action\">\n\t\t\t\t\t<view class=\"cu-load load-cuIcon\" :class=\"isLoad?'loading':'over'\"></view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t</cu-custom>\n\t\t<scroll-view scroll-x class=\"nav\">\n\t\t\t<view class=\"flex text-center\">\n\t\t\t\t<view class=\"cu-item flex-sub\" :class=\"index==tabCur?'cur':''\"  v-for=\"(item,index) in tabs\" :key=\"index\" @tap=\"tabSelect\" :data-id=\"index\">\n\t\t\t\t\t{{tabs[index]}}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t<scroll-view scroll-y v-for=\"(order,index) in orderList\" :key=\"index\">\n\t\t\t<view  class=\"margin-top-sm cu-card article solid-bottom\" style=\"width: 100%\">\n\t\t\t\t<view class=\"margin-left-xs margin-right-xs cu-form-group solid-bottom radius\" @tap=\"goDetail(order.order_state,order._id)\">\n\t\t\t\t\t<view class=\"title\">{{'订单编号：'+order.order_num}}</view>\n\t\t\t\t\t<view class=\"text-left text-red\">{{showOrderState(order.order_state)}}</view>\n\t\t\t\t</view>\n\t\t\t\t<block v-for=\"(item,itemIndex) in order.items\" :key=\"itemIndex\" >\n\t\t\t\t\t<view class=\"cu-item shadow flex solid-bottom\" style=\"margin: 0 10rpx 0 10rpx; padding: 20rpx 0;\"  @tap=\"goDetail(order.order_state,order._id)\">\n\t\t\t\t\t\t<view class=\"content\" >\n\t\t\t\t\t\t\t<image :src=\"item.cover\" class=\"bg-gray\" style=\"width: 30%\"  mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"desc\" style=\"width: 70%\" >\n\t\t\t\t\t\t\t\t<view class=\"text-content\">\n\t\t\t\t\t\t\t\t\t<text clas=\"text-bold\">{{item.title}}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"text-cut text-sm\">\n\t\t\t\t\t\t\t\t\t\t{{item.content}}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"flex margin-top-sm  justify-between\">\n\t\t\t\t\t\t\t\t\t<view  class=\"cu-capsule radius \">\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-gray\">\n\t\t\t\t\t\t\t\t\t\t\t{{'¥ '+parseFloat(item.price).toFixed(2)+item.unit_name}}\n\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"text-gray\">{{'x'+item.num}}</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"item.item_state=='waitReturnPay'\" class=\"cu-form-group\">\n\t\t\t\t\t\t\t<view class=\"title\"></view>\n\t\t\t\t\t\t\t<view  class=\"text-left text-grey\">待商家处理</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"item.item_state=='disagreeReturnPay'\" class=\"cu-form-group\">\n\t\t\t\t\t\t\t<view class=\"title\"></view>\n\t\t\t\t\t\t\t<view  class=\"text-left text-grey\">商家拒绝退款</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"item.item_state=='finishReturnPay'\" class=\"cu-form-group\">\n\t\t\t\t\t\t\t<view class=\"title\"></view>\n\t\t\t\t\t\t\t<view  class=\"text-left text-grey\">退款成功</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</block>\n\t\t\t\t<view class=\"margin-left-xs margin-right-xs cu-form-group  radius\">\n\t\t\t\t\t<view class=\"title\" ></view>\n\t\t\t\t\t<view class=\"text-left\">共{{order.order_total_item_num}}件商品，合计<text class=\"margin-left-sm text-lg text-bold\">{{'¥ '+parseFloat(order.need_price).toFixed(2)}}</text></view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"margin-left-xs margin-right-xs cu-form-group solid-bottom radius\">\n\t\t\t\t\t<view class=\"title\" style=\"font-size: 28upx;\">{{formatDateTime(order.create_at)}}</view>\n\t\t\t\t\t<view v-if=\"order.order_state=='needPay'\" class=\"text-left flex align-center\" style=\"height: 50rpx\">\n\t\t\t\t\t\t<button class=\"line-green\" style=\"font-size: 28upx;\" :disabled=\"isLoad\" @tap=\"doCancel(order)\">取消订单</button>\n\t\t\t\t\t\t<button class=\"margin-left-sm bg-green\" style=\"font-size: 28upx;\"  @tap=\"showPayOrder(order)\">付款</button>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-if=\"order.order_state=='shipped'\" class=\"text-left flex align-center\" style=\"height: 50rpx\">\n\t\t\t\t\t\t<button class=\"line-green\" style=\"font-size: 28upx;\" :disabled=\"isLoad\" @tap=\"confirmReceiveOrder(order)\">确认收货</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t<view class=\"cu-tabbar-height\"></view>\n\t\t<!-- 遮罩 -->\n\t\t<view class=\"shade\" v-if=\"isUps\"></view>\n\t\t<!-- 底部展现收藏弹窗 -->\n\t\t<uni-popup ref=\"showPopupPayOrder\" type=\"bottom\" @change=\"change\">\n\t\t\t<view class=\"popup bg-white\">\n\t\t\t\t<text class=\"cuIcon-close popup-close\" @click=\"cancel('PopupPayOrder')\"></text>\n\t\t\t\t<text class=\"popup-title\" >付款</text>\n\t\t\t\t<view class=\"popup-content\">\n\t\t\t\t\t<scroll-view class=\"ups-height\" scroll-y=\"true\">\n\t\t\t\t\t\t<view class=\"content-box solid-bottom margin-bottom-xl\" v-for=\"(item,index) in bizCard.pay_info\" v-if=\"item.is_open\" :key=\"index\">\n\t\t\t\t\t\t\t<image class=\"qrcode-image\" :src=\"item.qrcode\" mode=\"aspectFit\" ></image>\n\t\t\t\t\t\t\t<view class=\"content-text\">\n\t\t\t\t\t\t\t\t{{'合计 ¥ '+parseFloat(currentOrder.need_price).toFixed(2)}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"content-text\" >\n\t\t\t\t\t\t\t\t{{'请粘贴支付单据中的'+item.bill_num_name+':'}}\n\t\t\t\t\t\t\t\t<input  @blur=\"inputBillNum\" class=\"margin-top-lg text-bold justify-center solid-bottom bg-gray\" style=\"margin-left: -20rpx;\" v-model=\"currentOrder.bill_num\"></input>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<button class=\"cu-btn  round line-red\"  :disabled=\"isLoad\"  @click=\"payOrder(item.title)\"> {{'点此确认已'+item.title}} </button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\t</view>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import cmnUtils from '@/utils/cmnUtils.js';\n\n\n    export default {\n        data() {\n            return {\n                //订单状态：待付款，已取消，待商家发货\n                orderStates:['needPay','canceled','needSend','shipped','finished'],\n                orderList: [],\n                page: 1,\n\t\t\t\ttabCur: 0,\n                tabs:['全部','待付款','待收货','退款/售后'],\n                bizCard:{},//企业名片\n\t\t\t\tcurrentOrder:{bill_num:''}//当前订单\n            }\n        },\n\n        onShow() {\n            this.tabCur =0;\n\t\t\tthis.page=1;\n            this.getList()\n        },\n        onPullDownRefresh() {\n            this.page=1\n            this.getList()\n            uni.stopPullDownRefresh(); // 停止刷新\n        },\n        onReachBottom() {\n            this.page++;\n            this.getList()\n        },\n        computed:{\n            ...mapState(['user']),\n            formatDateTime(){\n                return function(time){\n                    let currentTime = time;\n                    if(currentTime){\n                        return cmnUtils.formatTime(currentTime,'yyyy-MM-dd HH:mm')\n                    }else{\n                        return \"\";\n                    }\n                }\n            },\n            showOrderState(){\n                return function(state){\n                    let currentState = state;\n                    if(currentState=='needPay'){\n                        return '待付款'\n                    }else if(currentState=='needSend'){\n                        return \"待商家发货\";\n                    }else if(currentState=='shipped'){\n                        return \"商家已发货\";\n                    }else if(currentState=='finished'){\n                        return \"已完成\";\n                    }else if(currentState=='canceled'){\n                        return \"已取消\";\n                    }\n                }\n            },\n        },\n        methods:{\n            tabSelect(e) {\n                let that = this;\n                that.tabCur = e.currentTarget.dataset.id;\n                that.page=1;\n                that.orderList=[];\n\t\t\t\tif(that.tabCur===0){\n\t\t\t\t\tthat.orderStates=['needPay','canceled','needSend','shipped','finished'];\n                    that.getList();\n\t\t\t\t}else if(that.tabCur===1){\n                    that.orderStates=['needPay'];\n                    that.getList();\n\t\t\t\t}\n\t\t\t\telse if(that.tabCur===2){\n                    that.orderStates=['needSend','shipped'];\n                    that.getList();\n\t\t\t\t}\n                else if(that.tabCur===3){\n                    that.orderStates=['finished'];\n                    that.getList();\n                }\n\t\t\t},\n\n            async getList(){\n                let that = this;\n                // console.log('call getList tabCur',that.tabCur,'states',that.orderStates);\n                if (that.page == 1) {\n                    that.orderList=[]\n                }\n                let res = null;\n                res = await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'getOrderListByUserIdAndState',\n                        userId:that.user._id,\n                        orderStates:that.orderStates,\n                        page:that.page\n                    }\n                });\n                if(!cmnUtils.isEmpty(res.result.data)){\n                    that.orderList.push(...res.result.data);\n\t\t\t\t}\n               \tlet needPayNum = 0;//待付款单数\n\t\t\t\tlet needReceiveNum = 0;//待收货单数\n\t\t\t\tthat.orderList.forEach(order=>{\n\t\t\t\t    if(order.order_state=='needPay'){\n\t\t\t\t\t\tneedPayNum++;\n\t\t\t\t\t}else if(order.order_state=='needSend'){\n                        needReceiveNum++;\n                    }\n\t\t\t\t});\n\t\t\t\tif(needPayNum>0){\n                    that.tabs[1] ='待付款 '+needPayNum;\n\t\t\t\t}\n\t\t\t\tif(needReceiveNum>0){\n                    that.tabs[2] ='待收货 '+needReceiveNum;\n\t\t\t\t}\n\t\t\t\tthat.$forceUpdate();\n            },\n\n            goDetail(state,id){\n                console.log('goDetail',state,id);\n                if(state=='needPay'){\n                    uni.navigateTo({\n                        \"url\":\"/pagesSys/my/NeedPayOrder?id=\"+id\n                    })\n\t\t\t\t}else if(state=='canceled'){\n                    uni.navigateTo({\n                        \"url\":\"/pagesSys/my/CanceledOrder?id=\"+id\n                    })\n                }else if(state=='needSend'){\n                    uni.navigateTo({\n                        \"url\":\"/pagesSys/my/WaitSendOrder?id=\"+id\n                    })\n\t\t\t\t}else if(state=='shipped'){\n                    uni.navigateTo({\n                        \"url\":\"/pagesSys/my/ShippedOrder?id=\"+id\n                    })\n\t\t\t\t}else if(state=='finished'){\n                    uni.navigateTo({\n                        \"url\":\"/pagesSys/my/FinishedOrder?id=\"+id\n                    })\n                }\n            },\n\n            async doCancel(order){\n                let that = this;\n                order.order_state='canceled';//已取消\n                await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'updateOrder',\n                        order:order\n                    }\n                });\n                uni.showToast({\n                    icon:'success',\n                    title:'订单已取消'\n                });\n                setTimeout (() => {\n                    uni.navigateTo({\n                        url:'/pagesSys/my/CanceledOrder?id='+order._id,\n                    });\n                } , 1000 )\n            },\n\n            async showPayOrder(order){\n                let that = this;\n                that.currentOrder = order;\n                let res = await wx.cloud.callFunction({\n                    name:'sys',\n                    data:{\n                        $url:'getCardDetailById',\n                        id:that.user.userInfo.bizCardId\n                    }\n                });\n                that.bizCard = res.result.data;\n                that.$nextTick(() => {\n                    that.isUps=true;\n                    that.$refs['showPopupPayOrder'].open();\n                })\n            },\n\n            cancel(type){\n                this.$refs['show' + type].close()\n            },\n\n            change(e){\n                if(e.show){\n                    this.isUps = true;\n                }else{\n                    this.isUps =false;\n                }\n            },\n\n            inputBillNum(e) {\n                let that = this;\n                console.log('inputBillNum',e);\n                //应付费用\n                that.currentOrder.bill_num = e.detail.value;\n                that.$forceUpdate();\n            },\n\n            async payOrder(payType){\n                let that = this;\n                that.currentOrder.order_state='needSend';//准备收货\n                that.currentOrder.pay_type=payType;\n                await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'payOrder',\n                        order:that.currentOrder\n                    }\n                });\n                uni.showToast({\n                    icon:'success',\n                    title:'付款成功'\n                });\n                that.$refs['showPopupPayOrder'].close();\n                setTimeout (() => {\n                    uni.navigateTo({\n                        url:'/pagesSys/my/WaitSendOrder?id='+that.currentOrder._id,\n                    });\n                } , 1000 )\n            },\n\n            async confirmReceiveOrder(order){\n                let that = this;\n                order.order_state='finished';//确认收货\n                await wx.cloud.callFunction({\n                    name:'cmn',\n                    data:{\n                        $url:'updateOrder',\n                        order:order\n                    }\n                });\n                uni.showToast({\n                    icon:'success',\n                    title:'确认已收货'\n                });\n            },\n\n        }\n    }\n</script>\n\n<style>\n\t/* 底部分享 */\n\t.popup {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 920rpx;\n\t\tpadding-bottom:62px;\n\t\tposition: fixed;\n\t\tleft:0;\n\t\tbottom: 0;\n\t\twidth:100%;\n\t\tz-index: 95;\n\t\tborder-top-left-radius: 3%;\n\t\tborder-top-right-radius: 3%;\n\t}\n\n\t.popup-close {\n\t\tposition:absolute;\n\t\ttop:30rpx;\n\t\tleft:30rpx;\n\t\tfont-size: 39rpx;\n\t\ttext-align: center;\n\t\tfont-weight: bold;\n\t\tz-index: 199;\n\t}\n\n\t.popup-title {\n\t\tmargin-top:15rpx;\n\t\tline-height: 60rpx;\n\t\tfont-size: 28rpx;\n\t\tpadding: 5rpx 0;\n\t\ttext-align: center;\n\t\tfont-weight: bold;\n\t}\n\n\t.popup-content {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: center;\n\t\tpadding: 5px;\n\t\tmax-height: 950rpx;\n\t}\n\n\t/* 起到固定的作用 ,从而解决原页面触摸穿透的问题*/\n\t.prevent {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\t/*自动回到顶部*/\n\t\t/*position: fixed;*/\n\t\ttop: 0;\n\t\tleft: 0;\n\t\toverflow: hidden;\n\t}\n\n\t/* 遮罩样式 */\n\t.shade{\n\t\twidth:100%;\n\t\theight: 100%;\n\t\tposition: fixed;\n\t\ttop:0;\n\t\tleft:0;\n\t\tz-index: 90;\n\t}\n\n\t.ups-height{\n\t\theight: 850rpx;\n\t\tposition: fixed;\n\t\tleft:0;\n\t\tbottom: 0;\n\t\tz-index: 99;\n\t}\n\n\t.content-box {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t}\n\n\t.qrcode-image {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\twidth: 390rpx;\n\t\theight: 500rpx;\n\t\toverflow: hidden;\n\t\tborder-radius: 50rpx;\n\t}\n\n\t.content-text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #333;\n\t\tpadding-top: 5px;\n\t\tpadding-bottom: 10px;\n\t}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./TotalOrderList.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./TotalOrderList.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}