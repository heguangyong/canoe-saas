{"version":3,"sources":["uni-app:///main.js","webpack:////Users/fustic/Workspace/canoe-saas/pagesVoucher/biz-voucher/ActivityVoucherList.vue?84da","webpack:////Users/fustic/Workspace/canoe-saas/pagesVoucher/biz-voucher/ActivityVoucherList.vue?1835","webpack:////Users/fustic/Workspace/canoe-saas/pagesVoucher/biz-voucher/ActivityVoucherList.vue?5d75","webpack:////Users/fustic/Workspace/canoe-saas/pagesVoucher/biz-voucher/ActivityVoucherList.vue?867e","uni-app:///pagesVoucher/biz-voucher/ActivityVoucherList.vue","webpack:////Users/fustic/Workspace/canoe-saas/pagesVoucher/biz-voucher/ActivityVoucherList.vue?8e64"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","tabCur","__map","toBeUsedVouchers","item","index","$orig","__get_orig","m0","formatCreateAt","create_at","l1","usedVouchers","m1","l2","expiredVouchers","m2","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","that","loadingType","name","log","result","code","isLoad","selectedVoucherId","uni","showToast","icon","getSearchList","$refs","close","$forceUpdate"],"mappings":"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","file":"pagesVoucher/biz-voucher/ActivityVoucherList.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesVoucher/biz-voucher/ActivityVoucherList.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./ActivityVoucherList.vue?vue&type=template&id=1b80076b&\"\nvar renderjs\nimport script from \"./ActivityVoucherList.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivityVoucherList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ActivityVoucherList.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesVoucher/biz-voucher/ActivityVoucherList.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ActivityVoucherList.vue?vue&type=template&id=1b80076b&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.tabCur == 0\n      ? _vm.__map(_vm.toBeUsedVouchers, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m0 = _vm.formatCreateAt(item.create_at)\n          return {\n            $orig: $orig,\n            m0: m0\n          }\n        })\n      : null\n  var l1 =\n    _vm.tabCur == 1\n      ? _vm.__map(_vm.usedVouchers, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m1 = _vm.formatCreateAt(item.create_at)\n          return {\n            $orig: $orig,\n            m1: m1\n          }\n        })\n      : null\n  var l2 =\n    _vm.tabCur == 2\n      ? _vm.__map(_vm.expiredVouchers, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m2 = _vm.formatCreateAt(item.create_at)\n          return {\n            $orig: $orig,\n            m2: m2\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n        l2: l2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ActivityVoucherList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ActivityVoucherList.vue?vue&type=script&lang=js&\"","<!--\n列出活动对应所有的券\n-->\n<template>\n    <view>\n        <cu-custom    :isBack=\"true\">\n            <block slot=\"content\">{{activityName}}</block>\n            <block slot=\"right\">\n                <view class=\"action\">\n                    <view class=\"cu-load load-cuIcon\" :class=\"isLoad?'loading':'over'\"></view>\n                </view>\n            </block>\n        </cu-custom>\n        <scroll-view scroll-x class=\"bg-white nav\">\n            <view class=\"flex text-center\">\n                <view class=\"cu-item flex-sub\" :class=\"index==tabCur?'text-green cur':''\" v-for=\"(item,index) in 3\" :key=\"index\" @tap=\"tabSelect\" :data-id=\"index\">\n                    {{tab[index]}}\n                </view>\n            </view>\n        </scroll-view>\n        <slot v-if=\"tabCur==0\">\n            <scroll-view scroll-y class=\"quan\">\n                <view class=\"flex card bg-white\"  v-for=\"(item,index) in toBeUsedVouchers\" :key=\"item\" @longpress=\"popupOperateVoucher(item._id)\">\n                    <view class=\"quan-text\">\n                        <view class=\"font50 cuIcon-move font-bold\" :class=\"'text-'+item.bg_color\"></view>\n                        <view class=\"flex\">\n                            <view  class=\"cu-avatar round lg margin-right-sm\" @tap=\"goDetail(item)\">\n                                <image :src=\"item.corp_user_avatar\" mode=\"aspectFill\" class=\"cu-avatar round lg\"></image>\n                            </view>\n                            <view class=\"content\">\n                                <view class=\"text-grey text-xl\">{{item.corp_user_name}}\n                                    <text class=\"text-abc\"></text>\n                                </view>\n                                <view class=\"text-gray text-sm\">操作时间：{{formatCreateAt(item.create_at)}}</view>\n                            </view>\n                        </view>\n                    </view>\n                    <view class=\"rel quan-right\">\n                        <view class=\"margin-top-xl flex justify-center align-center text-gray\" >\n                            <text class=\"text-bold text-lg ﻿margin-right-xs\">¥</text>\n                            <text class=\"text-bold text-xxl \">{{item.price}}</text>\n                        </view>\n                        <view class=\"solid-bottom\">\n                            <view class='cu-tag round ﻿bg-grey light' >{{item.num_total-item.num_used}} 张可用</view>\n                        </view>\n                    </view>\n                </view>\n            </scroll-view>\n        </slot>\n\n        <slot v-if=\"tabCur==1\">\n            <scroll-view scroll-y class=\"quan\">\n                <view class=\"flex card bg-white\"  v-for=\"(item,index) in usedVouchers\" :key=\"item\" @longpress=\"popupOperateVoucher(item._id)\">\n                    <view class=\"quan-text\">\n                        <view class=\"font50 cuIcon-move font-bold\" :class=\"'text-'+item.bg_color\"></view>\n                        <view class=\"flex\">\n                            <view  class=\"cu-avatar round lg margin-right-sm\" @tap=\"goDetail(item)\">\n                                <image :src=\"item.corp_user_avatar\" mode=\"aspectFill\" class=\"cu-avatar round lg\"></image>\n                            </view>\n                            <view class=\"content\">\n                                <view class=\"text-grey text-xl\">{{item.corp_user_name}}\n                                    <text class=\"text-abc\"></text>\n                                </view>\n                                <view class=\"text-gray text-sm\">操作时间：{{formatCreateAt(item.create_at)}}</view>\n                            </view>\n                        </view>\n                    </view>\n                    <view class=\"rel quan-right\">\n                        <view class=\"margin-top-xl flex justify-center align-center text-gray\" >\n                            <text class=\"text-bold text-lg ﻿margin-right-xs\">¥</text>\n                            <text class=\"text-bold text-xxl \">{{item.price}}</text>\n                        </view>\n                        <view class=\"solid-bottom\">\n                            <view class='cu-tag round ﻿bg-grey light' >已使用{{item.num_used}} 张</view>\n                        </view>\n                    </view>\n                </view>\n            </scroll-view>\n        </slot>\n\n        <slot v-if=\"tabCur==2\">\n            <scroll-view scroll-y class=\"quan\">\n                <view class=\"flex card bg-white\"  v-for=\"(item,index) in expiredVouchers\" :key=\"item\" @longpress=\"popupOperateVoucher(item._id)\">\n                    <view class=\"quan-text\">\n                        <view class=\"font50 cuIcon-move font-bold\" :class=\"'text-'+item.bg_color\"></view>\n                        <view class=\"flex\">\n                            <view  class=\"cu-avatar round lg margin-right-sm\" @tap=\"goDetail(item)\">\n                                <image :src=\"item.corp_user_avatar\" mode=\"aspectFill\" class=\"cu-avatar round lg\"></image>\n                            </view>\n                            <view class=\"content\">\n                                <view class=\"text-grey text-xl\">{{item.corp_user_name}}\n                                    <text class=\"text-abc\"></text>\n                                </view>\n                                <view class=\"text-gray text-sm\">操作时间：{{formatCreateAt(item.create_at)}}</view>\n                            </view>\n                        </view>\n                    </view>\n                    <view class=\"rel quan-right\">\n                        <view class=\"margin-top-xl flex justify-center align-center text-gray\" >\n                            <text class=\"text-bold text-lg ﻿margin-right-xs\">¥</text>\n                            <text class=\"text-bold text-xxl \">{{item.price}}</text>\n                        </view>\n                        <view class=\"solid-bottom\">\n                            <view class='cu-tag round ﻿bg-grey light' >{{item.num_total-item.num_used}}/{{item.num_total}} 张可用</view>\n                        </view>\n                    </view>\n                </view>\n            </scroll-view>\n        </slot>\n\n        <!-- 底部扩展功能弹窗 -->\n        <uni-popup ref=\"showPopupOperate\" type=\"bottom\" @change=\"change\">\n            <view class=\"card-popup bg-white\">\n                <view class=\"card-popup-content\" @click=\"removeVoucher\">\n                    <text class=\"remove-popup-btn\" >删除</text>\n                </view>\n                <text class=\"card-popup-btn\" @click=\"cancel('PopupOperate')\">取消</text>\n            </view>\n        </uni-popup>\n        <slot v-if=\"!isUps\">\n            <!--页面底部抬升-->\n            ﻿<view class=\"cu-bar solid-bottom margin-top-xxs radius\"></view>\n            <!-- 底部操作菜单 -->\n            <view class=\"cu-bar btn-group   foot bg-white\">\n                <button class=\"cu-btn   shadow-blur\"   :disabled=\"isLoad\" @click=\"goHome\">去首页</button>\n            </view>\n        </slot>\n    </view>\n</template>\n\n<script>\n    import {mapState,mapMutations} from 'vuex'\n    import cmnUtils from '@/utils/cmnUtils.js'\n\n    export default {\n        components: {\n        },\n        data() {\n            return {\n                isLoad:false,\n                activityId:'',\n                activityName:'',\n                tabCur: 0,\n                tab:['待使用','已使用','已无效'],\n                toBeUsedVouchers:[],\n                usedVouchers:[],\n                expiredVouchers:[],\n                page: 1,\n                isEndPage:false,//最后一页\n                loadingType: 1,//上拉的状态：0-loading前；1-loading中；2-没有更多了\n                isUps:false,\n                selectedVoucherId:'-1'//选中卡券ID\n            }\n        },\n\n        onLoad(options){\n            console.log('options',options);\n            if(options.id){\n                this.activityId = options.id;\n            }\n            if(options.name){\n                this.activityName = options.name;\n            }\n            this.tabCur=0;\n            this.getList('TO_BE_USE');\n        },\n\n        onPullDownRefresh() {\n            this.page=1\n            if(this.tabCur===0){\n                this.getList('TO_BE_USE');\n            }else if(this.tabCur===1){\n                this.getList('USED');\n            }\n            else if(this.tabCur===2){\n                this.getList('EXPIRED');\n            }\n            uni.stopPullDownRefresh(); // 停止刷新\n        },\n\n        onReachBottom() {\n            this.page++;\n            if(this.tabCur===0){\n                this.getList('TO_BE_USE');\n            }else if(this.tabCur===1){\n                this.getList('USED');\n            }\n            else if(this.tabCur===2){\n                this.getList('EXPIRED');\n            }\n\n        },\n\n        computed: {\n            ...mapState(['user']),\n            formatCreateAt(){\n                return function(time){\n                    let currentTime = time;\n                    console.log('time',time);\n                    if(currentTime){\n                        return cmnUtils.formatTime(currentTime,'yyyy-MM-dd HH:mm:ss')\n                    }else{\n                        return \"\";\n                    }\n                }\n            },\n        },\n\n        methods: {\n            tabSelect(e) {\n                this.tabCur = e.currentTarget.dataset.id;\n                if(this.tabCur===0){\n                   this.getList('TO_BE_USE');\n                }else if(this.tabCur===1){\n                    this.getList('USED');\n                }\n                else if(this.tabCur===2){\n                   this.getList('EXPIRED');\n                }\n            },\n\n            async getList(status) {\n                let that = this;\n                this.isLoad=true;\n                that.loadingType = 1;\n                let res = await wx.cloud.callFunction({\n                    name:'vou',\n                    data:{\n                        $url:'getVoucherList',\n                        activityId:that.activityId,\n                        page:that.page,\n                        pageSize:10,\n                        status:status\n                    }\n                });\n                console.log('getList',status,res.result);\n                let result=res.result;\n                if (result.code == 0) {\n                    if (that.page == 1) {\n                        that.isEndPage = false;\n                        if(that.tabCur===0){\n                            that.toBeUsedVouchers = [];\n                        }else if(that.tabCur===1){\n                            that.usedVouchers = [];\n                        }\n                        else if(that.tabCur===2){\n                            that.expiredVouchers = [];\n                        }\n                    }\n                    result.data.forEach(vou => {\n                        if(that.tabCur===0){\n                            that.toBeUsedVouchers.push(vou);\n                        }else if(that.tabCur===1){\n                            that.usedVouchers.push(vou);\n                        }\n                        else if(that.tabCur===2){\n                            that.expiredVouchers.push(vou);\n                        }\n                    })\n                }\n                //后面没数据了\n                if(result.data.length<10){\n                    that.isEndPage = true;\n                    that.loadingType = 2;\n                }\n                that.isLoad=false;\n            },\n\n            goDetail(voucher){\n                console.log('voucher detail',voucher._id, voucher);\n                uni.navigateTo({\n                    \"url\": \"/pagesBiz/crm-cards/CrmCardDetail?cid=\" + voucher.user_id,\n                })\n            },\n\n            popupOperateVoucher(voucherId){\n                let that = this;\n                console.log('popupOperateVoucher',voucherId);\n                that.selectedVoucherId = voucherId;\n                this.$nextTick(() => {\n                    that.$refs['showPopupOperate'].open()\n                })\n            },\n\n            change(e){\n                if(e.show){\n                    this.isUps = true;\n                }else{\n                    this.isUps =false;\n                }\n            },\n\n            cancel(type){\n                this.$refs['show' + type].close()\n            },\n\n            //删除卡券\n            async removeVoucher(){\n                let that = this;\n                console.log('go remove voucher', that.selectedVoucherId);\n                await wx.cloud.callFunction({\n                    name:'vouchers',\n                    data:{\n                        $url:'remove',\n                        cardId:that.selectedVoucherId\n                    }\n                });\n\n                uni.showToast({ icon:'success',title:'删除成功'})\n                that.getSearchList(\"refresh\");\n                that.$refs['showPopupOperate'].close()\n                that.$forceUpdate()\n            },\n\n            goHome(){\n                uni.reLaunch({\n                    url: '/pages/sys-account/index',\n                })\n            },\n        }\n    }\n</script>\n\n<style>\n    .card-radius {\n        border-radius: 10upx;\n    }\n\n    ﻿/* 底部分享 */\n    .card-popup {\n        /* #ifndef APP-NVUE */\n        display: flex;\n        flex-direction: column;\n        /* #endif */\n        border-top-left-radius: 3%;\n        border-top-right-radius: 3%;\n    }\n\n    .card-popup-content {\n        /* #ifndef APP-NVUE */\n        display: flex;\n        /* #endif */\n        flex-direction: row;\n        flex-wrap: wrap;\n        justify-content: center;\n        padding: 5px;\n        max-height: 850rpx;\n    }\n\n    .card-popup-btn {\n        height: 90rpx;\n        line-height: 90rpx;\n        font-size: 14px;\n        border-top-color: #DADADA;\n        border-top-width: 1px;\n        border-top-style: solid;\n        text-align: center;\n        color: #666;\n    }\n\n    .remove-popup-btn {\n        height: 90rpx;\n        line-height: 90rpx;\n        font-size: 14px;\n        text-align: center;\n        color: #666;\n    }\n\n    .quan{\n        padding: 0 20rpx;\n        z-index: 0;\n    }\n    .font50{\n        font-size: 50rpx;\n    }\n    .card{\n        margin-top: 20rpx;\n        width: 100%;\n        border-radius: 20rpx;\n        padding: 5rpx 30rpx;\n        height: 170rpx;\n    }\n    .font32{\n        font-size: 32rpx;\n    }\n    .line35{\n        line-height: 50rpx;\n    }\n    .font-bold{\n        font-weight: bolder;\n    }\n    .quan-text{\n        width: 640rpx;\n    }\n    .quan-right{\n        width: 200rpx;\n    }\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ActivityVoucherList.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ActivityVoucherList.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}