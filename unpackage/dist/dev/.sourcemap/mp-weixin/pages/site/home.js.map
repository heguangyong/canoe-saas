{"version":3,"sources":["webpack:////Users/fustic/Workspace/canoe-saas/pages/site/home.vue?34aa","webpack:////Users/fustic/Workspace/canoe-saas/pages/site/home.vue?e87c","webpack:////Users/fustic/Workspace/canoe-saas/pages/site/home.vue?9aa4","webpack:////Users/fustic/Workspace/canoe-saas/pages/site/home.vue?a77a","uni-app:///pages/site/home.vue","webpack:////Users/fustic/Workspace/canoe-saas/pages/site/home.vue?a8be"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"gHAAA,yHACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,8GAAm0B,eAAG,G,8HC6Ct0B,Q,6pCAMA,CACA,YACE,WAAF,CACI,WAAJ,GAEA,KALA,WAMA,OACM,KAAN,oBACM,WAAN,CACQ,UAAR,EACQ,aAAR,EACQ,cAAR,GAEA,SACA,WACQ,KAAR,CACQ,CACE,MAAV,OACU,KAAV,UACU,MAAV,QACU,OAAV,OACU,QAAV,EACU,MAAV,GAUQ,CACE,MAAV,OACU,KAAV,WACU,MAAV,QACU,OAAV,WACU,QAAV,EACU,MAAV,OAgCE,kBAtEF,SAsEA,GAGI,OAFJ,OAEA,CACM,MAAN,+BACM,SAAN,oBACM,KAAN,mDACM,QAAN,gBAKE,QAlFF,WAmFI,KAAJ,aAGE,OAtFF,WAuFI,IAAJ,OACI,EAAJ,aACA,iBAGI,EAAJ,gBACI,EAAJ,oBAGE,SAAF,MACE,EAAF,sCAGE,QAAF,QACE,EAAF,uDADA,IAGI,UAHJ,WAGA,oIACA,KACA,WAFA,wBAGA,KAHA,SAIA,uBACA,WACA,MACA,6BACA,qBARA,OAIA,EAJA,OAWA,qBACA,oBACA,cACA,8CACA,gBACA,sBAhBA,+CAsBI,UAzBJ,WA0BM,IAAN,OACA,eACQ,EAAR,sBAGM,EAAN,YACQ,IAAR,0BAII,cApCJ,WAoCA,oIACA,IACA,QACA,eAHA,uBAIA,wBAJA,0CAQA,uBACA,WACA,MACA,cACA,kBACA,gCACA,sCAdA,OAQA,EARA,OAiBA,mBACA,4BAlBA,8CAmCI,gBAvEJ,WAwEM,IAAN,OACA,eACQ,EAAR,sBAGM,EAAN,YACQ,IAAR,gCAII,iBAlFJ,WAmFM,IAAN,OACA,eACQ,EAAR,sBAGM,EAAN,YACQ,IAAR,iCAII,gBA7FJ,WA6FA,wIACA,IACA,OAFA,SAIA,uBACA,WACA,MACA,yBACA,gCARA,OAIA,EAJA,OAWA,wBAXA,8CAyBI,OAtHJ,SAsHA,GACM,IAAN,OACM,QAAN,yFACM,IAAN,+BACA,QACA,eACU,EAAV,kBAIA,SACQ,EAAR,2CAEQ,EAAR,WACU,KAAV,OACU,MAAV,aAKI,WA1IJ,WA2IM,EAAN,YACQ,IAAR,2B,2ECnSA,8GAA0qC,eAAG,G","file":"pages/site/home.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=4b4afa04&name=main&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/site/home.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=4b4afa04&name=main&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"","<template name=\"main\">\n\t<view>\n    <cu-custom :isBack=\"false\">\n      <block slot=\"content\">我的名片</block>\n    </cu-custom>\n    <view style=\"margin:100rpx 0 100rpx 0; \">\n    <ups-card :card=\"card\">\n    </ups-card>\n    </view>\n    <view class=\"margin-top-xl card-bg\">\n      <image src=\"https://7072-prod-9goq82ctb17bd75f-1306535128.tcb.qcloud.la/resource/wave.gif\" mode=\"scaleToFill\" class=\"gif-wave\"></image>\n    </view>\n    <view class=\"padding flex text-center text-grey bg-white shadow-warp\">\n      <view class=\"flex flex-sub flex-direction solid-right\" @click=\"goMsgList\">\n        <view class=\"text-xxl text-orange\">{{accountSum.newMsgNum}}</view>\n        <view class=\"margin-top-sm\">\n          <text class=\"cuIcon-message margin-xs\"></text> 新消息</view>\n      </view>\n      <view class=\"flex flex-sub flex-direction solid-right\"  @click=\"goWishOrderList\">\n        <view class=\"text-xxl text-blue\">{{accountSum.wishOrderNum}}</view>\n        <view class=\"margin-top-sm\">\n          <text class=\"cuIcon-goods margin-xs\"></text> 购物袋</view>\n      </view>\n      <view class=\"flex flex-sub flex-direction\" @click=\"goTotalOrderList\">\n        <view class=\"text-xxl text-green\">{{accountSum.totalOrderNum}}</view>\n        <view class=\"margin-top-sm\">\n          <text class=\"cuIcon-ticket margin-xs\"></text> 全部订单</view>\n      </view>\n    </view>\n\n    <view class=\"margin-top-xl\">\n      <view class=\"n-list\">\n        <view hover-class=\"none\" @tap=\"goItem\" class=\"nav-li\" navigateTo :class=\"'bg-'+item.color\"\n              :style=\"[{animation: 'show ' + ((index+1)*0.2+1) + 's 1'}]\" v-for=\"(item,index) in bizCard.site\" :key=\"index\" :data-item=\"bizCard.site[index]\">\n          <view class=\"nav-title\">{{item.title}}</view>\n          <view class=\"nav-name\">{{item.name}}</view>\n          <text :class=\"'cuIcon-' + item.cuIcon\"></text>\n        </view>\n      </view>\n    </view>\n    <view class=\"cu-tabbar-height\"></view>\n\t</view>\n</template>\n\n<script>\n    import { mapState, mapMutations} from 'vuex';\n    import upsCard from '@/components/ups-card/index.vue';\n    // #ifdef H5\n    import cloudbase from '@cloudbase/js-sdk';\n    // #endif\n\n\texport default {\n\t\tname: \"site\",\n    components:{\n      'ups-card':upsCard,\n    },\n\t\tdata() {\n\t\t\treturn {\n          card:{name:'',remark:''},\n          accountSum:{\n            newMsgNum:0,\n            wishOrderNum:0,\n            totalOrderNum:0\n          },\n\t\t\t    bizCard:{\n\t\t\t        site_bg:'',\n            site:[\n                {\n                    title: '最新产品',\n                    name: 'product',\n                    color: 'white',\n                    cuIcon: 'shop',\n                    isOpen: true,\n                    auth:true\n                },\n                // {\n                //     title: '公司展厅',\n                //     name: 'trend',\n                //     color: 'mauve',\n                //     cuIcon: 'pic',\n                //     isOpen: true,\n                //     auth:true\n                // },\n                {\n                    title: '线上活动',\n                    name: 'activity',\n                    color: 'white',\n                    cuIcon: 'activity',\n                    isOpen: true,\n                    auth:true\n                }\n                // {\n                //     title: '客服沟通',\n                //     name: 'service',\n                //     color: 'blue',\n                //     cuIcon: 'service',\n                //     isOpen: true,\n                //     auth:true\n                // },\n                //\n                // {\n                //     title: '园区企业',\n                //     name: 'company',\n                //     color: 'red',\n                //     cuIcon: 'moreandroid',\n                //     isOpen: true,\n                //     auth:true\n                // },\n                // {\n                //     title: '关于我们',\n                //     name: 'about',\n                //     color: 'green',\n                //     cuIcon: 'info',\n                //     isOpen: true,\n                //     auth:true\n                // }\n            ]\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\n    onShareAppMessage(res){\n      if(res.from==='button'){\n      }\n      return{\n        title:'这是'+this.card.name+'的名片，请惠存。',\n        imageUrl:this.card.cover||'',\n        path:\"/pagesSys/card/ShareCardDetail?id=\"+this.card._id,\n        success:function(res){\n        }\n      }\n    },\n\n      onReady() {\n        this.getDetail();\n      },\n\n      onShow(){\n          let that =this;\n          that.needWxAuth();\n          if(that.needAuthFlag){\n              return;\n          }\n          that.getAccountSum();\n          that.getSiteElements();\n      },\n\n      computed:{\n          ...mapState(['needAuthFlag','user']),\n      },\n\n      methods: {\n          ...mapMutations(['needWxAuth','wxAuth','updateUser']),\n\n        async getDetail(){\n          let that = this;\n          if(that.user._id){\n            let res = {};\n            res = await wx.cloud.callFunction({\n              name:'sys',\n              data:{\n                $url:'getCardDetailByUserId',\n                userId:that.user._id\n              }\n            });\n            that.card = res.result.data;\n            that.cardId=that.card._id;\n            that.accounts=[];\n            that.user.userInfo.accounts.forEach(each=>{\n              if(!each.is_forbidden){\n                that.accounts.push(each);\n              }\n            });\n          }\n        },\n\n        goMsgList(){\n          let that = this;\n          if(that.needAuthFlag){\n            that.wxAuth(that.authBizInfo);\n            return;\n          }\n          uni.navigateTo({\n            \"url\":\"/pagesSys/my/MsgList\"\n          })\n        },\n\n        async getAccountSum(){\n          let that = this;\n          let res = null;\n          if(that.needAuthFlag){\n            that.wxAuth(that.authBizInfo);\n            return;\n          }\n          // #ifdef MP-WEIXIN\n          res = await wx.cloud.callFunction({\n            name:'cmn',\n            data:{\n              $url:'getSum',\n              userId:that.user._id,\n              sourceId:that.user.userInfo.cardId,\n              targetId: that.user.userInfo.bizCardId,\n            }\n          });\n          if(res.result.code==0){\n            that.accountSum = res.result.data;\n          }\n          // #endif\n          // #ifdef H5\n          res = await cloudbase.callFunction({\n            name:'web',\n            data:{\n              $url:'getSum',\n              userId:that.user._id,\n              sourceId:that.user.userInfo.cardId,\n              targetId: that.user.userInfo.bizCardId,\n            }\n          });\n          that.accountSum = JSON.parse(res.result.data);\n          // #endif\n        },\n\n        goWishOrderList(){\n          let that = this;\n          if(that.needAuthFlag){\n            that.wxAuth(that.authBizInfo);\n            return;\n          }\n          uni.navigateTo({\n            \"url\":\"/pagesSys/my/WishOrderList\"\n          })\n        },\n\n        goTotalOrderList(){\n          let that = this;\n          if(that.needAuthFlag){\n            that.wxAuth(that.authBizInfo);\n            return;\n          }\n          uni.navigateTo({\n            \"url\":\"/pagesSys/my/TotalOrderList\"\n          })\n        },\n\n        async getSiteElements(){\n            let that = this;\n            let res = null;\n            // #ifdef MP-WEIXIN\n            res = await wx.cloud.callFunction({\n                name:'sys',\n                data:{\n                    $url:'getCardDetailById',\n                    id:that.user.userInfo.bizCardId\n                }\n            });\n            that.bizCard = res.result.data;\n            // #endif\n            // #ifdef H5\n            res = await cloudbase.callFunction({\n                name:'web',\n                data:{\n                    $url:'getCardDetailById',\n                    id:that.user.userInfo.bizCardId\n                }\n            });\n            that.bizCard = JSON.parse(res.result.data);\n            // #endif\n        },\n\n        goItem(e){\n                  let that = this;\n                  console.log('item auth', e.currentTarget.dataset.item,'needWxAuth',this.needWxAuth(this.bizCard));\n                  let item = e.currentTarget.dataset.item;\n                  if(item.auth){\n                      if(that.needAuthFlag){\n                          that.wxAuth(that.bizCard);\n                          return;\n                      }\n          }\n          if(item.isOpen){\n                      uni.navigateTo({'url':'/pagesSys/site/'+item.name})\n          }else{\n                      uni.showToast({\n                          icon:'none',\n                          title:'此功能暂未开通'\n                      });\n          }\n\n        },\n        goWebLogin(){\n            uni.navigateTo({\n                \"url\":\"/pages/my/WebLogin\"\n            })\n        },\n\t\t},\n\t}\n</script>\n<style>\n\t.page {\n\t\theight: 100vh;\n\t}\n  .n-list{\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n  }\n  .card-bg {\n    background-size: cover;\n    display: flex;\n    justify-content: center;\n    padding-top: 40rpx;\n    overflow: hidden;\n    position: relative;\n    flex-direction: column;\n    align-items: center;\n    color: #fff;\n    font-weight: 300;\n    text-shadow: 0 0 3px rgba(0, 0, 0, 0.3);\n  }\n  .card-bg image {\n    width: 200rpx;\n    height: 200rpx;\n  }\n\n  .card-bg .gif-wave{\n    position: absolute;\n    width: 100%;\n    bottom: 0;\n    left: 0;\n    z-index: 99;\n    mix-blend-mode: screen;\n    height: 100rpx;\n  }\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}