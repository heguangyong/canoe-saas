(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesMgt-BizProductInput"],{"0c58":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("编辑产品")])],2),i("v-uni-scroll-view",[i("v-uni-form",[i("v-uni-view",{staticClass:"padding"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("标题")]),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"}),i("v-uni-input",{attrs:{placeholder:"请输入标题"},model:{value:t.product.title,callback:function(e){t.$set(t.product,"title",e)},expression:"product.title"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("封面")]),i("v-uni-view",[i("ups-upload",{attrs:{fileType:"image",uploadFile:t.product.cover},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadCover.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.removeCover.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"cu-form-group solid-top"},[i("v-uni-view",{staticClass:"title"},[t._v("产品主图")]),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"}),i("v-uni-input",{attrs:{type:"text",disabled:!0}})],1),i("v-uni-view",{staticClass:"bg-white padding-sm solid-bottom bg-white"},[i("ups-movable",{attrs:{imgList:t.product.imgList,imgSize:"75",maxNum:"9"},on:{moveEndList:function(e){arguments[0]=e=t.$handleEvent(e),t.moveEndListHandle.apply(void 0,arguments)},upload:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadImages.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.removeImages.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("价格"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-input",{attrs:{placeholder:"10.00"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}}),i("v-uni-view",{staticClass:"title"},[t._v("单位"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-input",{attrs:{placeholder:"元"},model:{value:t.product.unit_name,callback:function(e){t.$set(t.product,"unit_name",e)},expression:"product.unit_name"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("运费"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-input",{attrs:{placeholder:"0.00"},model:{value:t.product.price_shipping,callback:function(e){t.$set(t.product,"price_shipping",e)},expression:"product.price_shipping"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("产品标签（逗号分割）")])],1),i("v-uni-textarea",{staticClass:"text-box font40 bg-white width100 padding-sm solid",staticStyle:{height:"200rpx"},attrs:{"scroll-y":"true",maxlength:"200",placeholder:"请输入产品标签"},model:{value:t.product.tags,callback:function(e){t.$set(t.product,"tags",e)},expression:"product.tags"}}),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("产品详情")])],1),i("v-uni-textarea",{staticClass:"text-box font40 bg-white width100 padding-sm solid",staticStyle:{height:"500rpx"},attrs:{"scroll-y":"true",maxlength:"1200",placeholder:"请输入产品详情"},model:{value:t.product.detail.content,callback:function(e){t.$set(t.product.detail,"content",e)},expression:"product.detail.content"}}),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("视频介绍")])],1),i("v-uni-view",{staticClass:"bg-white padding-sm"},[i("ups-uploads",{attrs:{fileType:"video",fileList:t.product.detail.videos,maxNum:"1"},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadDetailVideos.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.removeDetailVideos.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cu-form-group solid-top"},[i("v-uni-view",{staticClass:"title"},[t._v("详情介绍")])],1),i("v-uni-view",{staticClass:"bg-white padding-sm solid-bottom bg-white"},[i("ups-movable",{attrs:{imgList:t.product.detail.imgList,imgSize:"75",maxNum:"9"},on:{moveEndList:function(e){arguments[0]=e=t.$handleEvent(e),t.moveEndListDetailHandle.apply(void 0,arguments)},upload:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadDetailImages.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.removeDetailImages.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"})],1)],1)],1),i("v-uni-view",{staticClass:"cu-tabbar-height"})],1),i("v-uni-view",{staticClass:"cu-bar btn-group  foot bg-white"},[i("v-uni-button",{staticClass:"cu-btn   line-grey round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navback.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"cu-btn   line-grey round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)},o=[]},1320:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("99af"),i("4160"),i("a9e3"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),o=a(i("5530")),s=i("2f62"),c=i("e3fb"),u={name:"imageUploadMovable",props:{imgList:{type:Array,required:!0,default:function(){return[]}},imgSize:{type:Number,default:function(){return 80}},maxNum:{type:Number,default:9}},data:function(){return{scopeImgList:this.imgList,areaBoxInfo:{},x:0,y:0,idx:0,moveSrc:"",areaBoxTop:0,hoverImgIdx:"",inBoxXY:{}}},watch:(0,o.default)((0,o.default)({},(0,s.mapState)(["user","cloudPath"])),{},{imgList:function(){var t=this;t.scopeImgList=t.imgList,this.getDomInfo("areaBox",(function(e){t.areaBoxInfo=e,t.scopeImgList.forEach((function(i,a){t.getDomInfo("img"+a,(function(t){i.x=t.left-e.left})),t.getDomInfo("img"+a,(function(t){i.y=t.top-e.top}))}))}))}}),mounted:function(){var t=this;this.getDomInfo("areaBox",(function(e){t.areaBoxInfo=e,t.scopeImgList.forEach((function(i,a){t.getDomInfo("img"+a,(function(t){i.x=t.left-e.left})),t.getDomInfo("img"+a,(function(t){i.y=t.top-e.top}))}))}))},methods:{chooseFile:function(){var e=this,i=this.maxNum-this.scopeImgList.length;i<0&&(i=0),wx.chooseImage({count:i,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){var i,a=(0,n.default)(t.tempFilePaths);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.split("."),u=s[s.length-1];wx.cloud.uploadFile({cloudPath:(0,c.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".")+u,filePath:o}).then((function(t){uni.hideLoading(),t.fileID&&(e.$emit("upload",t.fileID),wx.cloud.callFunction({name:"sys",data:{$url:"cloudImgSecCheck",fileID:t.fileID}}).then((function(t){0==t.result.code||uni.showToast({icon:"none",title:"图片含有违规内容，请重新选择!"})})))}))}}catch(r){a.e(r)}finally{a.f()}},fail:function(e){t("log",e," at components/ups-movable/index.vue:152")}})},viewFile:function(t){wx.previewImage({urls:this.scopeImgList[t.currentTarget.dataset.index],current:t.currentTarget.dataset.url})},deleteFile:function(t){var e=this;uni.showModal({title:"删除",content:"确定要删除?",cancelText:"取消",confirmText:"确定",success:function(i){i.confirm&&e.$emit("remove",t)}})},moveHandle:function(){},onChange:function(t){},tstr:function(t,e){var i=this.areaBoxInfo.top,a=this.areaBoxInfo.left;this.x=this.scopeImgList[t].x,this.y=this.scopeImgList[t].y,this.moveSrc=this.scopeImgList[t].url,this.idx=t;var n=e.changedTouches[0].clientX-a,o=e.changedTouches[0].clientY-i;this.inBoxXY={x:n-this.scopeImgList[t].x,y:o-this.scopeImgList[t].y}},tsmo:function(t){var e=this,i=this.areaBoxInfo.top,a=this.areaBoxInfo.left,n=this.imgSize,o=t.changedTouches[0].clientX-a,s=t.changedTouches[0].clientY-i;this.x=o-this.inBoxXY.x,this.y=s-this.inBoxXY.y,this.scopeImgList.forEach((function(t,i){o>t.x&&o<t.x+n&&s>t.y&&s<t.y+n&&(e.hoverImgIdx="img"+i)}))},toend:function(e){var i=this,a=this.areaBoxInfo.top,n=this.areaBoxInfo.left,o=this.imgSize,s=e.changedTouches[0].clientX-n,c=e.changedTouches[0].clientY-a;for(var u in this.scopeImgList){var r=this.scopeImgList[u];if(s>r.x&&s<r.x+o&&c>r.y&&c<r.y+o){i.scopeImgList[i.idx].url=i.scopeImgList[u].url,i.scopeImgList[u].url=i.moveSrc;break}}this.moveSrc="",this.hoverImgIdx="",t("log","change",this.imgList,this.scopeImgList,i.scopeImgList," at components/ups-movable/index.vue:241"),this.$emit("moveEndList",this.imgList)},getDomInfo:function(t,e){var i=uni.createSelectorQuery().in(this);i.select("#"+t).boundingClientRect().exec((function(t){e(t[0])}))}}};e.default=u}).call(this,i("0de9")["log"])},"178a":function(t,e,i){"use strict";var a=i("7bab"),n=i.n(a);n.a},"2a94":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".solids[data-v-36839de3]{border:%?1?% dashed #aaa}.iconfont[data-v-36839de3]{font-size:%?100?%}",""]),t.exports=e},"2f3f":function(t,e,i){"use strict";i.r(e);var a=i("1320"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"35ca":function(t,e,i){"use strict";i.r(e);var a=i("b119"),n=i("2f3f");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("604f");var s,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"78270430",null,!1,a["a"],s);e["default"]=u.exports},"3a66":function(t,e,i){"use strict";var a=i("d183"),n=i.n(a);n.a},"3c7a":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".movarea[data-v-78270430]{width:100%;height:75px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.imgBox[data-v-78270430]{width:100%;height:75px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.imgBox .imgItem[data-v-78270430]{position:relative}.imgBox .imgItem uni-image[data-v-78270430]{width:75px;height:75px;-webkit-transition:all .5s;transition:all .5s;vertical-align:top}.imgBox .imgItem .closeBtn[data-v-78270430]{background-color:red;color:#fff;border-radius:50%;text-align:center;position:absolute;top:0;right:0;width:16px;height:16px;line-height:16px;z-index:3;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.moveV[data-v-78270430]{opacity:.8;z-index:999}.moveV uni-image[data-v-78270430]{width:75px;height:75px}.select[data-v-78270430]{-webkit-transform:scale(1.3);transform:scale(1.3)}",""]),t.exports=e},"3eb2":function(t,e,i){"use strict";i.r(e);var a=i("c3ed"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"476e":function(t,e,i){"use strict";i.r(e);var a=i("88aa"),n=i("3eb2");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("3a66");var s,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"29cb287b",null,!1,a["a"],s);e["default"]=u.exports},"604f":function(t,e,i){"use strict";var a=i("f083"),n=i.n(a);n.a},"67a3":function(t,e,i){var a=i("6a75");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("24ad7e20",a,!0,{sourceMap:!1,shadowMode:!1})},"6a75":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".padding[data-v-57d2c19f]{padding:%?10?%}.text-box[data-v-57d2c19f]{height:%?100?%;\n\t/* background-color: #FFFFFF; */-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?24?%;color:#353535;line-height:1.8}uni-video[data-v-57d2c19f]{width:%?750?%}uni-image[data-v-57d2c19f]{width:%?750?%}",""]),t.exports=e},"7bab":function(t,e,i){var a=i("2a94");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("8e7cff12",a,!0,{sourceMap:!1,shadowMode:!1})},"7df5":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",["image"===t.fileType?i("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.fileList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"bg-img",attrs:{"data-url":t.fileList[a]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewFile.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:t.fileList[a],mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":a},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.fileList.length<t.maxNum?i("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2):t._e(),"video"===t.fileType&&t.fileList.length>=t.maxNum?i("v-uni-view",[i("v-uni-view",{staticClass:"cu-tag bg-red fr",attrs:{"data-index":"0"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1):t._e(),"video"===t.fileType?i("v-uni-view",{staticClass:"grid col-2 grid-square flex-sub rel"},[t.fileList.length>=t.maxNum?i("v-uni-video",{attrs:{src:t.fileList[0],"object-fit":"cover",controls:!0,muted:!0}}):t._e(),t.fileList.length<t.maxNum?i("v-uni-view",{staticClass:" grid col-4 grid-square flex-sub solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-shangchuanshipin text-gray abs center"})],1):t._e()],1):t._e()],1)},o=[]},"88aa":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",["image"===t.fileType?i("v-uni-view",{staticClass:"flex-sub"},[t.uploadFile?i("v-uni-view",{staticClass:"bg-img",attrs:{"data-url":t.uploadFile},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewFile.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"cu-avatar",attrs:{src:t.uploadFile,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-avatar bg-red",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1):i("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1)],1):i("v-uni-view",{staticClass:"grid col-2 grid-square flex-sub rel"},[t.uploadFile?i("v-uni-view",[t.uploadFile?i("v-uni-video",{attrs:{src:t.uploadFile,"object-fit":"cover",controls:!0,muted:!0}}):t._e()],1):i("v-uni-view",{staticClass:" grid col-4 grid-square flex-sub solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-shangchuanshipin text-gray abs center"})],1)],1)],1)},o=[]},"90f8":function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("4160"),i("c975"),i("a434"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),o=a(i("5530")),s=a(i("9af9")),c=a(i("476e")),u=a(i("35ca")),r=i("2f62"),l={components:{"ups-uploads":s.default,"ups-upload":c.default,"ups-movable":u.default},data:function(){return{productId:"",product:{price:0,unit_name:"元",carouse:[],imgList:[],detail:{content:"",images:[],imgList:[],videos:[]}},dbProductTags:"",needUpdateTags:!1}},onLoad:function(t){var e=this;t.id&&(e.productId=t.id,this.getDetail())},onShow:function(){},computed:(0,o.default)({},(0,r.mapState)(["user"])),methods:{getDetail:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.next=3,wx.cloud.callFunction({name:"cmn",data:{$url:"getProductDetail",id:i.productId}});case 3:a=e.sent,i.product=a.result.data,i.product.imgList=[],i.product.carouse.forEach((function(t){i.product.imgList.push({url:t})})),i.product.detail.imgList=[],i.product.detail.images.forEach((function(t){i.product.detail.imgList.push({url:t})})),i.dbProductTags=a.result.data.tags||"";case 10:case"end":return e.stop()}}),e)})))()},submit:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,a,n,o,s,c,u,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,a=i.product.detail.content+i.product.title,t.next=4,wx.cloud.callFunction({name:"sys",data:{$url:"msgSecCheck",value:a}});case 4:if(n=t.sent,0==n.result.code){t.next=8;break}return uni.showToast({icon:"none",title:"内容含有违规内容，请修改后提交"}),t.abrupt("return");case 8:if(i.product.title&&i.product.price&&0!=i.product.carouse.length){t.next=11;break}return uni.showToast({icon:"none",title:"标题，图片和价格都填写才能发布!"}),t.abrupt("return");case 11:return t.next=13,wx.cloud.callFunction({name:"sys",data:{$url:"getCardDetailById",id:i.user.userInfo.bizCardId}});case 13:if(o=t.sent,s=o.result.data,i.product.name=s.name,i.product.avatar=s.avatar,!(e.productId.length>0)){t.next=24;break}return i.dbProductTags.length>0&&i.dbProductTags!=i.product.tags&&(i.needUpdateTags=!0),t.next=21,wx.cloud.callFunction({name:"cmn",data:{$url:"updateProduct",product:i.product}});case 21:t.sent,t.next=32;break;case 24:return i.product.on_sale=!1,i.product.card_id=i.user.userInfo.bizCardId,t.next=28,wx.cloud.callFunction({name:"cmn",data:{$url:"addProduct",product:i.product}});case 28:return c=t.sent,i.product._id=c.result._id,t.next=32,wx.cloud.callFunction({name:"cmn",data:{$url:"genProductQrcode",id:i.product._id,page:"pagesCmn/product/ShareProductDetail",width:430}});case 32:if(u=s.tags||{card:"",products:"",activity:"",trends:""},r=u.products||"",!i.product.tags){t.next=41;break}if(!(i.product.tags.length>0&&r.indexOf(i.product.tags)<0)){t.next=41;break}return u.products.length>0&&(u.products+=","),u.products+=i.product.tags,s.tags=u,t.next=41,wx.cloud.callFunction({name:"sys",data:{$url:"updateCard",card:s}});case 41:uni.showToast({icon:"success",title:"发布成功"}),setTimeout((function(){uni.navigateTo({url:"/pagesMgt/BizProductList"})}),1e3);case 43:case"end":return t.stop()}}),t)})))()},uploadCover:function(t){this.product.cover=t,this.$forceUpdate()},removeCover:function(){this.product.cover="",this.$forceUpdate()},moveEndListHandle:function(t){var e=this;e.product.imgList=t,e.product.carouse=[],e.product.imgList.forEach((function(t){e.product.carouse.push(t.url)})),e.$forceUpdate()},uploadImages:function(t){this.product.carouse.push(t),this.product.imgList.push({url:t}),this.$forceUpdate()},removeImages:function(t){this.product.carouse.splice(t,1),this.product.imgList.splice(t,1),this.$forceUpdate()},moveEndListDetailHandle:function(e){t("log","moveEndListDetailHandle",e," at pagesMgt/BizProductInput.vue:303");var i=this;i.product.detail.imgList=e,i.product.detail.images=[],i.product.detail.imgList.forEach((function(t){i.product.detail.images.push(t.url)})),i.$forceUpdate()},uploadDetailImages:function(t){this.product.detail.images.push(t),this.product.detail.imgList.push({url:t}),this.$forceUpdate()},removeDetailImages:function(t){this.product.detail.images.splice(t,1),this.product.detail.imgList.splice(t,1),this.$forceUpdate()},uploadDetailVideos:function(t){this.product.detail.videos||(this.product.detail.videos=[]),this.product.detail.videos.push(t),this.$forceUpdate()},removeDetailVideos:function(t){this.product.detail.videos.splice(t,1),this.$forceUpdate()},navback:function(t){uni.navigateBack()}}};e.default=l}).call(this,i("0de9")["log"])},"9af9":function(t,e,i){"use strict";i.r(e);var a=i("7df5"),n=i("c418");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("178a");var s,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"36839de3",null,!1,a["a"],s);e["default"]=u.exports},b119:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}},[i("v-uni-movable-area",{ref:"areaBox",staticClass:"movarea",attrs:{id:"areaBox"}},[i("v-uni-view",{staticClass:"imgBox"},[t._l(t.scopeImgList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"imgItem margin-right-sm margin-bottom-sm",style:{width:t.imgSize+"px",height:t.imgSize+"px"}},[i("v-uni-image",{ref:"img"+a,refInFor:!0,class:t.hoverImgIdx==="img"+a?"select":"",attrs:{id:"img"+a,src:e.url,mode:"aspectFill"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.tstr(a,e)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.tsmo.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.toend.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"closeBtn",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile(a)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.scopeImgList.length<t.maxNum?i("v-uni-view",{staticClass:"imgItem solids",style:{width:t.imgSize+"px",height:t.imgSize+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"abs center",style:{width:t.imgSize/2+"px",height:t.imgSize/2+"px"},attrs:{src:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/addPhoto.png",mode:"aspectFill"}})],1):t._e()],2),t.moveSrc?i("v-uni-movable-view",{staticClass:"moveV",style:{width:t.imgSize+"px",height:t.imgSize+"px"},attrs:{animation:!1,x:t.x,y:t.y,direction:"all"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:t.moveSrc,mode:"aspectFill"}})],1):t._e()],1)],1)},o=[]},c3ed:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("99af"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),o=i("e3fb"),s={name:"UpsUpload",props:{fileType:{type:String,required:!0},uploadFile:{type:String,required:!0}},data:function(){return{}},methods:{chooseFile:function(){var e=this;"image"===this.fileType?uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){var a,s=(0,n.default)(i.tempFilePaths);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=c.split("."),r=u[u.length-1];wx.cloud.uploadFile({cloudPath:(0,o.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".")+r,filePath:c}).then((function(i){uni.hideLoading(),i.fileID&&(e.$emit("upload",i.fileID),wx.cloud.callFunction({name:"sys",data:{$url:"cloudImgSecCheck",fileID:i.fileID}}).then((function(e){t("log",e.result," at components/ups-upload/index.vue:70"),0==e.result.code||uni.showToast({icon:"none",title:"图片含有违规内容，请重新选择!"})})))}))}}catch(l){s.e(l)}finally{s.f()}},fail:function(e){t("log",e," at components/ups-upload/index.vue:86")}}):"video"===this.fileType&&uni.chooseVideo({count:1,maxDuration:15,sourceType:["camera","album"],compressed:!1,success:function(i){t("log",i," at components/ups-upload/index.vue:96"),uni.showLoading({title:"加载中"});wx.cloud.uploadFile({cloudPath:(0,o.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".png"),filePath:i.tempFilePath}).then((function(t){uni.hideLoading(),t.statusCode<300&&e.$emit("upload",t.fileID)}))},fail:function(e){t("log",e," at components/ups-upload/index.vue:109")}})},viewFile:function(t){wx.previewImage({urls:this.uploadFile,current:t.currentTarget.dataset.url})},deleteFile:function(t){var e=this;uni.showModal({title:"删除",content:"确定要删除?",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&e.$emit("remove")}})}}};e.default=s}).call(this,i("0de9")["log"])},c418:function(t,e,i){"use strict";i.r(e);var a=i("f80c"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},c4ab:function(t,e,i){"use strict";i.r(e);var a=i("90f8"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},c5e8:function(t,e,i){"use strict";var a=i("67a3"),n=i.n(a);n.a},d183:function(t,e,i){var a=i("f3d9");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("69669d2c",a,!0,{sourceMap:!1,shadowMode:!1})},e3fb:function(t,e,i){function a(t){return""===t||("null"===t||("undefined"===t||(!t&&0!==t&&""!==t||(!(!Array.prototype.isPrototypeOf(t)||0!==t.length)||!(!Object.prototype.isPrototypeOf(t)||0!==Object.keys(t).length)))))}function n(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function o(){return this.dateFormat(new Date,"yyyyMMdd")}function s(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t);break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function c(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e),o=new Date(n).setHours(0,0,0,0);return a<o&&(i=!0),i}function u(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e);return a<n&&(i=!0),i}function r(t){if(t){var e=Date.parse(t),i=Date.parse(new Date),a=Math.abs(i-e);if(a>6048e5){var n=new Date(e),o=n.getFullYear(),s=n.getMonth()+1,c=n.getDate(),u=(new Date).getFullYear();return u==o?s+"月"+c+"日":o+"年"+s+"月"+c+"日"}if(a<6048e5&&a>864e5){var r=Math.floor(a/864e5);return r+"天前"}if(a<864e5&&a>36e5){r=Math.floor(a/36e5);return r+"小时前"}if(a<36e5&&a>=0)return"刚刚"}}function l(t){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!(!e.test(t)||11!=t.length)}function d(){var t=new Date,e="user/"+t.getFullYear()+(""+(t.getMonth()+101)).substr(1)+"/";return e}function p(t){var e="",i=6e4,a=60*i,n=24*a,o=30*n,s=(new Date).getTime(),c=s-t;if(!(c<0)){var u=c/o,r=c/(7*n),l=c/n,d=c/a,p=c/i;return e=u>=1?parseInt(u)+"月前":r>=1?parseInt(r)+"周前":l>=1?parseInt(l)+"天前":d>=1?parseInt(d)+"小时前":p>=1?parseInt(p)+"分钟前":"刚刚",e}}i("b64b"),i("e25e"),i("ac1f"),i("5319"),t.exports={isEmpty:a,dateFormat:n,today:o,formatTime:s,isDayBefore:c,isTimeBefore:u,formatCreateTime:r,isPhoneAvailable:l,cloudUploadPath:d,getDateDiff:p}},ec18:function(t,e,i){"use strict";i.r(e);var a=i("0c58"),n=i("c4ab");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("c5e8");var s,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"57d2c19f",null,!1,a["a"],s);e["default"]=u.exports},f083:function(t,e,i){var a=i("3c7a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("2403a29d",a,!0,{sourceMap:!1,shadowMode:!1})},f3d9:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".solids[data-v-29cb287b]{border:%?1?% dashed #aaa}.iconfont[data-v-29cb287b]{font-size:%?100?%}",""]),t.exports=e},f80c:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("99af"),i("4160"),i("a9e3"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),o=i("e3fb"),s={name:"Upload",props:{fileType:{type:String,required:!0},fileList:{type:Array,required:!0},maxNum:{type:Number,default:9}},data:function(){return{}},methods:{chooseFile:function(){var e=this,i=this.maxNum-this.fileList.length;i<0&&(i=0),"image"===this.fileType?wx.chooseImage({count:i,sizeType:["compressed"],sourceType:["album","camera"],success:function(i){var a,s=(0,n.default)(i.tempFilePaths);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=c.split("."),r=u[u.length-1];wx.cloud.uploadFile({cloudPath:(0,o.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".")+r,filePath:c}).then((function(i){uni.hideLoading(),i.fileID&&(e.$emit("upload",i.fileID),wx.cloud.callFunction({name:"sys",data:{$url:"cloudImgSecCheck",fileID:i.fileID}}).then((function(e){t("log",e.result," at components/ups-uploads/index.vue:82"),0==e.result.code||uni.showToast({icon:"none",title:"图片含有违规内容，请重新选择!"})})))}))}}catch(l){s.e(l)}finally{s.f()}},fail:function(e){t("log",e," at components/ups-uploads/index.vue:97")}}):"video"===this.fileType&&uni.chooseMedia({count:1,maxDuration:15,sourceType:["camera","album"],compressed:!0,success:function(i){t("log","uRes",i," at components/ups-uploads/index.vue:107"),uni.showLoading({title:"加载中"});var a=(0,o.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1))),n=[a+".jpg",a+".mp4"],s=[i.tempFiles[0].thumbTempFilePath,i.tempFiles[0].tempFilePath];n.forEach((function(i,a){wx.cloud.uploadFile({cloudPath:n[a],filePath:s[a]}).then((function(i){t("log","res",i," at components/ups-uploads/index.vue:118"),1==a&&(uni.hideLoading(),i.statusCode<300&&e.$emit("upload",i.fileID))}))}))},fail:function(e){t("log",e," at components/ups-uploads/index.vue:131")}})},viewFile:function(t){wx.previewImage({urls:this.fileList[t.currentTarget.dataset.index],current:t.currentTarget.dataset.url})},deleteFile:function(t){var e=this;uni.showModal({title:"删除",content:"确定要删除?",cancelText:"取消",confirmText:"确定",success:function(i){i.confirm&&e.$emit("remove",t.currentTarget.dataset.index)}})}}};e.default=s}).call(this,i("0de9")["log"])}}]);