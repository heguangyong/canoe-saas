(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesMgt-WaitSendOrder"],{1135:function(t,e,i){"use strict";i.r(e);var a=i("6a0d"),s=i("f331");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("88e0");var r,o=i("f0c5"),u=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"0b4a9511",null,!1,a["a"],r);e["default"]=u.exports},"2ec3":function(t,e,i){var a=i("3e48");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("6ae6e820",a,!0,{sourceMap:!1,shadowMode:!1})},"3e48":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".page[data-v-0b4a9511]{z-index:0;height:100vh}\n/* 底部分享 */.popup[data-v-0b4a9511]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;height:%?420?%;padding-bottom:62px;position:fixed;left:0;bottom:0;width:100%;z-index:95;border-top-left-radius:3%;border-top-right-radius:3%}.popup-close[data-v-0b4a9511]{position:absolute;top:%?30?%;left:%?30?%;font-size:%?39?%;text-align:center;font-weight:700;z-index:199}.popup-title[data-v-0b4a9511]{margin-top:%?15?%;line-height:%?60?%;font-size:%?28?%;padding:%?5?% 0;text-align:center;font-weight:700}.popup-content[data-v-0b4a9511]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:5px;max-height:%?950?%}\n/* 起到固定的作用 ,从而解决原页面触摸穿透的问题*/.prevent[data-v-0b4a9511]{width:100%;height:100%;\n\t/*自动回到顶部*/\n\t/*position: fixed;*/top:0;left:0;overflow:hidden}\n/* 遮罩样式 */.shade[data-v-0b4a9511]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:90}.ups-height[data-v-0b4a9511]{height:%?350?%;position:fixed;left:0;bottom:0;z-index:99}",""]),t.exports=e},"6a0d":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var a={uniPopup:i("6ac9").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:1==t.isUps?"prevent":""},[i("cu-custom",{attrs:{isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("订单详情")])],2),i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"margin-xs flex align-center text-center"},[i("v-uni-text",{staticClass:"padding-xxl bg-green text-xxl radius",staticStyle:{width:"100%"}},[t._v("待发货")])],1),i("v-uni-view",{staticClass:"cu-bar  margin-top-sm solid-bottom"},[i("v-uni-view",{staticClass:"action"},[t._v("商品信息")])],1),i("v-uni-view",{staticClass:"cu-card article solid-bottom",staticStyle:{width:"100%"}},[t._l(t.order.items,(function(e,a){return[i("v-uni-view",{key:a+"_0",staticClass:"cu-item shadow flex solid-bottom",staticStyle:{margin:"0 10rpx 0 10rpx",padding:"20rpx 0"}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-image",{staticClass:"bg-gray",staticStyle:{width:"30%"},attrs:{src:e.cover,mode:"aspectFill"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goDetail(e.id)}}}),i("v-uni-view",{staticClass:"desc",staticStyle:{width:"70%"}},[i("v-uni-view",{staticClass:"text-content",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goDetail(e.id)}}},[i("v-uni-text",{attrs:{clas:"text-bold"}},[t._v(t._s(e.title))]),i("v-uni-text",{staticClass:"text-cut text-sm"},[t._v(t._s(e.content))])],1),i("v-uni-view",{staticClass:"flex margin-top-sm  \ufeffjustify-between"},[i("v-uni-view",{staticClass:"cu-capsule radius "},[i("v-uni-text",{staticClass:"text-gray"},[t._v(t._s("¥ "+parseFloat(e.price).toFixed(2)+e.unit_name))])],1),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s("x"+e.num))])],1)],1)],1),"waitReturnPay"==e.item_state?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"}),i("v-uni-view",{staticClass:"text-left text-grey",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.waitReturnPay(e.id)}}},[t._v("商家受理中")])],1):t._e(),"disagreeReturnPay"==e.item_state?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"}),i("v-uni-view",{staticClass:"text-left text-grey"},[t._v("商家拒绝退款")])],1):t._e(),"finishReturnPay"==e.item_state?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"}),i("v-uni-view",{staticClass:"text-left text-grey"},[t._v("退款成功")])],1):t._e()],1)]}))],2),i("v-uni-view",{staticClass:"margin-xs solid-bottom"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("商品总价")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s("¥ "+parseFloat(t.order.price_items).toFixed(2)))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("订单运费")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s("¥ "+parseFloat(t.order.price_shipping).toFixed(2)))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"}),i("v-uni-view",{staticClass:"text-left"},[t._v("共"+t._s(t.order.order_total_item_num)+"件，实付款"),i("v-uni-text",{staticClass:"margin-left-sm text-red text-lg text-bold"},[t._v(t._s("¥ "+parseFloat(t.order.need_price).toFixed(2)))])],1)],1)],1),i("v-uni-view",{staticClass:"cu-bar  margin-top-sm solid-bottom"},[i("v-uni-view",{staticClass:"action"},[t._v("买家信息")])],1),i("v-uni-view",{staticClass:"cu-list menu-avatar no-padding"},[i("v-uni-view",{staticClass:"cu-item  card-radius margin-top-xxs margin-left-xs margin-right-xs margin-bottom-xs"},[i("v-uni-view",{staticClass:"cu-avatar round"},[i("v-uni-image",{staticClass:"cu-avatar round",attrs:{src:t.user.userInfo.avatarUrl,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(t.user.userInfo.nickName)),i("v-uni-text",{staticClass:"margin-left-sm text-abc"},[t._v(t._s(1==t.user.userInfo.gender?"先生":"女士"))])],1),i("v-uni-view",{staticClass:"text-gray text-sm text-cut"})],1)],1)],1),i("v-uni-view",{staticClass:"cu-bar  margin-top-sm solid-bottom"},[i("v-uni-view",{staticClass:"action"},[t._v("物流信息")])],1),i("v-uni-view",{staticClass:"cu-list menu-avatar no-padding"},[i("v-uni-view",{staticClass:"cu-item  card-radius margin-top-xxs margin-left-xs margin-right-xs margin-bottom-xs"},[i("v-uni-view",{staticClass:"cu-avatar round"},[i("v-uni-view",{staticClass:"text-sm text-cut"},[t._v(t._s(t.order.recipient.key))])],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(t.order.recipient.name)),i("v-uni-text",{staticClass:"margin-left-sm text-abc"},[t._v(t._s(t.order.recipient.phone))])],1),i("v-uni-view",{staticClass:"text-gray text-sm text-cut"},[t._v(t._s(t.order.recipient.address))])],1)],1)],1),i("v-uni-view",{staticClass:"cu-bar  margin-top-sm solid-bottom"},[i("v-uni-view",{staticClass:"action"},[t._v("退货信息")])],1),i("v-uni-view",{staticClass:"margin-xs solid-bottom"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("退款单号")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.order_num))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("退款原因")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.reason))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("退款时间")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.formatDateTime(t.order.apply_at)))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("退款状态")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.apply_state))])],1)],1),i("v-uni-view",{staticClass:"margin-xs solid-bottom"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("订单编号")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.order_num))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("用户备注")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.recipient.remark))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("下单时间")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.formatDateTime(t.order.create_at)))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("支付方式")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.pay_type))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("支付单号")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.bill_num))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("支付时间")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.formatDateTime(t.order.pay_at)))])],1),t.order.remark?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{"font-size":"26upx"}},[t._v("订单备注")]),i("v-uni-view",{staticClass:"text-left"},[t._v(t._s(t.order.remark))])],1):t._e()],1),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),t.isUps?t._e():i("v-uni-view",{staticClass:"cu-bar bg-white tabbar border  foot"},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.startTalk.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-cu-image"},[i("v-uni-text",{staticClass:"cuIcon-message lg text-bold text-grey"})],1),i("v-uni-view",{staticClass:"text-gray"},[t._v("咨询")])],1),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showRemark.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-cu-image"},[i("v-uni-text",{staticClass:"cuIcon-text lg text-bold text-grey"})],1),i("v-uni-view",{staticClass:"text-gray"},[t._v("备注")])],1),i("v-uni-view",{staticClass:"bg-green submit text-lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendOrder.apply(void 0,arguments)}}},[t._v("立即发货")])],1)],1),t.isUps?i("v-uni-view",{staticClass:"shade"}):t._e(),i("uni-popup",{ref:"showPopupRemark",attrs:{type:"bottom"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"popup bg-white"},[i("v-uni-text",{staticClass:"cuIcon-close popup-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("PopupRemark")}}}),i("v-uni-text",{staticClass:"popup-title"},[t._v("添加备注")]),i("v-uni-view",{staticClass:"popup-content"},[i("v-uni-scroll-view",{staticClass:"ups-height",attrs:{"scroll-y":"true"}},[i("v-uni-view",[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-textarea",{staticClass:"text-box font40 bg-white width100 padding-sm solid",staticStyle:{height:"200rpx"},attrs:{"scroll-y":"true",maxlength:"1200",placeholder:"请输入"},model:{value:t.order.remark,callback:function(e){t.$set(t.order,"remark",e)},expression:"order.remark"}})],1),i("v-uni-view",{staticClass:"cu-bar solid-bottom margin-top-xxs radius"}),i("v-uni-view",{staticClass:"cu-bar btn-group  foot bg-white"},[i("v-uni-button",{staticClass:"cu-btn   round line-grey",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveRemark.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],1)],1)],1)],1)},n=[]},"88e0":function(t,e,i){"use strict";var a=i("2ec3"),s=i.n(a);s.a},e3fb:function(t,e,i){function a(t){return""===t||("null"===t||("undefined"===t||(!t&&0!==t&&""!==t||(!(!Array.prototype.isPrototypeOf(t)||0!==t.length)||!(!Object.prototype.isPrototypeOf(t)||0!==Object.keys(t).length)))))}function s(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function n(){return this.dateFormat(new Date,"yyyyMMdd")}function r(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t);break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function o(t,e){var i=!1,a=Date.parse(t),s=Date.parse(e),n=new Date(s).setHours(0,0,0,0);return a<n&&(i=!0),i}function u(t,e){var i=!1,a=Date.parse(t),s=Date.parse(e);return a<s&&(i=!0),i}function c(t){if(t){var e=Date.parse(t),i=Date.parse(new Date),a=Math.abs(i-e);if(a>6048e5){var s=new Date(e),n=s.getFullYear(),r=s.getMonth()+1,o=s.getDate(),u=(new Date).getFullYear();return u==n?r+"月"+o+"日":n+"年"+r+"月"+o+"日"}if(a<6048e5&&a>864e5){var c=Math.floor(a/864e5);return c+"天前"}if(a<864e5&&a>36e5){c=Math.floor(a/36e5);return c+"小时前"}if(a<36e5&&a>=0)return"刚刚"}}function l(t){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!(!e.test(t)||11!=t.length)}function v(){var t=new Date,e="user/"+t.getFullYear()+(""+(t.getMonth()+101)).substr(1)+"/";return e}function d(t){var e="",i=6e4,a=60*i,s=24*a,n=30*s,r=(new Date).getTime(),o=r-t;if(!(o<0)){var u=o/n,c=o/(7*s),l=o/s,v=o/a,d=o/i;return e=u>=1?parseInt(u)+"月前":c>=1?parseInt(c)+"周前":l>=1?parseInt(l)+"天前":v>=1?parseInt(v)+"小时前":d>=1?parseInt(d)+"分钟前":"刚刚",e}}i("b64b"),i("e25e"),i("ac1f"),i("5319"),t.exports={isEmpty:a,dateFormat:s,today:n,formatTime:r,isDayBefore:o,isTimeBefore:u,formatCreateTime:c,isPhoneAvailable:l,cloudUploadPath:v,getDateDiff:d}},f331:function(t,e,i){"use strict";i.r(e);var a=i("f954"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},f954:function(t,e,i){"use strict";(function(t){var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var s=a(i("1da1")),n=a(i("5530")),r=i("2f62"),o=a(i("e3fb")),u=a(i("6ac9")),c={components:{"uni-popup":u.default},data:function(){return{isUps:!1,bizCard:{},order:{_id:"",recipient:{key:"",name:"",phone:"",address:"",remark:""},items:[],order_price:0,need_price:0,price_items:0,price_shipping:0,order_total_item_num:0,order_num:"",create_at:null,remark:""},isRecipientRemark:!1}},onLoad:function(e){e.id&&(this.order._id=e.id,t("log","orderId",this.order._id," at pagesMgt/WaitSendOrder.vue:234"))},onShow:function(){this.getDetail()},computed:(0,n.default)((0,n.default)({},(0,r.mapState)(["user"])),{},{formatDateTime:function(){return function(t){var e=t;return e?o.default.formatTime(e,"yyyy-MM-dd HH:mm"):""}}}),methods:(0,n.default)((0,n.default)({},(0,r.mapMutations)(["updateUser"])),{},{getDetail:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,1==i.page&&(i.orderList=[]),a=null,e.next=5,wx.cloud.callFunction({name:"cmn",data:{$url:"getOrderById",id:i.order._id}});case 5:a=e.sent,i.order=a.result.data,i.isRecipientRemark=!o.default.isEmpty(i.order.recipient.remark);case 8:case"end":return e.stop()}}),e)})))()},goDetail:function(t){uni.navigateTo({url:"/pagesCmn/product/ProductDetailExt?id="+t})},startTalk:function(){uni.navigateTo({url:"/pagesSys/site/service"})},showRemark:function(){var t=this;t.$nextTick((function(){t.isUps=!0,t.$refs["showPopupRemark"].open()}))},cancel:function(t){this.$refs["show"+t].close()},change:function(t){t.show?this.isUps=!0:this.isUps=!1},saveRemark:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e,t("log","remark",a.order.remark," at pagesMgt/WaitSendOrder.vue:308"),a.$forceUpdate(),i.next=5,wx.cloud.callFunction({name:"cmn",data:{$url:"updateOrder",order:a.order}});case 5:a.$refs["showPopupRemark"].close();case 6:case"end":return i.stop()}}),i)})))()},sendOrder:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t,uni.redirectTo({url:"/pagesMgt/SendOrder?id="+i.order._id});case 2:case"end":return e.stop()}}),e)})))()}})};e.default=c}).call(this,i("0de9")["log"])}}]);