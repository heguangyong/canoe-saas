(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesCmn-trend-ShareTrendDetail"],{"0dc8":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniPopup:i("6ac9").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page",class:1==t.isUps?"prevent":"",style:{height:t.windowHeight}},[i("cu-custom",{attrs:{isBack:!0,bgColor:"bg-dark"}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.playList[t.index].title))])],2),t.isUps?t._e():t._t("default",[i("v-uni-swiper",{staticClass:"swiper",attrs:{vertical:!0,current:t.index},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCurrent.apply(void 0,arguments)},animationfinish:function(e){arguments[0]=e=t.$handleEvent(e),t.animationFinish.apply(void 0,arguments)}}},t._l(t.playList,(function(e,n){return i("v-uni-swiper-item",{key:n,staticClass:"swiper-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.videoPlayPause.apply(void 0,arguments)}}},[Math.abs(t.index-n)<=1?i("div",{staticClass:"video-box"},[[t.existVideo(e.src)?t._t("default",[Math.abs(t.index-n)<=1?i("ups-play",{staticClass:"video",attrs:{src:e.src,height:t.height,width:t.width,play:e.flag,gDuration:e.duration,initialTime:e.initialTime,objectFit:e.objectFit,danmuList:t.danmuList},on:{pause:function(e){arguments[0]=e=t.$handleEvent(e),t.pauseVideo.apply(void 0,arguments)},playEnd:function(e){arguments[0]=e=t.$handleEvent(e),t.playEnd.apply(void 0,arguments)}}}):t._e()]):t._t("default",[i("v-uni-swiper",{style:"min-height:"+t.windowHeight+"px;",attrs:{"indicator-dots":!0,circular:!0,autoplay:!0,interval:"5000",duration:"500"}},t._l(e.carousels,(function(t,e){return i("v-uni-swiper-item",{key:e},[i("v-uni-image",{attrs:{src:t.tempFileURL,mode:"aspectFit"}})],1)})),1)]),i("v-uni-cover-view",{staticClass:"cover-view-left padding-left-sm"},[i("v-uni-cover-view",{staticClass:"left-view"},[i("v-uni-cover-view",{staticClass:"left-text"},[t._v("@"+t._s(e.at||""))])],1),i("v-uni-cover-view",{staticClass:"left-view"},[i("v-uni-cover-view",{staticClass:"left-text line-limit-length"},[t._v(t._s(e.content))])],1)],1),i("v-uni-cover-view",{staticClass:"cover-view-right"},[i("v-uni-cover-image",{staticClass:"avatar img",attrs:{src:e.avatar},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.tapAvatar.apply(void 0,arguments)}}}),i("v-uni-cover-view",{staticClass:"right-text"}),i("v-uni-cover-image",{staticClass:"img",attrs:{src:e.check?"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/heartRed.png":"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/heart.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.tapLove.apply(void 0,arguments)}}}),i("v-uni-cover-view",{staticClass:"right-text"},[t._v(t._s(e.like))]),i("v-uni-cover-image",{staticClass:"img",attrs:{src:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/msg.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.tapMsg()}}}),i("v-uni-cover-view",{staticClass:"right-text"},[t._v(t._s(e.comments_num))]),i("v-uni-button",{staticStyle:{background:"transparent"},attrs:{"data-videoObj":e,"open-type":"share"}},[i("v-uni-cover-image",{staticClass:"img",attrs:{src:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/share-fill.png"}})],1),i("v-uni-cover-view",{staticClass:"right-text"},[t._v("分享")]),e.productList.length>0?t._t("default",[i("v-uni-button",{staticStyle:{background:"transparent"},attrs:{"data-videoObj":e},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.tapBuy.apply(void 0,arguments)}}},[i("v-uni-cover-image",{staticClass:"img",attrs:{src:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/product.png"}})],1),i("v-uni-cover-view",{staticClass:"right-text"},[t._v("产品")])]):t._e(),e.activityList.length>0?t._t("default",[i("v-uni-button",{staticStyle:{background:"transparent"},attrs:{"data-videoObj":e},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.tapJoin.apply(void 0,arguments)}}},[i("v-uni-cover-image",{staticClass:"img",attrs:{src:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/activity.png"}})],1),i("v-uni-cover-view",{staticClass:"right-text"},[t._v("活动")])]):t._e(),i("v-uni-cover-image",{staticClass:"img",attrs:{src:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/qrcode.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.goQrcode()}}})],2)]],2):t._e()])})),1)]),t.isUps?i("v-uni-view",{staticClass:"shade"}):t._e(),i("uni-popup",{ref:"showActivityList",attrs:{type:"bottom"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"trend-popup bg-white"},[i("v-uni-text",{staticClass:"cuIcon-close trend-popup-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("ActivityList")}}}),i("v-uni-text",{staticClass:"trend-popup-title"},[t._v("活动一览")]),i("v-uni-view",{staticClass:"trend-popup-content"},[i("v-uni-scroll-view",{staticClass:"ups-height",attrs:{"scroll-y":"true"}},[i("v-uni-view",{staticClass:"cu-list \ufeffmenu-avatar"},t._l(t.playList[t.index].activityList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"cu-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goActivityDetail(e)}}},[i("v-uni-view",{staticClass:"cu-avatar lg radius"},[i("v-uni-image",{attrs:{src:e.cover,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"text-gray text-sm flex"},[i("v-uni-view",{staticClass:"text-cut"},[t._v(t._s(e.sign_up))])],1)],1)],1)})),1)],1)],1)],1)],1),i("uni-popup",{ref:"showProductList",attrs:{type:"bottom"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"trend-popup bg-white"},[i("v-uni-text",{staticClass:"cuIcon-close trend-popup-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("ProductList")}}}),i("v-uni-text",{staticClass:"trend-popup-title"},[t._v("产品一览")]),i("v-uni-view",{staticClass:"trend-popup-content"},[i("v-uni-scroll-view",{staticClass:"ups-height",attrs:{"scroll-y":"true"}},[i("v-uni-view",{staticClass:"cu-list \ufeffmenu-avatar "},t._l(t.playList[t.index].productList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"cu-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goProductDetail(e)}}},[i("v-uni-view",{staticClass:"cu-avatar lg radius"},[i("v-uni-image",{attrs:{src:e.carouse[0],mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"text-gray text-sm flex"},[i("v-uni-view",{staticClass:"text-cut"},[t._v("¥"+t._s(e.price))])],1)],1)],1)})),1)],1)],1)],1)],1),i("uni-popup",{ref:"showComments",attrs:{type:"bottom"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"trend-popup bg-white",style:{height:t.height}},[i("v-uni-text",{staticClass:"cuIcon-close trend-popup-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("Comments")}}}),t.playList[t.index].comments_num>0?i("v-uni-text",{staticClass:"trend-popup-title"},[t._v(t._s(t.playList[t.index].comments_num)+"条评论")]):i("v-uni-text",{staticClass:"trend-popup-title"},[t._v("评论")]),i("v-uni-view",{staticClass:"trend-popup-content"},[i("v-uni-scroll-view",{staticClass:"ups-height-padding bg-white",style:{height:t.commentHeight},attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMoreComments.apply(void 0,arguments)}}},t._l(t.commentList,(function(e,n){return i("v-uni-view",{key:n},[i("ups-comment",{attrs:{comment:e,idx:n},on:{operateCard:function(e){arguments[0]=e=t.$handleEvent(e),t.operateComment.apply(void 0,arguments)}}}),e.replys_num>0?i("v-uni-view",[i("v-uni-view",{staticClass:"cu-reply",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.commentExpend(e)}}},[e.isSpread?t._e():i("v-uni-text",[t._v("展开"+t._s(e.replys_num)+"条回复")])],1),e.isSpread?i("v-uni-view",{staticClass:"cu-reply"},t._l(e.replys,(function(e,a){return i("v-uni-view",{key:a},[i("ups-comment",{attrs:{comment:e,idx:a,pidx:n,isReply:!0,isSubReply:t.isSubReply},on:{operateCard:function(e){arguments[0]=e=t.$handleEvent(e),t.operateReply.apply(void 0,arguments)}}})],1)})),1):t._e()],1):t._e(),i("v-uni-view",{staticClass:"card-popup-line"})],1)})),1),i("v-uni-view",{staticClass:"cu-bar foot input"},[i("v-uni-input",{staticClass:"solid-bottom",attrs:{"adjust-position":!0,focus:t.isFocus,maxlength:"140","cursor-spacing":"10",placeholder:t.tips},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.contentInput.apply(void 0,arguments)}},model:{value:t.inputContent,callback:function(e){t.inputContent=e},expression:"inputContent"}}),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-gray"},[t._v(t._s(t.textCont)+"/140")])],1),i("v-uni-button",{staticClass:"cu-btn  \ufeffshadow-blur radius bg-grey",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendComment.apply(void 0,arguments)}}},[t._v("发送")])],1)],1)],1)],1),i("uni-popup",{ref:"showRemove",attrs:{type:"bottom"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.removeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"trend-popup bg-white"},[i("v-uni-view",{staticClass:"trend-popup-content"},[i("v-uni-text",{staticClass:"remove-popup-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removeComment(t.currentComment)}}},[t._v("删除")])],1),i("v-uni-text",{staticClass:"trend-popup-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("Remove")}}},[t._v("取消")])],1)],1)],2)},o=[]},"154f":function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("cb29"),i("4de4"),i("4160"),i("13d5"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),i("159b"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2909")),o=n(i("5530")),r=n(i("b85c"));i("96cf");var s=n(i("1da1")),c=i("2f62"),l=n(i("c3e0")),d=n(i("ae19")),u=n(i("1b4d")),p=n(i("2f65")),f=n(i("6ac9")),h={components:{"ups-play":l.default,"ups-comment":d.default,"ups-product":u.default,"ups-activity":p.default,uniPopup:f.default},data:function(){return{isUps:!1,page:1,trend:{_id:"",qrcode:""},tips:"写评论...",repliedName:"",isSubReply:!1,isFocus:!1,currentComment:null,commentList:[],commentListPage:1,replyInfo:{isReply:!1,pidx:0,comment_id:""},lastComment:{},lastReply:{},inputContent:"",textCont:0,sysHeight:0,playCount:2,playList:[],height:"",commentHeight:"",index:0,width:"",oldIndex:0,windowHeight:-1,authBizInfo:{}}},onLoad:function(t){var e=this;if(t.id)e.trend._id=t.id,e.getTrendById();else if(t.scene){e.paramsStr+="scene="+t.scene;var i={},n=decodeURIComponent(t.scene).split("&");n.forEach((function(t){var n=t.split("=");i[n[0]]=n[1],"qrcode"==n[0]&&(e.trend.qrcode=n[1])})),e.getTrendIdByQrcode()}var a=e.getSystem();e.windowHeight=.77*a.h},created:function(){this.sysHeight=uni.getSystemInfoSync().windowHeight,this.height="".concat(.77*this.sysHeight,"px"),this.commentHeight="".concat(.77*this.sysHeight-60,"px");var t=uni.getSystemInfoSync().windowWidth;this.width="".concat(t,"px"),this.playList.length=0,this.playList.fill({src:""})},mounted:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="http://img.kaiyanapp.com/255365dbfc2622930eb0cdb33e43abf0.jpeg?imageMogr2/quality/60/format/jpg",e.next=3,t.pushPlayList();case 3:t.index=t.playList.reduce((function(t,e){return""==i||i==e.id?i="":t++,t}),0),t.index||t.$nextTick((function(){t.videoPlay(t.index)}));case 5:case"end":return e.stop()}}),e)})))()},onHide:function(){var t,e=(0,r.default)(this.playList);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.flag=!1}}catch(n){e.e(n)}finally{e.f()}},onShareAppMessage:function(e){if(t("log","res",e," at pagesCmn/trend/ShareTrendDetail.vue:322"),"button"===e.from){var i=e.target.dataset.videoobj;return{title:i.content,imageUrl:i.cover,path:"/pagesCmn/trend/ShareTrendDetail?id="+i.id,success:function(t){uni.showToast({icon:"success",title:"分享成功"})}}}},computed:(0,o.default)((0,o.default)({},(0,c.mapState)(["needAuthFlag","user","cardAccount","cloudPath"])),{},{existVideo:function(){return function(t){var e=t||"";return e.length>0}}}),methods:(0,o.default)((0,o.default)({},(0,c.mapMutations)(["needWxAuth","wxAuth","updateUser","updateUserAuth"])),{},{getSystem:function(){var t=wx.getSystemInfoSync();return this.scale=667/375,this.systemScale=t.windowWidth/375,{w:t.windowWidth,h:t.windowHeight}},animationFinish:function(t){this.isUps},changeCurrent:function(t){var e=this;return(0,s.default)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.isUps=!0,e.index=t.detail.current,e.$nextTick((function(){var t,i=(0,r.default)(e.playList);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.flag=!1}}catch(a){i.e(a)}finally{i.f()}e.playList[e.index].flag=!0})),e.isUps=!1;case 4:case"end":return i.stop()}}),i)})))()},getTrendById:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,n={},e.next=4,wx.cloud.callFunction({name:"cmn",data:{$url:"getTrendDetail",id:i.trend._id}});case 4:n=e.sent,i.trend=n.result.data,i.authBizInfo={_id:i.trend.card_id,name:i.trend.name,avatar:i.trend.avatar},i.needWxAuth(i.authBizInfo);case 8:case"end":return e.stop()}}),e)})))()},getTrendIdByQrcode:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,n={},e.next=4,wx.cloud.callFunction({name:"cmn",data:{$url:"getTrendDetailByQrcode",qrcode:i.trend.qrcode}});case 4:n=e.sent,i.trend=n.result.data,i.authBizInfo={_id:i.trend.card_id,name:i.trend.name,avatar:i.trend.avatar},i.needWxAuth(i.authBizInfo);case 8:case"end":return e.stop()}}),e)})))()},pushPlayList:function(){var e=this,i=new Promise((function(i,n){wx.cloud.callFunction({name:"cmn",data:{$url:"getDyTrendList",cardId:e.trend.card_id,trendId:e.trend._id,page:e.page}}).then((function(i){t("log","getDyTrendList res",i," at pagesCmn/trend/ShareTrendDetail.vue:423");var n=i.result;if(0==n.code){1==e.page&&(e.trendList=[]);var a=[];n.data.forEach((function(t){a.push({src:t.video_temp_url||"",title:t.title,content:t.content,flag:!1,check:t.isLike||!1,like:t.likes_num||0,comments_num:t.comments_num||0,at:t.name,id:t._id,cardId:t.card_id,avatar:t.avatar,initialTime:0,duration:300,cover:t.cover,activityList:t.activityList,productList:t.productList,carousels:t.img_urls||[]})}));for(var o=e.playList.filter((function(t){return t.src})).length,r=o;r<o+a.length;r++)e.$set(e.playList,r,a[r-o]);if(""==e.trend._id&&(e.trend._id=e.playList[e.index].id),0==e.index){for(var s in e.playList)if(e.playList[s].id==e.trend._id){e.index=s;break}e.$nextTick((function(){e.videoPlay(e.index)}))}}}))}));return i},tapLove:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.needAuthFlag){e.next=4;break}return t.wxAuth(t.authBizInfo),setTimeout((function(){t.tapLove()}),2e3),e.abrupt("return");case 4:if(t.updateUserAuth(t.authBizInfo),t.playList[t.index].check=!t.playList[t.index].check,t.playList=(0,a.default)(t.playList),!t.playList[t.index].check){e.next=14;break}return t.playList[t.index].like+=1,i={corp_user_id:t.user._id},e.next=12,wx.cloud.callFunction({name:"cmn",data:{$url:"addTrendLike",id:t.playList[t.index].id,like:i}});case 12:e.next=18;break;case 14:return t.playList[t.index].like-=1,n={corp_user_id:t.user._id},e.next=18,wx.cloud.callFunction({name:"cmn",data:{$url:"removeTrendLike",id:t.playList[t.index].id,like:n}});case 18:t.$forceUpdate();case 19:case"end":return e.stop()}}),e)})))()},playEnd:function(t){this.$forceUpdate()},tapAvatar:function(){var t=this;if(this.needAuthFlag)return this.wxAuth(this.authBizInfo),void setTimeout((function(){t.tapAvatar()}),2e3);this.updateUserAuth(this.authBizInfo),setTimeout((function(){uni.navigateTo({url:"/pagesSys/site/about"})}),1e3)},tapMsg:function(){var t=this;if(this.needAuthFlag)return this.wxAuth(this.authBizInfo),void setTimeout((function(){t.tapMsg()}),2e3);this.updateUserAuth(this.authBizInfo),this.commentListPage=1,this.getCommentList(),this.$nextTick((function(){t.isUps=!0,t.$refs["showComments"].open()}))},tapShare:function(){},tapBuy:function(){var t=this;if(this.needAuthFlag)return this.wxAuth(this.authBizInfo),void setTimeout((function(){t.tapBuy()}),2e3);this.updateUserAuth(this.authBizInfo),this.$nextTick((function(){t.isUps=!0,t.$refs["showProductList"].open()}))},tapJoin:function(){var t=this;if(this.needAuthFlag)return this.wxAuth(this.authBizInfo),void setTimeout((function(){t.tapJoin()}),2e3);this.updateUserAuth(this.authBizInfo),this.$nextTick((function(){t.isUps=!0,t.$refs["showActivityList"].open()}))},videoPlay:function(t){var e=this,i=new Promise((function(t,e){t()}));i.then((function(i){e.playList[t]&&e.$set(e.playList[t],"flag",!e.playList[t].flag)}))},pauseVideo:function(t){"undefined"!=typeof this.playList[this.oldIndex].initialTime&&(this.playList[this.oldIndex].initialTime=t)},clickVideo:function(){this.playList[this.index].flag=!this.playList[this.index].flag},cancel:function(t){this.$refs["show"+t].close()},change:function(t){t.show?this.isUps=!0:this.isUps=!1},removeChange:function(t){t.show},getCommentList:function(e){var i=this;return(0,s.default)(regeneratorRuntime.mark((function n(){var a,o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=i,t("log","getCommentList",a.playList[a.index].id," at pagesCmn/trend/ShareTrendDetail.vue:628"),n.next=4,wx.cloud.callFunction({name:"cmn",data:{$url:"getCommentList",trendId:a.playList[a.index].id,userId:a.user._id,page:a.commentListPage}});case 4:o=n.sent,r=o.result,0==r.code&&(1==a.commentListPage&&(a.commentList=[]),r.data.length>0?r.data.forEach((function(t){a.commentList.push(t)})):a.commentListPage--),"refresh"==e&&uni.stopPullDownRefresh(),a.$forceUpdate();case 9:case"end":return n.stop()}}),n)})))()},sendComment:function(t){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e,!i.inputContent){t.next=10;break}return t.next=4,wx.cloud.callFunction({name:"sys",data:{$url:"msgSecCheck",value:i.inputContent}});case 4:if(n=t.sent,0==n.result.code){t.next=9;break}return uni.showToast({icon:"none",title:"内容含有违规内容，请修改后提交"}),i.inputContent="",t.abrupt("return");case 9:i.doSendComment();case 10:i.tips="写评论...",i.$forceUpdate();case 12:case"end":return t.stop()}}),t)})))()},doSendComment:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i,n,a,o,r,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t,!i.replyInfo.isReply){e.next=25;break}return i.lastReply.user_id||(i.lastReply.trend_id=i.trend._id,i.lastReply.user_id=i.user._id,i.lastReply.name=i.user.userInfo.nickName,i.lastReply.avatar=i.user.userInfo.avatarUrl),i.lastReply.create_at=new Date,i.lastReply.content=i.inputContent,i.lastReply.replied_name=i.repliedName,i.lastReply.is_sub_reply=i.isSubReply,i.lastReply.uid=i.genPopupReplyUid(10),e.next=10,wx.cloud.callFunction({name:"cmn",data:{$url:"addCommentReply",id:i.replyInfo.comment_id,trendId:i.trend._id,reply:i.lastReply}});case 10:if(n=e.sent,a=n.result,0!=a.code){e.next=23;break}return i.commentList[i.replyInfo.pidx].replys_num||(i.commentList[i.replyInfo.pidx].replys_num=0,i.commentList[i.replyInfo.pidx].replys=[]),i.commentList[i.replyInfo.pidx].replys_num+=1,o={},Object.assign(o,i.lastReply),i.commentList[i.replyInfo.pidx].replys.push(o),i.inputContent="",i.replyInfo.isReply=!1,delete i.lastReply.uid,e.next=23,wx.cloud.callFunction({name:"cmn",data:{$url:"commentOpt",type:"inc",trendId:i.trend._id}});case 23:e.next=40;break;case 25:return i.lastComment.user_id||(i.lastComment.trend_id=i.trend._id,i.lastComment.user_id=i.user._id,i.lastComment.name=i.user.userInfo.nickName,i.lastComment.avatar=i.user.userInfo.avatarUrl),i.lastComment.create_at=new Date,i.lastComment.content=i.inputContent,i.lastComment.replys=[],e.next=31,wx.cloud.callFunction({name:"cmn",data:{$url:"addComment",comment:i.lastComment}});case 31:return r=e.sent,i.lastComment._id=r._id,s={},Object.assign(s,i.lastComment),i.commentList.push(s),i.inputContent="",delete i.lastComment._id,e.next=40,wx.cloud.callFunction({name:"cmn",data:{$url:"commentOpt",type:"inc",trendId:i.trend._id}});case 40:i.playList[i.index].comments_num++,e.t0=regeneratorRuntime.keys(i.trendList);case 42:if((e.t1=e.t0()).done){e.next=49;break}if(c=e.t1.value,i.trendList[c]._id!=i.trend._id){e.next=47;break}return i.trendList[c].comments_num=i.playList[i.index].comments_num,e.abrupt("break",49);case 47:e.next=42;break;case 49:i.tips="写评论...",i.$forceUpdate();case 51:case"end":return e.stop()}}),e)})))()},contentInput:function(t){if(this.textCont=t.detail.value.length,this.replyInfo.isReply){var e=t.detail.value;0==e.length&&(this.replyInfo.isReply=!1)}},operateComment:function(t,e,i,n){var a=this;return(0,s.default)(regeneratorRuntime.mark((function n(){var o,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=a,"addLike"!=t){n.next=11;break}return a.commentList[i].isLike=!0,a.commentList[i].likes_num||(a.commentList[i].likes_num=0),a.commentList[i].likes_num+=1,r={corp_user_id:a.user._id,name:a.user.name,avatar:a.user.avatar,create_at:new Date},n.next=8,wx.cloud.callFunction({name:"cmn",data:{$url:"addTrendLike",id:e._id,like:r}});case 8:o.$forceUpdate(),n.next=27;break;case 11:if("removeComment"!=t){n.next=17;break}a.currentComment=e,a.$nextTick((function(){a.$refs["showRemove"].open()})),o.$forceUpdate(),n.next=27;break;case 17:if("removeLike"!=t){n.next=26;break}return a.commentList[i].isLike=!1,a.commentList[i].likes_num-=1,s={corp_user_id:a.user._id},n.next=23,wx.cloud.callFunction({name:"cmn",data:{$url:"removeTrendLike",id:e._id,like:s}});case 23:o.$forceUpdate(),n.next=27;break;case 26:"addReply"==t&&(a.isFocus=!0,a.replyInfo.isReply=!0,a.replyInfo.pidx=i,a.replyInfo.comment_id=a.commentList[i]._id,a.tips="回复 "+e.name,a.repliedName=e.name,a.isSubReply=!1,a.inputContent="",a.$forceUpdate());case 27:case"end":return n.stop()}}),n)})))()},operateReply:function(t,e,i,n){var a=this;return(0,s.default)(regeneratorRuntime.mark((function o(){var r,s,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(r=a,"addLike"!=t){o.next=10;break}return a.commentList[n].replys[i].isLike=!0,a.commentList[n].replys[i].likes_num||(a.commentList[n].replys[i].likes_num=0),a.commentList[n].replys[i].likes_num+=1,s={corp_user_id:a.user._id,name:a.user.name,avatar:a.user.avatar,create_at:new Date},o.next=8,wx.cloud.callFunction({name:"cmn",data:{$url:"addCommentReplyLike",id:r.commentList[n]._id,replyUid:e.uid,like:s}});case 8:o.next=19;break;case 10:if("removeLike"!=t){o.next=18;break}return a.commentList[n].replys[i].isLike=!1,a.commentList[n].replys[i].likes_num-=1,c={user_id:a.user._id},o.next=16,wx.cloud.callFunction({name:"cmn",data:{$url:"\ufeffremoveCommentReplyLike",id:r.commentList[n]._id,replyUid:e.uid,like:c}});case 16:o.next=19;break;case 18:"addReply"==t&&(a.isFocus=!0,a.replyInfo.isReply=!0,a.replyInfo.pidx=n,a.replyInfo.comment_id=a.commentList[n]._id,a.tips="回复 "+e.name,a.repliedName=e.name,a.isSubReply=!0,a.inputContent="");case 19:case"end":return o.stop()}}),o)})))()},commentExpend:function(t){t.isSpread?t.isSpread=!1:t.isSpread=!0,this.$forceUpdate()},genPopupReplyUid:function(t){return Math.random().toString(20).substr(3,t)},loadMoreComments:function(){this.commentListPage+=1,this.getCommentList()},removeComment:function(t){var e=this;return(0,s.default)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,wx.cloud.callFunction({name:"cmn",data:{$url:"\ufeffremoveComment",id:e.currentTrend._id,content:t}});case 2:e.playList[e.index].comment--,e.getCommentList("refresh"),e.$refs["showRemove"].close(),e.$forceUpdate();case 6:case"end":return i.stop()}}),i)})))()},videoPlayPause:function(){this.videoPlay(this.index)},goProductDetail:function(t){uni.navigateTo({url:"/pagesCmn/product/ShareProductDetail?id="+t._id})},goActivityDetail:function(t){uni.navigateTo({url:"/pagesCmn/activity/ShareActivityDetail?id="+t._id})},goQrcode:function(){uni.navigateTo({url:"/pagesCmn/trend/TrendQrcode?id="+this.playList[this.index].id})}}),watch:{index:function(t,e){var i=this.playList.filter((function(t){return t.src})).length;i-this.index-1<=this.playCount&&(this.page++,this.pushPlayList()),this.oldIndex=e}}};e.default=h}).call(this,i("0de9")["log"])},"1de5":function(t,e,i){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"362e":function(t,e,i){"use strict";var n=i("4ea4");i("a9e3"),i("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("3f38"));function o(t){var e;return function(){var i=arguments,n=this;e&&clearTimeout(e),e=setTimeout((function(){t.apply(n,i),e=null}),100)}}var r={components:{slider:a.default},props:{controls:{type:Boolean,default:!1},src:{type:String,default:""},play:{type:Boolean,default:!1},height:{type:String,default:""},width:{type:String,default:""},initialTime:{type:Number,default:0},gDuration:{type:Number,default:999},objectFit:{type:String,default:"contain"},poster:{type:String,default:""},danmuList:{type:Array,default:[]}},data:function(){return{time:0,duration:0,playFirst:!0}},beforeCreate:function(){},mounted:function(){this.videoCtx=uni.createVideoContext("video_".concat(this.src),this)},methods:{changeCurrent:function(t){this.time=t.detail.value,this.videoCtx.seek(this.time)},playEnd:function(){this.$emit("playEnd")},timeupdate:function(t){this.duration=t.detail.duration,this.play||this.videoCtx.pause(),this.time>=t.detail.duration&&(this.time=0),this.time=t.detail.currentTime,this.$emit("timeupdate",this.time)},videoPlay:function(){this.play?(this.videoCtx.play(),this.playFirst&&(this.videoCtx.seek(this.startTime),this.playFirst=!1)):(this.videoCtx.pause(),this.$emit("pause",this.time))},waiting:function(){}},watch:{play:o((function(t,e){this.videoPlay()})),startTime:{immediate:!0,handler:function(t,e){this.time=t}},gDuration:{immediate:!0,handler:function(t,e){this.duration=t}}},computed:{barWidth:function(){var t=this.time/this.duration*parseInt(this.width);return"".concat(t,"px")},startTime:function(){return this.initialTime}}};e.default=r},"3f38":function(t,e,i){"use strict";i.r(e);var n=i("f155"),a=i("b13b");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("f98f");var r,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"800be020",null,!1,n["a"],r);e["default"]=c.exports},"3f5c":function(t,e,i){var n=i("757a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("2ed7482e",n,!0,{sourceMap:!1,shadowMode:!1})},"3f62":function(t,e,i){"use strict";i.r(e);var n=i("8b11"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"48d4":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"video"},[i("v-uni-video",{ref:"`video_${src}`",staticClass:"video",style:{height:t.height},attrs:{src:t.src,controls:t.controls,"show-play-btn":!0,autoplay:!0,loop:!0,"enable-progress-gesture":!1,objectFit:t.objectFit,id:"video_"+t.src},on:{waiting:function(e){arguments[0]=e=t.$handleEvent(e),t.waiting.apply(void 0,arguments)},ended:function(e){arguments[0]=e=t.$handleEvent(e),t.playEnd.apply(void 0,arguments)},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.timeupdate.apply(void 0,arguments)}}}),t.play||t.playFirst?t._e():i("v-uni-view",{staticClass:"icon-view"},[i("v-uni-text",{staticClass:"icon",staticStyle:{color:"#FFF"}},[t._v("")])],1),""!=t.poster&&t.playFirst?i("v-uni-image",{staticClass:"img",style:{height:t.height},attrs:{src:t.poster}}):t._e(),i("v-uni-view",{staticClass:"top"}),i("v-uni-view",{staticClass:"bottom"}),i("v-uni-view",{staticClass:"slider-view"},[i("v-uni-slider",{style:{width:"360px"},attrs:{max:t.duration,value:t.time,screenLeft:120,width:360},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCurrent.apply(void 0,arguments)}}})],1)],1)},o=[]},"5d29":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'.comment[data-v-66b51abb]{padding:%?7?%}.nick-name[data-v-66b51abb]{margin:%?10?% 0 0 %?20?%;width:%?560?%;line-height:%?15?%}.sub-nick-name[data-v-66b51abb]{margin:%?10?% 0 0 %?20?%;width:%?520?%;line-height:%?15?%}.font-sm[data-v-66b51abb]{font-size:%?22?%;line-height:%?15?%;margin-left:%?10?%}.content-view[data-v-66b51abb]{width:%?600?%;margin:%?24?% 0 0 %?6?%}.sub-content-view[data-v-66b51abb]{width:%?500?%;margin:%?24?% 0 0 %?6?%}span[data-v-66b51abb]{color:#6495ed;font-weight:400}.cu-btn[data-v-66b51abb]{padding:0 %?5?%;height:%?28?%}.cu-item[data-v-66b51abb]{height:-webkit-fit-content;height:fit-content}.cu-btn[data-v-66b51abb]:not([class*="bg-"]){\n\t/*background-color: rgba(255,255,255,0);*/}.cu-list.menu-avatar>.cu-item[data-v-66b51abb]:after,.cu-list.menu>.cu-item[data-v-66b51abb]:after{border-bottom:none}.cu-list.menu-avatar>.cu-item[data-v-66b51abb]{min-height:%?120?%;height:0}.text-content[data-v-66b51abb]{margin-left:%?15?%}.column-flex[data-v-66b51abb]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.like-space[data-v-66b51abb]{width:%?15?%}',""]),t.exports=e},6637:function(t,e,i){"use strict";i.r(e);var n=i("362e"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"6ff5":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".flex[data-v-800be020]{display:-webkit-box;display:-webkit-flex;display:flex}.slider[data-v-800be020]{position:relative;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:40px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.slider-left[data-v-800be020]{height:40px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.left[data-v-800be020]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:3px}.slider-right[data-v-800be020]{height:40px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.right[data-v-800be020]{height:3px;background-color:rgba(0,0,0,.3);-webkit-box-flex:1;-webkit-flex:1;flex:1}.block[data-v-800be020]{position:absolute;height:40px;width:40px;border-radius:20px;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;z-index:999999}.block-inner[data-v-800be020]{height:20px;width:20px;border-radius:10px;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block-inner-inner[data-v-800be020]{height:10px;width:10px;border-radius:5px}",""]),t.exports=e},"757a":function(t,e,i){var n=i("24fb"),a=i("1de5"),o=i("9d51");e=n(!1);var r=a(o);e.push([t.i,"\n@font-face{font-family:texticons;src:url("+r+') format("truetype")}\n.video[data-v-26fab98e]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\nwidth:%?750?%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.img[data-v-26fab98e]{position:absolute;width:%?750?%}.icon-view[data-v-26fab98e]{position:absolute}.top[data-v-26fab98e]{position:absolute;top:0;background-image:-webkit-linear-gradient(bottom,transparent,rgba(0,0,0,.7));background-image:linear-gradient(0deg,transparent,rgba(0,0,0,.7));width:%?750?%;height:%?300?%}.icon[data-v-26fab98e]{opacity:.6;font-size:42px;color:#fff;\nfont-family:texticons;\nfont-family:texticons}.bottom[data-v-26fab98e]{position:absolute;bottom:0;background-image:-webkit-linear-gradient(bottom,rgba(0,0,0,.7),transparent);background-image:linear-gradient(0deg,rgba(0,0,0,.7),transparent);width:%?750?%;height:%?300?%}.slider-view[data-v-26fab98e]{position:absolute;left:0;bottom:30px;width:%?750?%}.progressBar[data-v-26fab98e]{border-radius:%?2?%;height:%?4?%;background-color:#fff;z-index:999999;position:absolute;left:0;bottom:30px;\n-webkit-animation:flicker-data-v-26fab98e 4s linear infinite;animation:flicker-data-v-26fab98e 4s linear infinite;-webkit-animation-direction:alternate;animation-direction:alternate\n}\n@-webkit-keyframes flicker-data-v-26fab98e{0%{box-shadow:0 0 0 #fff}\n     /** 暂停效果 */10%{box-shadow:0 0 %?2?% #fff}50%{box-shadow:0 0 %?10?% #fff}60%{box-shadow:0 0 %?12?% #fff}90%{box-shadow:0 0 %?18?% #fff}100%{box-shadow:0 0 %?20?% #fff}}@keyframes flicker-data-v-26fab98e{0%{box-shadow:0 0 0 #fff}\n     /** 暂停效果 */10%{box-shadow:0 0 %?2?% #fff}50%{box-shadow:0 0 %?10?% #fff}60%{box-shadow:0 0 %?12?% #fff}90%{box-shadow:0 0 %?18?% #fff}100%{box-shadow:0 0 %?20?% #fff}}\n.danmu-view[data-v-26fab98e]{position:absolute;top:0;height:160px}',""]),t.exports=e},7824:function(t,e,i){var n=i("6ff5");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("4be7e1e2",n,!0,{sourceMap:!1,shadowMode:!1})},"78ab":function(t,e,i){"use strict";var n=i("e91d"),a=i.n(n);a.a},"7a75":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-44836046]{background-color:#000}.swiper[data-v-44836046]{-webkit-box-flex:1;-webkit-flex:1;flex:1;background-color:#000}.swiper-item[data-v-44836046]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.video[data-v-44836046]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.video-box[data-v-44836046]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:%?750?%}.cover-view-left[data-v-44836046]{position:absolute;margin-left:%?10?%;width:%?500?%;bottom:%?120?%;z-index:1;font-size:16px;\n    /*color: #FFFFFF;*/\nwhite-space:pre-wrap;text-overflow:ellipsis;overflow:hidden\n}.left-view[data-v-44836046]{margin-bottom:%?20?%}.left-text[data-v-44836046]{font-size:16px;color:#fff}.avatar[data-v-44836046]{border-radius:%?50?%;border-color:#fff;border-style:solid;border-width:2px}.cover-view-right[data-v-44836046]{position:absolute;bottom:%?160?%;right:%?20?%;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\nz-index:1}.right-text[data-v-44836046]{text-align:center;font-size:14px;color:#fff;margin-bottom:%?15?%;height:20px}.img[data-v-44836046]{height:%?64?%;width:%?64?%;opacity:.9}.page[data-v-44836046]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\n-webkit-box-flex:1;-webkit-flex:1;flex:1}.trend-popup[data-v-44836046]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;height:%?950?%;padding-bottom:62px;position:fixed;left:0;bottom:0;width:100%;z-index:95;border-top-left-radius:3%;border-top-right-radius:3%}.trend-popup-close[data-v-44836046]{position:absolute;top:%?30?%;left:%?30?%;font-size:%?39?%;text-align:center;font-weight:700;z-index:99}.trend-popup-title[data-v-44836046]{margin-top:%?15?%;line-height:%?60?%;font-size:%?28?%;padding:%?5?% 0;text-align:center;font-weight:700}.trend-popup-content[data-v-44836046]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:5px;max-height:%?850?%}.trend-popup-btn[data-v-44836046]{height:%?90?%;line-height:%?90?%;font-size:14px;border-top-color:#dadada;border-top-width:1px;border-top-style:solid;text-align:center;color:#666}.remove-popup-btn[data-v-44836046]{height:%?90?%;line-height:%?90?%;font-size:14px;text-align:center;color:#ed1c24}.cu-btn[data-v-44836046]{padding:0 %?10?%}.cu-reply[data-v-44836046]{margin-left:%?90?%}.card-popup-line[data-v-44836046]{line-height:%?90?%;border-top-color:#dadada;border-top-width:1px;border-top-style:solid;margin:%?25?% %?20?% %?25?% %?70?%}.card-btn[data-v-44836046]{width:%?60?%}\n/* 起到固定的作用 ,从而解决原页面触摸穿透的问题*/.prevent[data-v-44836046]{width:100%;height:100%;\n    /*自动回到顶部*/\n    /*position: fixed;*/top:0;left:0;overflow:hidden}\n/* 遮罩样式 */.shade[data-v-44836046]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:90}.ups-height-padding[data-v-44836046]{height:%?850?%;padding-bottom:62px;position:fixed;left:0;bottom:0;z-index:99}.ups-height[data-v-44836046]{height:%?850?%;position:fixed;left:0;bottom:0;z-index:99}body.?%PAGE?%[data-v-44836046]{background-color:#000}",""]),t.exports=e},"808a":function(t,e,i){"use strict";var n=i("ded7"),a=i.n(n);a.a},"8b11":function(t,e,i){"use strict";var n=i("4ea4");i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("e3fb")),o={name:"UpsComment",props:{comment:{type:Object,required:!0},idx:{type:Number,required:!0},pidx:{type:Number,required:!1,default:-1},isReply:{type:Boolean,required:!1,default:!1}},data:function(){return{}},filters:{formatCreateAt:function(t){return a.default.formatCreateTime(t)}},computed:{},methods:{addReply:function(t){this.$emit("operate","addReply",this.comment,this.idx,this.pidx)},removeComment:function(t){this.$emit("operate","removeComment",this.comment,this.idx,this.pidx)},removeReply:function(t){this.$emit("operate","removeReply",this.comment,this.idx,this.pidx)},addLike:function(t){this.$emit("operate","addLike",this.comment,this.idx,this.pidx)},removeLike:function(t){this.$emit("operate","removeLike",this.comment,this.idx,this.pidx)},goCard:function(){uni.navigateTo({url:"/pagesSys/card/ShareCardDetail?userId="+this.comment.user_id})}}};e.default=o},"8bed":function(t,e,i){"use strict";i.r(e);var n=i("154f"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"9d51":function(t,e,i){t.exports=i.p+"static/fonts/text-icon.af160a20.ttf"},ae19:function(t,e,i){"use strict";i.r(e);var n=i("b5f4"),a=i("3f62");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("808a");var r,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"66b51abb",null,!1,n["a"],r);e["default"]=c.exports},b13b:function(t,e,i){"use strict";i.r(e);var n=i("f16e"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},b352:function(t,e,i){"use strict";i.r(e);var n=i("0dc8"),a=i("8bed");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("78ab");var r,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"44836046",null,!1,n["a"],r);e["default"]=c.exports},b5f4:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"comment",on:{longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.removeComment.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"header flex"},[t.comment.avatar?i("v-uni-view",{staticClass:"cu-avatar round",style:{"background-image":"url("+t.comment.avatar+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goCard.apply(void 0,arguments)}}}):i("v-uni-view",{staticClass:"cu-avatar round cuIcon-my"}),t.isReply?i("v-uni-view",{staticClass:"column-flex",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addReply.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"sub-nick-name flex"},[i("v-uni-view",{staticClass:"text-black "},[t._v(t._s(t.comment.name))]),i("v-uni-view",{staticClass:"text-gray font-sm justify-between"},[t._v(t._s(t._f("formatCreateAt")(t.comment.create_at)))])],1),t.comment.is_sub_reply?i("v-uni-view",{staticClass:"sub-content-view flex"},[i("v-uni-view",{staticClass:"text-black text-bold text-content text-sm"},[t._v("回复\\t"),i("span",[t._v(t._s(t.comment.replied_name))]),t._v(t._s(" : "+t.comment.content))])],1):i("v-uni-view",{staticClass:"sub-content-view text-black text-bold text-content text-sm"},[t._v(t._s(t.comment.content))])],1):i("v-uni-view",{staticClass:"column-flex",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addReply.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"nick-name flex"},[i("v-uni-view",{staticClass:"text-black "},[t._v(t._s(t.comment.name))]),i("v-uni-view",{staticClass:"text-gray font-sm justify-between"},[t._v(t._s(t._f("formatCreateAt")(t.comment.create_at)))])],1),i("v-uni-view",{staticClass:"content-view"},[i("v-uni-view",{staticClass:"text-black text-bold text-content text-sm"},[t._v(t._s(t.comment.content))])],1)],1),t.isReply?t._e():i("v-uni-view",{staticClass:"flex  justify-end"},[t.comment.likes_num>0?i("v-uni-text",{staticClass:"text-gray text-sm"},[t._v(t._s(t.comment.likes_num))]):i("v-uni-text",{staticClass:"like-space"}),t.comment.isLike?i("v-uni-button",{staticClass:"cu-btn bg-white ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removeLike.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-likefill text-red "})],1):i("v-uni-button",{staticClass:"cu-btn bg-white",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addLike.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-like "})],1)],1)],1)],1)],1)},o=[]},c3e0:function(t,e,i){"use strict";i.r(e);var n=i("48d4"),a=i("6637");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("d9df");var r,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"26fab98e",null,!1,n["a"],r);e["default"]=c.exports},d9df:function(t,e,i){"use strict";var n=i("3f5c"),a=i.n(n);a.a},ded7:function(t,e,i){var n=i("5d29");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("912e53d0",n,!0,{sourceMap:!1,shadowMode:!1})},e91d:function(t,e,i){var n=i("7a75");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("3f5ff942",n,!0,{sourceMap:!1,shadowMode:!1})},f155:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"slider",staticClass:"slider flex",style:{width:t.width+"px"},attrs:{id:"slider"}},[i("div",{staticClass:"slider-left flex",style:{width:t.leftWidth+"px"},on:{touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.sliderTouch.apply(void 0,arguments)}}},[i("div",{staticClass:"left",style:{backgroundColor:t.backgroundColor}})]),i("div",{staticClass:"slider-right flex",style:{width:t.currentWidth-t.leftWidth+"px"},on:{touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.sliderTouch.apply(void 0,arguments)}}},[i("div",{staticClass:"right"})]),i("div",{staticClass:"block flex",style:{backgroundColor:t.touch?t.blockOuterColor:"rgba(0,0,0,0)",left:t.leftWidth+"px"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("div",{staticClass:"block-inner flex",style:{backgroundColor:t.blockBackgroundColor},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.blockTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.blockTouchEnd.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.blockTouchStart.apply(void 0,arguments)}}},[i("div",{staticClass:"block-inner-inner",style:{backgroundColor:t.blockColor}})])])])},o=[]},f16e:function(t,e,i){"use strict";(function(t){i("99af"),i("a15b"),i("fb6a"),i("a9e3"),i("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{min:{type:Number,default:0},max:{type:Number,default:0},value:{type:Number,default:0},width:{type:Number,default:0},ratio:{type:Number,default:1},direction:{type:String,default:"screenX"},backgroundColor:{type:String,default:"#e9e9e9"},blockColor:{type:String,default:"#ffffff"},screenLeft:{type:Number,default:0},iosDirection:{type:Number,default:1}},data:function(){return{oldToucesX:0,leftWidth:0,oldLeftWidth:0,touch:!1}},mounted:function(){},methods:{sliderTouch:function(e){t("log",e," at components/ups-play/slider/index.nvue:78");var i=e.changedTouches[0];this.leftWidth=(i[this.direction]||i["clientX"])*this.ratio-this.screenLeft,this.leftWidth=this.leftWidth>this.currentWidth?this.currentWidth:this.leftWidth,this.leftWidth=this.leftWidth<0?0:this.leftWidth,this.blockTouchEnd()},blockTouchStart:function(t){this.touch=!0,this.oldLeftWidth=this.leftWidth,this.oldToucesX=t.changedTouches[0][this.direction]||t.changedTouches[0]["clientX"]},blockTouchMove:function(t){var e;e=t.changedTouches[0][this.direction]||t.changedTouches[0]["clientX"],this.leftWidth=this.iosDirection*(e-this.oldToucesX)*this.ratio+this.oldLeftWidth,this.leftWidth=this.leftWidth>this.currentWidth?this.currentWidth:this.leftWidth,this.leftWidth=this.leftWidth<0?0:this.leftWidth},blockTouchEnd:function(t){var e=this.leftWidth/this.currentWidth*this.max,i={detail:{value:e}};this.$emit("change",i),this.touch=!1},colorRgb:function(t,e){var i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,n=t.toLowerCase();if(n&&i.test(n)){if(4===n.length){for(var a="#",o=1;o<4;o+=1)a+=n.slice(o,o+1).concat(n.slice(o,o+1));n=a}var r=[];for(o=1;o<7;o+=2)r.push(parseInt("0x"+n.slice(o,o+2)));return"rgba("+r.join(",")+",".concat(e)+")"}return n}},computed:{blockOuterColor:function(){return this.colorRgb(this.blockColor,.4)},blockBackgroundColor:function(){return this.colorRgb(this.blockColor,.5)},currentWidth:function(){return this.width-40}},watch:{value:{immediate:!0,handler:function(t,e){this.touch||(this.leftWidth=t/this.max*this.currentWidth,this.leftWidth=this.leftWidth>this.currentWidth?this.currentWidth:this.leftWidth)}}}};e.default=n}).call(this,i("0de9")["log"])},f98f:function(t,e,i){"use strict";var n=i("7824"),a=i.n(n);a.a}}]);