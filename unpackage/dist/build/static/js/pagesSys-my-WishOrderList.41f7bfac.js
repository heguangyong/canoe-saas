(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesSys-my-WishOrderList"],{4838:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a}));var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("cu-custom",{attrs:{isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[e._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[e._v("购物袋")])],2),i("v-uni-checkbox-group",{staticClass:"block",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.selectedChange.apply(void 0,arguments)}}},e._l(e.orderList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"cu-card article",staticStyle:{width:"100%"}},[e._l(t.items,(function(t,a){return[i("v-uni-view",{key:a+"_0",staticClass:"cu-item shadow flex",staticStyle:{margin:"10rpx",padding:"20rpx 0"}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticStyle:{width:"12%",display:"flex","align-items":"center"}},[i("v-uni-checkbox",{staticClass:"round",class:t.isSelected?"checked":"",attrs:{checked:t.isSelected,value:t.id}})],1),i("v-uni-image",{staticClass:"bg-gray",staticStyle:{width:"28%"},attrs:{src:t.cover,mode:"aspectFill"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.goDetail(t.id)}}}),i("v-uni-view",{staticClass:"desc",staticStyle:{width:"60%"}},[i("v-uni-view",{staticClass:"text-content",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.goDetail(t.id)}}},[i("v-uni-text",{attrs:{clas:"text-bold"}},[e._v(e._s(t.title))]),i("v-uni-text",{staticClass:"text-cut text-sm"},[e._v(e._s(t.content))])],1),i("v-uni-view",{staticClass:"flex margin-top-sm  \ufeffjustify-between"},[i("v-uni-view",{staticClass:"cu-capsule radius "},[i("v-uni-text",{staticClass:"text-red"},[e._v(e._s("¥ "+parseFloat(t.price).toFixed(2)+t.unit_name))])],1),i("v-uni-view",[i("ups-stepper",{attrs:{label:t.id,max:100,val:t.num,step:1,min:1},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.stepper.apply(void 0,arguments)}}})],1)],1)],1)],1)],1)]}))],2)})),1),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-bar bg-white tabbar border  foot"},[i("v-uni-view",{staticClass:"bg-white submit text-lg",staticStyle:{width:"30%"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectedAllChange.apply(void 0,arguments)}}},[i("v-uni-checkbox",{staticClass:"round",class:e.isSelectedAll?"checked":"",attrs:{checked:e.isSelectedAll,value:e.isSelectedAll}}),i("v-uni-text",{staticClass:"margin-left-sm"},[e._v("全选")])],1),i("v-uni-view",{staticStyle:{width:"45%"}},[i("v-uni-text",{staticClass:"margin-right-sm"},[e._v("合计")]),i("v-uni-text",{staticClass:"text-red text-bold text-xl"},[e._v(e._s(e.totalPrice))])],1),i("v-uni-view",{staticClass:"bg-green submit text-lg",staticStyle:{width:"25%"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goNeedConfirmOrder.apply(void 0,arguments)}}},[e._v("购买")])],1)],1)},r=[]},"68a6":function(e,t,i){"use strict";(function(e){var a=i("4ea4");i("4160"),i("c975"),i("a15b"),i("a9e3"),i("b680"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i("2909"));i("96cf");var r=a(i("1da1")),n=a(i("5530")),u=i("2f62"),c=a(i("e3fb")),o=a(i("aa9a")),l={components:{"ups-stepper":o.default},data:function(){return{orderList:[],page:1,isSelectedAll:!1,totalPrice:"",selectedIds:[]}},onShow:function(){this.getList()},onPullDownRefresh:function(){this.page=1,this.getList(),uni.stopPullDownRefresh()},onReachBottom:function(){this.page++,this.getList()},computed:(0,n.default)({},(0,u.mapState)(["user"])),methods:{selectedAllChange:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t,a=0,i.isSelectedAll=!i.isSelectedAll,i.orderList.forEach((function(e){e.items.forEach((function(e){e.isSelected=i.isSelectedAll,e.isSelected&&(a+=e.price*e.num)}))})),i.totalPrice="¥ "+a.toFixed(2),i.$forceUpdate();case 6:case"end":return e.stop()}}),e)})))()},selectedChange:function(t){var i=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=i,e("log",t," at pagesSys/my/WishOrderList.vue:106"),r=0,s.selectedIds=t.detail.value,s.selectedIds.forEach((function(e){var t=!1;for(var i in s.orderList){for(var a in s.orderList[i].items){var n=s.orderList[i].items[a];if(n.id==e){n.isSelected=!0,r+=n.price*n.num,t=!0;break}}if(t)break}})),s.totalPrice="¥ "+r.toFixed(2),s.$forceUpdate();case 7:case"end":return a.stop()}}),a)})))()},stepper:function(t){var i=this;e("log",t," at pagesSys/my/WishOrderList.vue:131");var a={};if(t.val>0){var s=!1;for(var r in i.orderList){for(var n in i.orderList[r].items){var u=i.orderList[r].items[n].id;if(u==t.label){a=i.orderList[r].items[n],a.label=u,s=!0;break}}if(s)break}}i.$forceUpdate();var c=0;i.orderList.forEach((function(e){e.items.forEach((function(e){e.isSelected&&(e.id==a.label&&(e.num=t.val),c+=e.price*e.num)}))})),i.totalPrice="¥ "+c.toFixed(2),i.$forceUpdate()},getList:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,1==i.page&&(i.orderList=[]),a=null,t.next=5,wx.cloud.callFunction({name:"cmn",data:{$url:"getWishOrderListByUserId",userId:i.user._id,page:i.page}});case 5:a=t.sent,c.default.isEmpty(a.result.data)||(r=i.orderList).push.apply(r,(0,s.default)(a.result.data)),i.orderList.forEach((function(e){e.items.forEach((function(e){e.isSelected=!1}))})),i.totalPrice="¥ "+Number(0).toFixed(2);case 9:case"end":return t.stop()}}),t)})))()},goDetail:function(e){uni.navigateTo({url:"/pagesCmn/product/ProductDetailExt?id="+e})},goNeedConfirmOrder:function(){var t=this,i=[];if(c.default.isEmpty(t.selectedIds))t.isSelectedAll&&t.orderList.forEach((function(e){i.push(e._id)}));else{var a=t.selectedIds.join(",");t.orderList.forEach((function(e){e.items.forEach((function(t){a.indexOf(t.id)>-1&&i.push(e._id)}))}))}e("log","orderIds",i," at pagesSys/my/WishOrderList.vue:215"),c.default.isEmpty(i)||uni.redirectTo({url:"/pagesSys/my/NeedConfirmOrder?orderIds="+i.join(",")})}}};t.default=l}).call(this,i("0de9")["log"])},"69e4":function(e,t,i){"use strict";i.r(t);var a=i("8f0e"),s=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=s.a},"8f0e":function(e,t,i){"use strict";i("a9e3"),i("b680"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{stepperNum:0,stepperCacheNum:0}},name:"feng-stepper",props:{val:{type:[String,Number],default:0},min:{type:[String,Number],default:0},max:{type:[String,Number],default:0},step:{type:Number,default:1},label:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:String,default:"#FFF"},unactive:{type:String,default:"#ddd"}},created:function(){this.stepperNum=this.val,this.stepperCacheNum=this.val},watch:{val:function(e){this.stepperNum=this.val}},methods:{less:function(){this.stepperNum<=this.min?this.stepperNum=this.min:this.stepperNum-=Math.ceil(10*this.step)/10,this.stepperCacheNum=Number(this.stepperNum.toFixed(1)),this.emit(this.stepperCacheNum,this.label,"less")},add:function(){this.stepperNum>=this.max?this.stepperNum=this.max:this.stepperNum+=Math.ceil(10*this.step)/10,this.stepperCacheNum=Number(this.stepperNum.toFixed(1)),this.emit(this.stepperCacheNum,this.label,"add")},emit:function(e,t,i){Number(e.toFixed(1))>this.max&&(e=this.max,this.stepperCacheNum=this.max),Number(e.toFixed(1))<this.min&&(e=this.min,this.stepperCacheNum=this.min),this.$emit("change",{val:e,label:t,type:i})},iptVal:function(e){Number(e.detail.value)>this.max?this.stepperNum=this.max:this.stepperNum}}};t.default=a},9226:function(e,t,i){"use strict";var a=i("d824"),s=i.n(a);s.a},"97f3":function(e,t,i){"use strict";i.r(t);var a=i("4838"),s=i("ca00");for(var r in s)"default"!==r&&function(e){i.d(t,e,(function(){return s[e]}))}(r);var n,u=i("f0c5"),c=Object(u["a"])(s["default"],a["b"],a["c"],!1,null,"1d5c0b4a",null,!1,a["a"],n);t["default"]=c.exports},aa9a:function(e,t,i){"use strict";i.r(t);var a=i("ab30"),s=i("69e4");for(var r in s)"default"!==r&&function(e){i.d(t,e,(function(){return s[e]}))}(r);i("9226");var n,u=i("f0c5"),c=Object(u["a"])(s["default"],a["b"],a["c"],!1,null,"5b422df3",null,!1,a["a"],n);t["default"]=c.exports},ab30:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a}));var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticStyle:{display:"inline-block"}},[i("v-uni-view",{staticClass:"feng-stepper"},[e.stepperCacheNum>0?i("v-uni-view",{staticClass:"step-cr",style:e.stepperCacheNum<=e.min?"color:"+e.unactive+";":"color:"+e.active+";",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.less.apply(void 0,arguments)}}},[e._v("-")]):e._e(),e.stepperCacheNum>0?i("v-uni-input",{attrs:{type:"number",value:e.stepperCacheNum,disabled:!0},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.iptVal.apply(void 0,arguments)}}}):e._e(),i("v-uni-view",{staticClass:"step-cr",style:e.stepperCacheNum>=e.max?"color:"+e.unactive+";":"color:"+e.active+";",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.add.apply(void 0,arguments)}}},[e._v("+")])],1)],1)},r=[]},ca00:function(e,t,i){"use strict";i.r(t);var a=i("68a6"),s=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=s.a},d7ea:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".feng-stepper[data-v-5b422df3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#eee;border-radius:%?25?%}.feng-stepper .step-cr[data-v-5b422df3]{display:inline-block;font-size:%?32?%;line-height:%?44?%;border-radius:50%;height:%?50?%;width:%?50?%;background-color:#d3d3d3;text-align:center}.feng-stepper uni-input[data-v-5b422df3]{width:%?50?%;text-align:center;height:%?50?%}",""]),e.exports=t},d824:function(e,t,i){var a=i("d7ea");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("d81bf4ba",a,!0,{sourceMap:!1,shadowMode:!1})},e3fb:function(e,t,i){function a(e){return""===e||("null"===e||("undefined"===e||(!e&&0!==e&&""!==e||(!(!Array.prototype.isPrototypeOf(e)||0!==e.length)||!(!Object.prototype.isPrototypeOf(e)||0!==Object.keys(e).length)))))}function s(e,t){if(e){switch(t||(t="yyyy-MM-dd"),typeof e){case"string":e=new Date(e.replace(/-/,"/"));break;case"number":e=new Date(e);break}if(!(!e instanceof Date)){var i={yyyy:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),MM:(""+(e.getMonth()+101)).substr(1),dd:(""+(e.getDate()+100)).substr(1),HH:(""+(e.getHours()+100)).substr(1),mm:(""+(e.getMinutes()+100)).substr(1),ss:(""+(e.getSeconds()+100)).substr(1)};return t.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function r(){return this.dateFormat(new Date,"yyyyMMdd")}function n(e,t){if(e){switch(t||(t="yyyy-MM-dd"),typeof e){case"string":e=new Date(e);break;case"number":e=new Date(e);break}if(!(!e instanceof Date)){var i={yyyy:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),MM:(""+(e.getMonth()+101)).substr(1),dd:(""+(e.getDate()+100)).substr(1),HH:(""+(e.getHours()+100)).substr(1),mm:(""+(e.getMinutes()+100)).substr(1),ss:(""+(e.getSeconds()+100)).substr(1)};return t.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function u(e,t){var i=!1,a=Date.parse(e),s=Date.parse(t),r=new Date(s).setHours(0,0,0,0);return a<r&&(i=!0),i}function c(e,t){var i=!1,a=Date.parse(e),s=Date.parse(t);return a<s&&(i=!0),i}function o(e){if(e){var t=Date.parse(e),i=Date.parse(new Date),a=Math.abs(i-t);if(a>6048e5){var s=new Date(t),r=s.getFullYear(),n=s.getMonth()+1,u=s.getDate(),c=(new Date).getFullYear();return c==r?n+"月"+u+"日":r+"年"+n+"月"+u+"日"}if(a<6048e5&&a>864e5){var o=Math.floor(a/864e5);return o+"天前"}if(a<864e5&&a>36e5){o=Math.floor(a/36e5);return o+"小时前"}if(a<36e5&&a>=0)return"刚刚"}}function l(e){var t=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!(!t.test(e)||11!=e.length)}function d(){var e=new Date,t="user/"+e.getFullYear()+(""+(e.getMonth()+101)).substr(1)+"/";return t}function f(e){var t="",i=6e4,a=60*i,s=24*a,r=30*s,n=(new Date).getTime(),u=n-e;if(!(u<0)){var c=u/r,o=u/(7*s),l=u/s,d=u/a,f=u/i;return t=c>=1?parseInt(c)+"月前":o>=1?parseInt(o)+"周前":l>=1?parseInt(l)+"天前":d>=1?parseInt(d)+"小时前":f>=1?parseInt(f)+"分钟前":"刚刚",t}}i("b64b"),i("e25e"),i("ac1f"),i("5319"),e.exports={isEmpty:a,dateFormat:s,today:r,formatTime:n,isDayBefore:u,isTimeBefore:c,formatCreateTime:o,isPhoneAvailable:l,cloudUploadPath:d,getDateDiff:f}}}]);