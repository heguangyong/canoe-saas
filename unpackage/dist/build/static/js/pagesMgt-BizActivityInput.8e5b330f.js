(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesMgt-BizActivityInput"],{"075a":function(t,e,i){"use strict";i.r(e);var a=i("c888"),n=i("c49f");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("6e5e");var o,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"de9cb37a",null,!1,a["a"],o);e["default"]=u.exports},"178a":function(t,e,i){"use strict";var a=i("7bab"),n=i.n(a);n.a},"2a94":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".solids[data-v-36839de3]{border:%?1?% dashed #aaa}.iconfont[data-v-36839de3]{font-size:%?100?%}",""]),t.exports=e},"3a66":function(t,e,i){"use strict";var a=i("d183"),n=i.n(a);n.a},"3eb2":function(t,e,i){"use strict";i.r(e);var a=i("c3ed"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},4408:function(t,e,i){"use strict";var a=i("4ea4");i("c975"),i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),s=a(i("5530")),o=a(i("9af9")),c=a(i("476e")),u=i("2f62"),l=a(i("e3fb")),r={components:{"ups-uploads":o.default,"ups-upload":c.default},data:function(){return{activityId:"",activity:{address:{},carousels:[],video:[],phone_require:!1,people_num:0,cover:"",sponsor:{},sign_up:{date:"",time:""},sign_in:{date:"",time:""}},fields:[{id:0,title:"开始时间",name:"time",isShow:!0},{id:1,title:"截止时间",name:"countdown",isShow:!0},{id:2,title:"联系人",name:"service",isShow:!0},{id:3,title:"地址",name:"location",isShow:!0},{id:4,title:"人数限制",name:"group",isShow:!1},{id:5,title:"填写手机",name:"mobile",isShow:!1},{id:6,title:"活动封面",name:"pic",isShow:!0},{id:7,title:"活动图片",name:"album",isShow:!1},{id:8,title:"活动视频",name:"record",isShow:!1}]}},onLoad:function(t){var e=this;t.id&&(e.activityId=t.id),e.activity.sign_up.date=l.default.dateFormat(new Date,"yyyy-MM-dd"),e.activity.sign_up.time=l.default.dateFormat(new Date,"HH:mm"),e.activity.sign_in.date=l.default.dateFormat(new Date,"yyyy-MM-dd"),e.activity.sign_in.time=l.default.dateFormat(new Date,"HH:mm"),t.id&&wx.cloud.callFunction({name:"cmn",data:{$url:"getActivityDetail",id:e.activityId}}).then((function(t){e.activity=t.result.data,e.activity.sign_up&&(e.fields[0].isShow=!0),e.activity.sign_in&&(e.fields[1].isShow=!0),e.activity.sponsor&&(e.fields[2].isShow=!0),e.activity.address&&(e.fields[3].isShow=!0),e.activity.people_num&&(e.fields[4].isShow=!0),e.activity.phone_require&&(e.fields[5].isShow=!0),e.activity.cover&&(e.fields[6].isShow=!0),e.activity.carousels.length>0&&(e.fields[7].isShow=!0),e.activity.video&&(e.fields[8].isShow=!0),e.activity.hasEnroll=!1,e.activity.enroll_ids&&e.user._id&&e.activity.enroll_ids.indexOf(e.user._id)>-1&&(e.activity.hasEnroll=!0),e.activity.hasSignIn=!1,e.activity.sign_in_ids&&e.user._id&&e.activity.sign_in_ids.indexOf(e.user._id)>-1&&(e.activity.hasSignIn=!0)}))},computed:(0,s.default)({},(0,u.mapState)(["user"])),methods:{submit:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t,a="",i.activity.title||(a+=" 主题"),i.activity.sponsor.contactor&&i.activity.sponsor.phone||(a+=" 联系人"),i.activity.address.street||(a+=" 地址"),i.activity.content||(a+=" 详情"),i.activity.cover||(a+=" 活动封面"),!(a.length>0)){e.next=11;break}return uni.showToast({icon:"none",title:"请输入必填信息："+a}),i.isLoad=!1,e.abrupt("return");case 11:return e.next=13,wx.cloud.callFunction({name:"sys",data:{$url:"getCardDetailById",id:i.user.userInfo.bizCardId}});case 13:if(n=e.sent,s=n.result.data,i.activity.name=s.name,i.activity.avatar=s.avatar,!(i.activityId.length>0)){e.next=22;break}return e.next=20,wx.cloud.callFunction({name:"cmn",data:{$url:"updateActivity",activity:i.activity}});case 20:e.next=29;break;case 22:return i.activity.card_id=i.user.userInfo.bizCardId,e.next=25,wx.cloud.callFunction({name:"cmn",data:{$url:"addActivity",activity:i.activity}});case 25:return n=e.sent,i.activity._id=n.result._id,e.next=29,wx.cloud.callFunction({name:"cmn",data:{$url:"genActivityQrcode",id:i.activity._id,page:"pagesCmn/activity/ShareActivityDetail",width:430}});case 29:uni.showToast({icon:"success",title:"提交成功"}),setTimeout((function(){uni.navigateTo({url:"/pagesMgt/BizActivityList"})}),500);case 31:case"end":return e.stop()}}),e)})))()},navback:function(t){uni.navigateBack()},switchShow:function(t,e){var i=this;i.fields[e].isShow=!t.isShow},uploadCover:function(t){this.activity.cover=t},removeCover:function(){this.activity.cover=""},uploadCarousels:function(t){this.activity.carousels.push(t)},removeCarousels:function(t){this.activity.carousels.splice(t,1)},uploadVideo:function(t){this.activity.video.push(t)},removeVideo:function(t){this.activity.video.splice(t,1)},signUpDateChange:function(t){this.activity.sign_up.date=t.detail.value},signUpTimeChange:function(t){this.activity.sign_up.time=t.detail.value},signInDateChange:function(t){this.activity.sign_in.date=t.detail.value},signInTimeChange:function(t){this.activity.sign_in.time=t.detail.value},onPhoneRequireChange:function(t){t.phone_require=!t.phone_require}}};e.default=r},"476e":function(t,e,i){"use strict";i.r(e);var a=i("88aa"),n=i("3eb2");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("3a66");var o,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"29cb287b",null,!1,a["a"],o);e["default"]=u.exports},"6e5e":function(t,e,i){"use strict";var a=i("a2ff"),n=i.n(a);n.a},"7bab":function(t,e,i){var a=i("2a94");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("8e7cff12",a,!0,{sourceMap:!1,shadowMode:!1})},"7df5":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",["image"===t.fileType?i("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.fileList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"bg-img",attrs:{"data-url":t.fileList[a]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewFile.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:t.fileList[a],mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":a},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.fileList.length<t.maxNum?i("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2):t._e(),"video"===t.fileType&&t.fileList.length>=t.maxNum?i("v-uni-view",[i("v-uni-view",{staticClass:"cu-tag bg-red fr",attrs:{"data-index":"0"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1):t._e(),"video"===t.fileType?i("v-uni-view",{staticClass:"grid col-2 grid-square flex-sub rel"},[t.fileList.length>=t.maxNum?i("v-uni-video",{attrs:{src:t.fileList[0],"object-fit":"cover",controls:!0,muted:!0}}):t._e(),t.fileList.length<t.maxNum?i("v-uni-view",{staticClass:" grid col-4 grid-square flex-sub solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-shangchuanshipin text-gray abs center"})],1):t._e()],1):t._e()],1)},s=[]},8259:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".page[data-v-de9cb37a]{z-index:0;height:100vh}",""]),t.exports=e},"88aa":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",["image"===t.fileType?i("v-uni-view",{staticClass:"flex-sub"},[t.uploadFile?i("v-uni-view",{staticClass:"bg-img",attrs:{"data-url":t.uploadFile},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewFile.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"cu-avatar",attrs:{src:t.uploadFile,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-avatar bg-red",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1):i("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1)],1):i("v-uni-view",{staticClass:"grid col-2 grid-square flex-sub rel"},[t.uploadFile?i("v-uni-view",[t.uploadFile?i("v-uni-video",{attrs:{src:t.uploadFile,"object-fit":"cover",controls:!0,muted:!0}}):t._e()],1):i("v-uni-view",{staticClass:" grid col-4 grid-square flex-sub solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-shangchuanshipin text-gray abs center"})],1)],1)],1)},s=[]},"9af9":function(t,e,i){"use strict";i.r(e);var a=i("7df5"),n=i("c418");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("178a");var o,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"36839de3",null,!1,a["a"],o);e["default"]=u.exports},a2ff:function(t,e,i){var a=i("8259");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("ddb25056",a,!0,{sourceMap:!1,shadowMode:!1})},c3ed:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("99af"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),s=i("e3fb"),o={name:"UpsUpload",props:{fileType:{type:String,required:!0},uploadFile:{type:String,required:!0}},data:function(){return{}},methods:{chooseFile:function(){var e=this;"image"===this.fileType?uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){var a,o=(0,n.default)(i.tempFilePaths);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=c.split("."),l=u[u.length-1];wx.cloud.uploadFile({cloudPath:(0,s.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".")+l,filePath:c}).then((function(i){uni.hideLoading(),i.fileID&&(e.$emit("upload",i.fileID),wx.cloud.callFunction({name:"sys",data:{$url:"cloudImgSecCheck",fileID:i.fileID}}).then((function(e){t("log",e.result," at components/ups-upload/index.vue:70"),0==e.result.code||uni.showToast({icon:"none",title:"图片含有违规内容，请重新选择!"})})))}))}}catch(r){o.e(r)}finally{o.f()}},fail:function(e){t("log",e," at components/ups-upload/index.vue:86")}}):"video"===this.fileType&&uni.chooseVideo({count:1,maxDuration:15,sourceType:["camera","album"],compressed:!1,success:function(i){t("log",i," at components/ups-upload/index.vue:96"),uni.showLoading({title:"加载中"});wx.cloud.uploadFile({cloudPath:(0,s.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".png"),filePath:i.tempFilePath}).then((function(t){uni.hideLoading(),t.statusCode<300&&e.$emit("upload",t.fileID)}))},fail:function(e){t("log",e," at components/ups-upload/index.vue:109")}})},viewFile:function(t){wx.previewImage({urls:this.uploadFile,current:t.currentTarget.dataset.url})},deleteFile:function(t){var e=this;uni.showModal({title:"删除",content:"确定要删除?",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&e.$emit("remove")}})}}};e.default=o}).call(this,i("0de9")["log"])},c418:function(t,e,i){"use strict";i.r(e);var a=i("f80c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},c49f:function(t,e,i){"use strict";i.r(e);var a=i("4408"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},c888:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("创建活动")])],2),i("v-uni-view",{staticClass:"page bg-white"},[i("v-uni-form",[i("v-uni-view",{staticClass:"cu-list grid col-5"},t._l(t.fields,(function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-item",class:e.isShow?"solid":"bg-gray",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.switchShow(e,a)}}},[i("v-uni-text",{staticClass:"text-gray ",class:" cuIcon-"+e.name}),i("v-uni-text",[t._v(t._s(e.title))])],1)})),1),i("v-uni-view",{staticClass:"bg-white radius"},[i("v-uni-view",{staticClass:"cu-form-group margin-top-xxs  radius"},[i("v-uni-view",{staticClass:"title radius"},[t._v("主题"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-input",{staticClass:"line-grey radius",attrs:{placeholder:"请输入主题"},model:{value:t.activity.title,callback:function(e){t.$set(t.activity,"title",e)},expression:"activity.title"}})],1),t.fields[0].isShow?t._t("default",[i("v-uni-view",{staticClass:"flex  padding justify-start  align-center  radius "},[i("v-uni-view",{staticClass:"title margin-right-xs"},[t._v("报名截止"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-view",{staticClass:"margin-right-xs"},[i("v-uni-picker",{attrs:{mode:"date",start:"2020-01-01",end:"2030-01-01"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.signUpDateChange.apply(void 0,arguments)}},model:{value:t.activity.sign_up.date,callback:function(e){t.$set(t.activity.sign_up,"date",e)},expression:"activity.sign_up.date"}},[i("v-uni-view",{staticClass:"picker line-grey"},[t._v(t._s(t.activity.sign_up.date||""))])],1)],1),i("v-uni-view",{staticClass:"margin-right"},[i("v-uni-picker",{attrs:{mode:"time",start:"08:00",end:"22:00"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.signUpTimeChange.apply(void 0,arguments)}},model:{value:t.activity.sign_up.time,callback:function(e){t.$set(t.activity.sign_up,"time",e)},expression:"activity.sign_up.time"}},[i("v-uni-view",{staticClass:"picker line-grey"},[t._v(t._s(t.activity.sign_up.time||""))])],1)],1)],1)]):t._e(),t.fields[1].isShow?t._t("default",[i("v-uni-view",{staticClass:"flex  padding justify-start  align-center  radius "},[i("v-uni-view",{staticClass:"title margin-right-xs"},[t._v("开始时间"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-view",{staticClass:"margin-right-xs"},[i("v-uni-picker",{attrs:{mode:"date",start:"2020-01-01",end:"2030-01-01"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.signInDateChange.apply(void 0,arguments)}},model:{value:t.activity.sign_in.date,callback:function(e){t.$set(t.activity.sign_in,"date",e)},expression:"activity.sign_in.date"}},[i("v-uni-view",{staticClass:"picker line-grey"},[t._v(t._s(t.activity.sign_in.date||""))])],1)],1),i("v-uni-view",[i("v-uni-picker",{attrs:{mode:"time",start:"08:00",end:"22:00"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.signInTimeChange.apply(void 0,arguments)}},model:{value:t.activity.sign_in.time,callback:function(e){t.$set(t.activity.sign_in,"time",e)},expression:"activity.sign_in.time"}},[i("v-uni-view",{staticClass:"picker line-grey"},[t._v(t._s(t.activity.sign_in.time||""))])],1)],1)],1)]):t._e(),t.fields[2].isShow?t._t("default",[i("v-uni-view",{staticClass:"flex  padding justify-start  align-center  radius"},[i("v-uni-view",{staticClass:"title margin-right-xs"},[t._v("联系人"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-input",{staticClass:"line-grey",attrs:{placeholder:"请输入联系人"},model:{value:t.activity.sponsor.contactor,callback:function(e){t.$set(t.activity.sponsor,"contactor",e)},expression:"activity.sponsor.contactor"}})],1),i("v-uni-view",{staticClass:"flex  padding justify-start  align-center  radius"},[i("v-uni-view",{staticClass:"title margin-right-xs"},[t._v("联系电话"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-input",{staticClass:"line-grey",attrs:{placeholder:"请输入联系方式"},model:{value:t.activity.sponsor.phone,callback:function(e){t.$set(t.activity.sponsor,"phone",e)},expression:"activity.sponsor.phone"}})],1)]):t._e(),t.fields[3].isShow?t._t("default",[i("v-uni-view",{staticClass:"flex padding justify-start  align-center  radius"},[i("v-uni-view",{staticClass:"title margin-right-xs"},[t._v("地址"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-input",{staticClass:"line-grey width80",attrs:{placeholder:"请输入地址"},model:{value:t.activity.address.street,callback:function(e){t.$set(t.activity.address,"street",e)},expression:"activity.address.street"}}),i("v-uni-text",{staticClass:"cuIcon-locationfill text-orange align-end"})],1)]):t._e(),i("v-uni-view",{staticClass:"flex padding align-start radius"},[i("v-uni-view",{staticClass:"title margin-right-xs"},[t._v("详情"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-textarea",{staticClass:"width88 line-grey",staticStyle:{height:"300rpx"},attrs:{maxlength:"1000",placeholder:"请输入详情"},model:{value:t.activity.content,callback:function(e){t.$set(t.activity,"content",e)},expression:"activity.content"}})],1),i("v-uni-view",{staticClass:"flex  padding justify-start  align-center  radius "},[t.fields[4].isShow?t._t("default",[i("v-uni-view",{staticClass:" margin-right-xs"},[t._v("人数限制")]),i("v-uni-input",{staticClass:"line-grey width10 margin-right-xl text-center",attrs:{placeholder:"请输入",type:"number"},model:{value:t.activity.people_num,callback:function(e){t.$set(t.activity,"people_num",e)},expression:"activity.people_num"}})]):t._e(),t.fields[5].isShow?t._t("default",[i("v-uni-view",{staticClass:"margin-right-xs"},[t._v("报名者是否需要填写手机号？")]),i("v-uni-switch",{attrs:{checked:t.activity.phone_require},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onPhoneRequireChange(t.activity)}},model:{value:t.activity.phone_require,callback:function(e){t.$set(t.activity,"phone_require",e)},expression:"activity.phone_require"}})]):t._e()],2),t.fields[6].isShow?t._t("default",[i("v-uni-view",{staticClass:"flex padding align-start \ufeffsolid-top radius"},[i("v-uni-view",{staticClass:"title width80"},[t._v("活动封面"),i("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),i("v-uni-view",{staticClass:"align-end"},[i("ups-upload",{attrs:{fileType:"image",uploadFile:t.activity.cover},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadCover.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.removeCover.apply(void 0,arguments)}}})],1)],1)]):t._e(),t.fields[7].isShow?t._t("default",[i("v-uni-view",{staticClass:"flex padding align-start \ufeffsolid-top radius"},[i("v-uni-view",{staticClass:"title width88"},[t._v("活动图片")])],1),i("v-uni-view",{staticClass:"align-start padding"},[i("ups-uploads",{attrs:{fileType:"image",fileList:t.activity.carousels,maxNum:"9"},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadCarousels.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.removeCarousels.apply(void 0,arguments)}}})],1)]):t._e(),t.fields[8].isShow?t._t("default",[i("v-uni-view",{staticClass:"flex padding align-start \ufeffsolid-top radius "},[i("v-uni-view",{staticClass:"title "},[t._v("活动视频")])],1),i("v-uni-view",{staticClass:"padding"},[i("ups-uploads",{attrs:{fileType:"video",fileList:t.activity.video,maxNum:"1"},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadVideo.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.removeVideo.apply(void 0,arguments)}}})],1)]):t._e()],2)],1),i("v-uni-view",{staticClass:"cu-tabbar-height"})],1),i("v-uni-view",{staticClass:"cu-bar btn-group   foot bg-white"},[i("v-uni-button",{staticClass:"cu-btn   line-grey round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navback.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"cu-btn   line-grey round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("保存")])],1)],1)},s=[]},d183:function(t,e,i){var a=i("f3d9");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("69669d2c",a,!0,{sourceMap:!1,shadowMode:!1})},e3fb:function(t,e,i){function a(t){return""===t||("null"===t||("undefined"===t||(!t&&0!==t&&""!==t||(!(!Array.prototype.isPrototypeOf(t)||0!==t.length)||!(!Object.prototype.isPrototypeOf(t)||0!==Object.keys(t).length)))))}function n(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function s(){return this.dateFormat(new Date,"yyyyMMdd")}function o(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t);break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function c(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e),s=new Date(n).setHours(0,0,0,0);return a<s&&(i=!0),i}function u(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e);return a<n&&(i=!0),i}function l(t){if(t){var e=Date.parse(t),i=Date.parse(new Date),a=Math.abs(i-e);if(a>6048e5){var n=new Date(e),s=n.getFullYear(),o=n.getMonth()+1,c=n.getDate(),u=(new Date).getFullYear();return u==s?o+"月"+c+"日":s+"年"+o+"月"+c+"日"}if(a<6048e5&&a>864e5){var l=Math.floor(a/864e5);return l+"天前"}if(a<864e5&&a>36e5){l=Math.floor(a/36e5);return l+"小时前"}if(a<36e5&&a>=0)return"刚刚"}}function r(t){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!(!e.test(t)||11!=t.length)}function d(){var t=new Date,e="user/"+t.getFullYear()+(""+(t.getMonth()+101)).substr(1)+"/";return e}function v(t){var e="",i=6e4,a=60*i,n=24*a,s=30*n,o=(new Date).getTime(),c=o-t;if(!(c<0)){var u=c/s,l=c/(7*n),r=c/n,d=c/a,v=c/i;return e=u>=1?parseInt(u)+"月前":l>=1?parseInt(l)+"周前":r>=1?parseInt(r)+"天前":d>=1?parseInt(d)+"小时前":v>=1?parseInt(v)+"分钟前":"刚刚",e}}i("b64b"),i("e25e"),i("ac1f"),i("5319"),t.exports={isEmpty:a,dateFormat:n,today:s,formatTime:o,isDayBefore:c,isTimeBefore:u,formatCreateTime:l,isPhoneAvailable:r,cloudUploadPath:d,getDateDiff:v}},f3d9:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".solids[data-v-29cb287b]{border:%?1?% dashed #aaa}.iconfont[data-v-29cb287b]{font-size:%?100?%}",""]),t.exports=e},f80c:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("99af"),i("4160"),i("a9e3"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),s=i("e3fb"),o={name:"Upload",props:{fileType:{type:String,required:!0},fileList:{type:Array,required:!0},maxNum:{type:Number,default:9}},data:function(){return{}},methods:{chooseFile:function(){var e=this,i=this.maxNum-this.fileList.length;i<0&&(i=0),"image"===this.fileType?wx.chooseImage({count:i,sizeType:["compressed"],sourceType:["album","camera"],success:function(i){var a,o=(0,n.default)(i.tempFilePaths);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=c.split("."),l=u[u.length-1];wx.cloud.uploadFile({cloudPath:(0,s.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".")+l,filePath:c}).then((function(i){uni.hideLoading(),i.fileID&&(e.$emit("upload",i.fileID),wx.cloud.callFunction({name:"sys",data:{$url:"cloudImgSecCheck",fileID:i.fileID}}).then((function(e){t("log",e.result," at components/ups-uploads/index.vue:82"),0==e.result.code||uni.showToast({icon:"none",title:"图片含有违规内容，请重新选择!"})})))}))}}catch(r){o.e(r)}finally{o.f()}},fail:function(e){t("log",e," at components/ups-uploads/index.vue:97")}}):"video"===this.fileType&&uni.chooseMedia({count:1,maxDuration:15,sourceType:["camera","album"],compressed:!0,success:function(i){t("log","uRes",i," at components/ups-uploads/index.vue:107"),uni.showLoading({title:"加载中"});var a=(0,s.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1))),n=[a+".jpg",a+".mp4"],o=[i.tempFiles[0].thumbTempFilePath,i.tempFiles[0].tempFilePath];n.forEach((function(i,a){wx.cloud.uploadFile({cloudPath:n[a],filePath:o[a]}).then((function(i){t("log","res",i," at components/ups-uploads/index.vue:118"),1==a&&(uni.hideLoading(),i.statusCode<300&&e.$emit("upload",i.fileID))}))}))},fail:function(e){t("log",e," at components/ups-uploads/index.vue:131")}})},viewFile:function(t){wx.previewImage({urls:this.fileList[t.currentTarget.dataset.index],current:t.currentTarget.dataset.url})},deleteFile:function(t){var e=this;uni.showModal({title:"删除",content:"确定要删除?",cancelText:"取消",confirmText:"确定",success:function(i){i.confirm&&e.$emit("remove",t.currentTarget.dataset.index)}})}}};e.default=o}).call(this,i("0de9")["log"])}}]);