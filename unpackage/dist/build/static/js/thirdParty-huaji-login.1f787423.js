(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["thirdParty-huaji-login"],{"172b":function(t,e,a){"use strict";var n=a("ed33"),i=a.n(n);i.a},3752:function(t,e,a){"use strict";a.r(e);var n=a("dad5"),i=a("37a0");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("172b");var u,o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"55c8ae91",null,!1,n["a"],u);e["default"]=c.exports},"37a0":function(t,e,a){"use strict";a.r(e);var n=a("693e"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"5ebe":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".UCenter-bg[data-v-55c8ae91]{background-size:cover;height:%?2048?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:%?40?%;overflow:hidden;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#fff;font-weight:300;text-shadow:0 0 3px rgba(0,0,0,.3)}.UCenter-bg uni-text[data-v-55c8ae91]{opacity:.8}.UCenter-bg uni-image[data-v-55c8ae91]{width:%?200?%;height:%?200?%}.UCenter-bg .gif-wave[data-v-55c8ae91]{position:absolute;width:100%;bottom:0;left:0;z-index:99;mix-blend-mode:screen;height:%?100?%}uni-map[data-v-55c8ae91],.mapBox[data-v-55c8ae91]{left:0;z-index:99;mix-blend-mode:screen;height:%?100?%}uni-map[data-v-55c8ae91],.mapBox[data-v-55c8ae91]{width:%?750?%;height:%?300?%}",""]),t.exports=e},"693e":function(t,e,a){"use strict";(function(t){var n=a("4ea4");a("d3b7"),a("498a"),a("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("1da1")),r=n(a("5530")),u=a("2f62"),o=n(a("d3b3")),c={name:"WebLogin",data:function(){return{modalName:"LoginModal",card:{phone:"",auth_code:"",error_msg:""}}},onLoad:function(){this.anonymousAuth()},computed:(0,r.default)({},(0,u.mapState)(["httpPath"])),methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["updateUser"])),{},{anonymousAuth:function(){return(0,i.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.default.auth().anonymousAuthProvider().signIn();case 2:return e.next=4,o.default.auth().getLoginState();case 4:a=e.sent,t("log","login",a.isAnonymousAuth," at thirdParty/huaji/login.vue:62");case 6:case"end":return e.stop()}}),e)})))()},loginAccount:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,i,r,u,c,s,l,d,p,f,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e,t("log","loginCard phone",n.card.phone,"auth_code",n.card.auth_code," at thirdParty/huaji/login.vue:67"),i=/^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\d{8}$/,11==n.card.phone.trim().length&&i.test(n.card.phone)){a.next=6;break}return n.card.error_msg="请输入正确手机号",a.abrupt("return");case 6:if(r=/^[0-9]*$/,4==n.card.auth_code.trim().length&&r.test(n.card.auth_code)){a.next=10;break}return n.card.error_msg="请输入正确授权码",a.abrupt("return");case 10:return a.next=12,o.default.callFunction({name:"web",data:{$url:"webLogin",phone:n.card.phone,authCode:n.card.auth_code}});case 12:u=a.sent,c=JSON.parse(u.result.data),s=c.user,l=c.card,t("log","name",s.userInfo.nickName," at thirdParty/huaji/login.vue:92"),n.updateUser(s),d={},a.t0=regeneratorRuntime.keys(s.userInfo.accounts);case 20:if((a.t1=a.t0()).done){a.next=32;break}if(p=a.t1.value,"7600"!=s.userInfo.accounts[p].account_key){a.next=30;break}if(!s.userInfo.accounts[p].is_forbidden){a.next=28;break}return n.card.error_msg="请知：此账号已被停用！",a.abrupt("return");case 28:d=s.userInfo.accounts[p].api_map;case 29:return a.abrupt("break",32);case 30:a.next=20;break;case 32:return f=d.read||{},f.apicallsetinput[0].email=l.email||l.phone+"@huajisys.com",h=d.create||{},h.apicallsetinput[0].firstname=s.userInfo.nickName,h.apicallsetinput[0].lastname=1==s.userInfo.gender?"先生":"女士",h.apicallsetinput[0].password=s._openid,h.apicallsetinput[0].email=l.email||"",h.apicallsetinput[0].title="主管",h.apicallsetinput[0].profile_image=s.userInfo.avatarUrl,h.apicallsetinput[0].language=s.userInfo.language,a.next=44,o.default.callFunction({name:"web",data:{$url:"huajiSsoUrl",readApiForm:f,createApiForm:h}});case 44:u=a.sent,t("log","ssoUrl",u.result.data," at thirdParty/huaji/login.vue:131"),window.location.href=u.result.data;case 47:case"end":return a.stop()}}),a)})))()},inputPhone:function(t){this.card.phone=t.detail.value},inputAuthCode:function(t){this.card.auth_code=t.detail.value}})};e.default=c}).call(this,a("0de9")["log"])},dad5:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"UCenter-bg",staticStyle:{"{backgroundImage":"'url(https://7072-prod-9goq82ctb17bd75f-1306535128.tcb.qcloud.la/s002/home_hj6c.png)'}"}},[a("v-uni-view",{staticClass:"cu-modal show"},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"}),a("v-uni-view",{staticClass:"bg-white"},[a("v-uni-image",{staticClass:"cu-avatar round lg png",attrs:{src:"https://7072-prod-9goq82ctb17bd75f-1306535128.tcb.qcloud.la/resource/missing-face.png",mode:"widthFix"}}),a("v-uni-view",{staticClass:"content margin-top-sm"},[t._v("用户登录")])],1),a("v-uni-view",{staticClass:"padding-sm bg-white"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("手机号"),a("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),a("v-uni-input",{staticClass:"text-left",attrs:{placeholder:"请输入手机号...",value:t.card.phone},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputPhone.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("授权码"),a("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),a("v-uni-input",{staticClass:"text-left",attrs:{placeholder:"请输入授权码...",value:t.card.auth_code},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputAuthCode.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"text-xs text-orange"},[t._v(t._s(t.card.error_msg))])],1),a("v-uni-view",{staticClass:"flex flex-direction bg-white",staticStyle:{padding:"0 120upx 50upx 120upx"}},[a("v-uni-button",{staticClass:"cu-btn bg-blue lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loginAccount.apply(void 0,arguments)}}},[t._v("登录")])],1)],1)],1)],1)},r=[]},ed33:function(t,e,a){var n=a("5ebe");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("31c83410",n,!0,{sourceMap:!1,shadowMode:!1})}}]);