(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesSys-site-trend"],{"1bf7":function(t,e,a){"use strict";a.r(e);var r=a("ce48"),n=a("49fa");for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);var l,s=a("f0c5"),o=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"469c2719",null,!1,r["a"],l);e["default"]=o.exports},4161:function(t,e,a){"use strict";a.r(e);var r=a("7888"),n=a("82cc");for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);a("62b9");var l,s=a("f0c5"),o=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"66354997",null,!1,r["a"],l);e["default"]=o.exports},"49fa":function(t,e,a){"use strict";a.r(e);var r=a("8d59"),n=a.n(r);for(var i in r)"default"!==i&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e["default"]=n.a},"4daf":function(t,e,a){"use strict";var r=a("4ea4");a("c975"),a("4e82"),a("a9e3"),a("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("2909")),i={props:{list:{type:Array,required:!0},offset:{type:Number,default:10},idKey:{type:String,default:"id"},imageSrcKey:{type:String,default:"image_url"},cols:{type:Number,default:2,validator:function(t){return t>=2}},imageStyle:{type:Object},single:{type:Boolean,default:!1},listStyle:{type:Object},goType:{type:String,default:"FULL"}},data:function(){return{topArr:[],allPositionArr:[],allHeightArr:[],height:0,oldNum:0,num:0}},created:function(){this.refresh()},methods:{imageLoadHandle:function(t){var e=this,a="waterfalls-list-id-"+this.list[t][this.idKey],r=uni.createSelectorQuery().in(this);r.select("#"+a).fields({size:!0},(function(a){if(e.num++,e.$set(e.allHeightArr,t,a.height),e.num===e.list.length){for(var r=e.oldNum;r<e.num;r++){var i=function(){var t=(0,n.default)(e.topArr).sort((function(t,e){return t-e}));return{shorterIndex:e.topArr.indexOf(t[0]),shorterValue:t[0],longerIndex:e.topArr.indexOf(t[e.cols-1]),longerValue:t[e.cols-1]}},l=i(),s=l.shorterIndex,o=l.shorterValue,u={top:o+"px",left:(a.width+e.offset)*s+"px"};e.$set(e.allPositionArr,r,u),e.topArr[s]=o+e.allHeightArr[r]+e.offset,e.height=i().longerValue-e.offset}e.oldNum=e.num,e.$emit("image-load")}})).exec()},refresh:function(){for(var t=[],e=0;e<this.cols;e++)t.push(0);this.topArr=t,this.num=0,this.oldNum=0},goTrendDetail:function(t){t.needAuthFlag||uni.navigateTo({url:"/pagesCmn/trend/ShareTrendDetail?id="+t.id})}}};e.default=i},"62b9":function(t,e,a){"use strict";var r=a("c9cd"),n=a.n(r);n.a},7888:function(t,e,a){"use strict";var r;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"waterfalls-box",style:{height:t.height+"px"}},t._l(t.list,(function(e,r){return a("v-uni-view",{key:e[t.idKey],ref:"waterfalls-list-id-"+e[t.idKey],refInFor:!0,staticClass:"waterfalls-list",style:Object.assign({},{"--offset":t.offset+"px","--cols":t.cols},t.listStyle,t.allPositionArr[r]||{}),attrs:{id:"waterfalls-list-id-"+e[t.idKey]},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goTrendDetail(e)}}},[a("v-uni-image",{staticClass:"waterfalls-list-image",class:{single:t.single},style:t.imageStyle,attrs:{mode:"widthFix",src:e[t.imageSrcKey]||" "},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoadHandle(r)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoadHandle(r)}}}),t._t("default",null,null,e)],2)})),1)},i=[]},"82cc":function(t,e,a){"use strict";a.r(e);var r=a("4daf"),n=a.n(r);for(var i in r)"default"!==i&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e["default"]=n.a},"8d59":function(t,e,a){"use strict";var r=a("4ea4");a("4160"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=r(a("1da1")),i=r(a("5530")),l=a("2f62"),s=r(a("4161")),o=(r(a("d3b3")),{components:{"ups-waterfalls":s.default},data:function(){return{list:[],page:1}},onShow:function(){this.getList()},onPullDownRefresh:function(){this.page=1,this.getList(),uni.stopPullDownRefresh()},onReachBottom:function(){this.page++,this.getList()},computed:(0,i.default)({},(0,l.mapState)(["user"])),methods:{getList:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,1==a.page&&(a.list=[]),r=[],n={},e.next=6,wx.cloud.callFunction({name:"cmn",data:{$url:"getTrendListByCardId",cardId:a.user.userInfo.bizCardId,page:a.page}});case 6:n=e.sent,r=n.result.data,r.forEach((function(t){a.list.push({id:t._id,image_url:t.cover,title:t.title||"",carousels:t.carousels||[]})}));case 9:case"end":return e.stop()}}),e)})))()},goDetail:function(t){uni.navigateTo({url:"/pagesCmn/trend/ShareTrendDetail?id="+t})}}});e.default=o},c9cd:function(t,e,a){var r=a("ccde");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("4f06").default;n("b8954940",r,!0,{sourceMap:!1,shadowMode:!1})},ccde:function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,".waterfalls-box[data-v-66354997]{position:relative;width:100%;overflow:hidden}.waterfalls-box .waterfalls-list[data-v-66354997]{width:calc((100% - var(--offset) * (var(--cols) - 1)) / var(--cols));position:absolute;background-color:#fff;border-radius:6px;left:calc(-50% - var(--offset))}.waterfalls-box .waterfalls-list .waterfalls-list-image[data-v-66354997]{width:100%;will-change:transform;border-radius:6px 6px 0 0;display:block}.waterfalls-box .waterfalls-list .waterfalls-list-image.single[data-v-66354997]{border-radius:6px}",""]),t.exports=e},ce48:function(t,e,a){"use strict";var r;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{isBack:!0}},[a("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),a("template",{attrs:{slot:"content"},slot:"content"},[t._v("公司展厅")])],2),a("v-uni-scroll-view",{attrs:{"scroll-y":!0}},[a("ups-waterfalls",{ref:"trendWaterfalls",attrs:{list:t.list}},t._l(t.list,(function(e,r){return a("v-uni-view",{key:r,attrs:{slot:"slot{{index}}"},slot:"slot{{index}}"},[a("v-uni-view",{staticClass:"text-cut"},[a("v-uni-view",{staticClass:"title padding-sm"},[t._v(t._s(e.title))])],1)],1)})),1),a("v-uni-view",{staticClass:"cu-tabbar-height"})],1)],1)},i=[]}}]);