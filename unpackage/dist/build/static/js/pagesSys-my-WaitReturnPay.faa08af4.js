(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesSys-my-WaitReturnPay"],{"0102":function(t,e,i){"use strict";var a=i("3dcd"),n=i.n(a);n.a},"0751":function(t,e,i){"use strict";i.r(e);var a=i("d597"),n=i("2ca8");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("0102");var r,o=i("f0c5"),c=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"43c1cab6",null,!1,a["a"],r);e["default"]=c.exports},1320:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("99af"),i("4160"),i("a9e3"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),s=a(i("5530")),r=i("2f62"),o=i("e3fb"),c={name:"imageUploadMovable",props:{imgList:{type:Array,required:!0,default:function(){return[]}},imgSize:{type:Number,default:function(){return 80}},maxNum:{type:Number,default:9}},data:function(){return{scopeImgList:this.imgList,areaBoxInfo:{},x:0,y:0,idx:0,moveSrc:"",areaBoxTop:0,hoverImgIdx:"",inBoxXY:{}}},watch:(0,s.default)((0,s.default)({},(0,r.mapState)(["user","cloudPath"])),{},{imgList:function(){var t=this;t.scopeImgList=t.imgList,this.getDomInfo("areaBox",(function(e){t.areaBoxInfo=e,t.scopeImgList.forEach((function(i,a){t.getDomInfo("img"+a,(function(t){i.x=t.left-e.left})),t.getDomInfo("img"+a,(function(t){i.y=t.top-e.top}))}))}))}}),mounted:function(){var t=this;this.getDomInfo("areaBox",(function(e){t.areaBoxInfo=e,t.scopeImgList.forEach((function(i,a){t.getDomInfo("img"+a,(function(t){i.x=t.left-e.left})),t.getDomInfo("img"+a,(function(t){i.y=t.top-e.top}))}))}))},methods:{chooseFile:function(){var e=this,i=this.maxNum-this.scopeImgList.length;i<0&&(i=0),wx.chooseImage({count:i,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){var i,a=(0,n.default)(t.tempFilePaths);try{for(a.s();!(i=a.n()).done;){var s=i.value,r=s.split("."),c=r[r.length-1];wx.cloud.uploadFile({cloudPath:(0,o.cloudUploadPath)()+"".concat(Date.now(),"-").concat(Math.floor(1e7*Math.random(0,1)),".")+c,filePath:s}).then((function(t){uni.hideLoading(),t.fileID&&(e.$emit("upload",t.fileID),wx.cloud.callFunction({name:"sys",data:{$url:"cloudImgSecCheck",fileID:t.fileID}}).then((function(t){0==t.result.code||uni.showToast({icon:"none",title:"图片含有违规内容，请重新选择!"})})))}))}}catch(u){a.e(u)}finally{a.f()}},fail:function(e){t("log",e," at components/ups-movable/index.vue:152")}})},viewFile:function(t){wx.previewImage({urls:this.scopeImgList[t.currentTarget.dataset.index],current:t.currentTarget.dataset.url})},deleteFile:function(t){var e=this;uni.showModal({title:"删除",content:"确定要删除?",cancelText:"取消",confirmText:"确定",success:function(i){i.confirm&&e.$emit("remove",t)}})},moveHandle:function(){},onChange:function(t){},tstr:function(t,e){var i=this.areaBoxInfo.top,a=this.areaBoxInfo.left;this.x=this.scopeImgList[t].x,this.y=this.scopeImgList[t].y,this.moveSrc=this.scopeImgList[t].url,this.idx=t;var n=e.changedTouches[0].clientX-a,s=e.changedTouches[0].clientY-i;this.inBoxXY={x:n-this.scopeImgList[t].x,y:s-this.scopeImgList[t].y}},tsmo:function(t){var e=this,i=this.areaBoxInfo.top,a=this.areaBoxInfo.left,n=this.imgSize,s=t.changedTouches[0].clientX-a,r=t.changedTouches[0].clientY-i;this.x=s-this.inBoxXY.x,this.y=r-this.inBoxXY.y,this.scopeImgList.forEach((function(t,i){s>t.x&&s<t.x+n&&r>t.y&&r<t.y+n&&(e.hoverImgIdx="img"+i)}))},toend:function(e){var i=this,a=this.areaBoxInfo.top,n=this.areaBoxInfo.left,s=this.imgSize,r=e.changedTouches[0].clientX-n,o=e.changedTouches[0].clientY-a;for(var c in this.scopeImgList){var u=this.scopeImgList[c];if(r>u.x&&r<u.x+s&&o>u.y&&o<u.y+s){i.scopeImgList[i.idx].url=i.scopeImgList[c].url,i.scopeImgList[c].url=i.moveSrc;break}}this.moveSrc="",this.hoverImgIdx="",t("log","change",this.imgList,this.scopeImgList,i.scopeImgList," at components/ups-movable/index.vue:241"),this.$emit("moveEndList",this.imgList)},getDomInfo:function(t,e){var i=uni.createSelectorQuery().in(this);i.select("#"+t).boundingClientRect().exec((function(t){e(t[0])}))}}};e.default=c}).call(this,i("0de9")["log"])},"2ca8":function(t,e,i){"use strict";i.r(e);var a=i("e41e"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"2f3f":function(t,e,i){"use strict";i.r(e);var a=i("1320"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"35ca":function(t,e,i){"use strict";i.r(e);var a=i("b119"),n=i("2f3f");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("604f");var r,o=i("f0c5"),c=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"78270430",null,!1,a["a"],r);e["default"]=c.exports},"3c7a":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".movarea[data-v-78270430]{width:100%;height:75px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.imgBox[data-v-78270430]{width:100%;height:75px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.imgBox .imgItem[data-v-78270430]{position:relative}.imgBox .imgItem uni-image[data-v-78270430]{width:75px;height:75px;-webkit-transition:all .5s;transition:all .5s;vertical-align:top}.imgBox .imgItem .closeBtn[data-v-78270430]{background-color:red;color:#fff;border-radius:50%;text-align:center;position:absolute;top:0;right:0;width:16px;height:16px;line-height:16px;z-index:3;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.moveV[data-v-78270430]{opacity:.8;z-index:999}.moveV uni-image[data-v-78270430]{width:75px;height:75px}.select[data-v-78270430]{-webkit-transform:scale(1.3);transform:scale(1.3)}",""]),t.exports=e},"3dcd":function(t,e,i){var a=i("e9b7");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("f7080832",a,!0,{sourceMap:!1,shadowMode:!1})},"604f":function(t,e,i){"use strict";var a=i("f083"),n=i.n(a);n.a},b119:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}},[i("v-uni-movable-area",{ref:"areaBox",staticClass:"movarea",attrs:{id:"areaBox"}},[i("v-uni-view",{staticClass:"imgBox"},[t._l(t.scopeImgList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"imgItem margin-right-sm margin-bottom-sm",style:{width:t.imgSize+"px",height:t.imgSize+"px"}},[i("v-uni-image",{ref:"img"+a,refInFor:!0,class:t.hoverImgIdx==="img"+a?"select":"",attrs:{id:"img"+a,src:e.url,mode:"aspectFill"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.tstr(a,e)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.tsmo.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.toend.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"closeBtn",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteFile(a)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.scopeImgList.length<t.maxNum?i("v-uni-view",{staticClass:"imgItem solids",style:{width:t.imgSize+"px",height:t.imgSize+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseFile.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"abs center",style:{width:t.imgSize/2+"px",height:t.imgSize/2+"px"},attrs:{src:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/addPhoto.png",mode:"aspectFill"}})],1):t._e()],2),t.moveSrc?i("v-uni-movable-view",{staticClass:"moveV",style:{width:t.imgSize+"px",height:t.imgSize+"px"},attrs:{animation:!1,x:t.x,y:t.y,direction:"all"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:t.moveSrc,mode:"aspectFill"}})],1):t._e()],1)],1)},s=[]},d597:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("退款详情")])],2),i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"margin-xs flex align-center text-center"},[i("v-uni-text",{staticClass:"padding-xxl bg-green text-xxl radius",staticStyle:{width:"100%"}},[t._v("待商家处理")])],1),i("v-uni-view",{staticClass:"cu-bar  solid-bottom"},[i("v-uni-view",{staticClass:"action"},[t._v("退款流程")])],1),i("v-uni-view",{staticClass:"cu-steps \ufeffsteps-bottom"},t._l(t.nodes,(function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-item",class:a>t.nodeCur?"":"text-green"},[t._v(t._s(e.name)),i("v-uni-text",{staticClass:"cuIcon-title"})],1)})),1),i("v-uni-view",{staticClass:"cu-bar  solid-bottom"},[i("v-uni-view",{staticClass:"action"},[t._v("售后信息")])],1),i("v-uni-view",{staticClass:"cu-card article solid-bottom",staticStyle:{width:"100%"}},[i("v-uni-view",{staticClass:"cu-item shadow flex solid-bottom",staticStyle:{margin:"0 10rpx 0 10rpx",padding:"20rpx 0"}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-image",{staticClass:"bg-gray",staticStyle:{width:"30%"},attrs:{src:t.item.cover,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"desc",staticStyle:{width:"70%"}},[i("v-uni-view",{staticClass:"text-content"},[i("v-uni-text",{attrs:{clas:"text-bold"}},[t._v(t._s(t.item.title))]),i("v-uni-text",{staticClass:"text-cut text-sm"},[t._v(t._s(t.item.content))])],1),i("v-uni-view",{staticClass:"flex margin-top-sm  \ufeffjustify-between"},[i("v-uni-view",{staticClass:"cu-capsule radius "},[i("v-uni-text",{staticClass:"text-gray"},[t._v(t._s("¥ "+parseFloat(t.item.price).toFixed(2)+t.item.unit_name))])],1),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s("x"+t.item.num))])],1)],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("退款金额")]),i("v-uni-view",{staticClass:"text-left margin-top-lg"},[t._v(t._s("¥ "+t.order.return_price))])],1),i("v-uni-view",{staticClass:"cu-form-group",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showReasons.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"title"},[t._v("退款原因")]),i("v-uni-view",{staticClass:"text-left margin-top-lg"},[t._v(t._s(t.order.reason))])],1),i("v-uni-view",{staticClass:"cu-form-group solid-bottom"},[i("v-uni-view",{staticClass:"title"},[t._v("具体描述")]),i("v-uni-view",{staticClass:"text-left margin-top-lg"},[t._v(t._s(t.order.reason_remark))])],1),i("v-uni-view",{staticClass:"margin-left-sm bg-white padding-sm solid-bottom bg-white"},t._l(t.item.reason_carouse,(function(e,a){return i("v-uni-image",{key:a,staticClass:"margin-xs",staticStyle:{width:"100px",height:"100px"},attrs:{src:e,"data-src":e},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}})})),1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("联系电话")]),i("v-uni-view",{staticClass:"text-right margin-top-lg"},[t._v(t._s(t.order.phone))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("退款类型")]),i("v-uni-view",{staticClass:"text-right margin-top-lg"},[t._v(t._s("退款"))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("售后单号")]),i("v-uni-view",{staticClass:"text-right margin-top-lg"},[t._v(t._s(t.order.order_num))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("申请时间")]),i("v-uni-view",{staticClass:"text-right margin-top-lg"},[t._v(t._s(t.formatDateTime(t.order.apply_at)))])],1)],1)],1),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-bar bg-white tabbar border  foot"},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelApply.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-cu-image"},[i("v-uni-text",{staticClass:"cuIcon-close lg text-bold text-grey"})],1),i("v-uni-view",{staticClass:"text-gray"},[t._v("撤销申请")])],1),i("v-uni-view",{staticClass:"bg-green submit text-lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goModifyApply.apply(void 0,arguments)}}},[t._v("修改申请")])],1)],1)],1)},s=[]},e3fb:function(t,e,i){function a(t){return""===t||("null"===t||("undefined"===t||(!t&&0!==t&&""!==t||(!(!Array.prototype.isPrototypeOf(t)||0!==t.length)||!(!Object.prototype.isPrototypeOf(t)||0!==Object.keys(t).length)))))}function n(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function s(){return this.dateFormat(new Date,"yyyyMMdd")}function r(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t);break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function o(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e),s=new Date(n).setHours(0,0,0,0);return a<s&&(i=!0),i}function c(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e);return a<n&&(i=!0),i}function u(t){if(t){var e=Date.parse(t),i=Date.parse(new Date),a=Math.abs(i-e);if(a>6048e5){var n=new Date(e),s=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),c=(new Date).getFullYear();return c==s?r+"月"+o+"日":s+"年"+r+"月"+o+"日"}if(a<6048e5&&a>864e5){var u=Math.floor(a/864e5);return u+"天前"}if(a<864e5&&a>36e5){u=Math.floor(a/36e5);return u+"小时前"}if(a<36e5&&a>=0)return"刚刚"}}function l(t){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!(!e.test(t)||11!=t.length)}function d(){var t=new Date,e="user/"+t.getFullYear()+(""+(t.getMonth()+101)).substr(1)+"/";return e}function f(t){var e="",i=6e4,a=60*i,n=24*a,s=30*n,r=(new Date).getTime(),o=r-t;if(!(o<0)){var c=o/s,u=o/(7*n),l=o/n,d=o/a,f=o/i;return e=c>=1?parseInt(c)+"月前":u>=1?parseInt(u)+"周前":l>=1?parseInt(l)+"天前":d>=1?parseInt(d)+"小时前":f>=1?parseInt(f)+"分钟前":"刚刚",e}}i("b64b"),i("e25e"),i("ac1f"),i("5319"),t.exports={isEmpty:a,dateFormat:n,today:s,formatTime:r,isDayBefore:o,isTimeBefore:c,formatCreateTime:u,isPhoneAvailable:l,cloudUploadPath:d,getDateDiff:f}},e41e:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("d3b7"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),s=a(i("5530")),r=i("2f62"),o=a(i("e3fb")),c=a(i("35ca")),u={components:{"ups-movable":c.default},data:function(){return{isUps:!1,nodes:[{name:"商家处理申请"},{name:"退款中"},{name:"退款成功"}],nodeCur:0,item:{id:"",title:"",content:"",price:0,unit_name:"",num:0,new_price:0},order:{_id:"",items:[],return_price:0,reason_carouse:[],reason_imgList:[],phone:""}}},onLoad:function(e){e.id&&(this.order._id=e.id,e.itemId&&(this.item.id=e.itemId),t("log","orderId",this.order._id,"itemId",this.item.id," at pagesSys/my/WaitReturnPay.vue:137"))},onShow:function(){this.getDetail()},computed:(0,s.default)((0,s.default)({},(0,r.mapState)(["user"])),{},{formatDateTime:function(){return function(t){var e=t;return e?o.default.formatTime(e,"yyyy-MM-dd HH:mm"):""}}}),methods:(0,s.default)((0,s.default)({},(0,r.mapMutations)(["updateUser"])),{},{getDetail:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,1==i.page&&(i.orderList=[]),a=null,e.next=5,wx.cloud.callFunction({name:"cmn",data:{$url:"getOrderById",id:i.order._id}});case 5:a=e.sent,i.order=a.result.data,e.t0=regeneratorRuntime.keys(i.order.items);case 8:if((e.t1=e.t0()).done){e.next=15;break}if(n=e.t1.value,i.order.items[n].id!=i.item.id){e.next=13;break}return i.item=i.order.items[n],e.abrupt("break",15);case 13:e.next=8;break;case 15:case"end":return e.stop()}}),e)})))()},cancelApply:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t,i.item.item_state="applyReturnPay",e.t0=regeneratorRuntime.keys(i.order.items);case 3:if((e.t1=e.t0()).done){e.next=10;break}if(a=e.t1.value,i.order.items[a].id!=i.item.id){e.next=8;break}return i.order.items[a]=i.item,e.abrupt("break",10);case 8:e.next=3;break;case 10:return e.next=12,wx.cloud.callFunction({name:"cmn",data:{$url:"updateOrder",order:i.order}});case 12:uni.showToast({icon:"success",title:"撤销申请成功"}),setTimeout((function(){uni.redirectTo({url:"/pagesSys/my/WaitSendOrder?id="+i.order._id})}),1e3);case 14:case"end":return e.stop()}}),e)})))()},goModifyApply:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t,uni.redirectTo({url:"/pagesSys/my/ApplyReturnPay?id="+i.order._id+"&itemId="+i.item.id});case 2:case"end":return e.stop()}}),e)})))()},previewImage:function(e){var i=this;t("log","img src",e.currentTarget.dataset.src," at pagesSys/my/WaitReturnPay.vue:219"),wx.previewImage({current:e.currentTarget.dataset.src,urls:i.item.reason_carouse})}})};e.default=u}).call(this,i("0de9")["log"])},e9b7:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".page[data-v-43c1cab6]{z-index:0;height:100vh}",""]),t.exports=e},f083:function(t,e,i){var a=i("3c7a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("2403a29d",a,!0,{sourceMap:!1,shadowMode:!1})}}]);