(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesCmn-activity-ActivityDetail"],{3707:function(t,e,i){"use strict";var a=i("8d57"),n=i.n(a);n.a},4851:function(t,e,i){"use strict";i.r(e);var a=i("e20c"),n=i("4eaa");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("3707");var r,u=i("f0c5"),c=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,"4ea97042",null,!1,a["a"],r);e["default"]=c.exports},"4a68":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".page[data-v-4ea97042]{z-index:0;height:100vh}uni-video[data-v-4ea97042]{width:%?750?%}uni-image[data-v-4ea97042]{width:%?750?%}uni-swiper[data-v-4ea97042]{height:%?660?%;width:%?750?%}",""]),t.exports=e},"4eaa":function(t,e,i){"use strict";i.r(e);var a=i("e316"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"8d57":function(t,e,i){var a=i("4a68");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("409b356c",a,!0,{sourceMap:!1,shadowMode:!1})},e20c:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("活动详情")])],2),i("v-uni-view",{staticClass:"page bg-white"},[i("v-uni-view",{staticClass:"cu-card \ufeffcase"},[i("v-uni-view",{staticClass:"cu-item \ufeffshadow solid-bottom"},[i("v-uni-view",{staticClass:"image"},[i("v-uni-image",{attrs:{src:t.activity.cover,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-bar bg-shadeBottom"},[i("v-uni-text",{staticClass:"text-cut"},[t._v(t._s(t.activity.content))])],1)],1),i("v-uni-view",{staticClass:"cu-list menu-avatar"},[i("v-uni-view",{staticClass:"cu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goQrcode(t.activity._id)}}},[i("v-uni-view",{staticClass:"cu-avatar round lg"},[i("v-uni-image",{staticClass:"cu-avatar round lg",attrs:{src:t.activity.avatar,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"content flex-sub"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(t.activity.title))]),i("v-uni-view",{staticClass:"text-gray text-sm flex justify-between"},[t._v("报名截止日期："+t._s(t.activity.sign_up))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"cuIcon-qr_code",staticStyle:{"font-size":"36px"}})],1)],1)],1)],1)],1),t.activity.video.length>0?i("v-uni-view",[i("v-uni-video",{attrs:{src:t.activity.video[0],autoplay:!0,loop:!0,muted:!0,"show-play-btn":!1,controls:!1,objectFit:"cover"}})],1):t._e(),t._l(t.activity.carousels,(function(t,e){return i("v-uni-view",{key:e},[i("v-uni-image",{attrs:{src:t,mode:"aspectFill"}})],1)})),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-bar bg-white tabbar border shop foot"},[i("v-uni-button",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goMy.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-my"}),t._v("我的")],1),i("v-uni-button",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doRemove.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-delete"}),t._v("删除")],1),t.activity.is_open?i("v-uni-view",{staticClass:"bg-red submit text-lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setActivityStatus.apply(void 0,arguments)}}},[t._v("下架活动")]):i("v-uni-view",{staticClass:"bg-yellow submit text-lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setActivityStatus.apply(void 0,arguments)}}},[t._v("上架活动")])],1)],2)],1)},s=[]},e316:function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),s=a(i("5530")),r=i("2f62"),u=a(i("e3fb")),c=a(i("d3b3")),o={data:function(){return{activityId:"",activity:{content:"",video:[],carousels:[],sign_up:"",is_open:!1},tabCur:0,tab:["活动详情","报名列表"],swiperList:[]}},onLoad:function(t){t.id&&(this.activityId=t.id)},onShow:function(){this.getDetail()},onShareAppMessage:function(t){if("button"===t.from){var e=t.target.dataset.activity;return{title:e.title,imageUrl:e.cover||"",path:"/pagesSys/activity/ShareActivityDetail?id="+e._id,success:function(t){uni.showToast({icon:"success",title:"分享成功"})}}}},computed:(0,s.default)((0,s.default)({},(0,r.mapState)(["user"])),{},{formatDateTime:function(){return function(t){var e=t;return e?u.default.formatTime(e,"yyyy-MM-dd HH:mm"):""}}}),methods:{ShareActivityDetail:function(){uni.showShareMenu({withShareTicket:!0})},getDetail:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,a=null,e.next=4,c.default.callFunction({name:"web",data:{$url:"getActivityDetail",id:i.activityId}});case 4:a=e.sent,i.activity=JSON.parse(a.result.data),n=i.activity.sign_up.date+" "+i.activity.sign_up.time,s=i.activity.sign_in.date+" "+i.activity.sign_in.time,i.activity.sign_up=n,i.activity.sign_in=s;case 10:case"end":return e.stop()}}),e)})))()},goMy:function(){uni.reLaunch({url:"/pages/my/home"})},goEdit:function(){uni.navigateTo({url:"/pagesMgt/BizActivityInput?id="+this.activityId})},doRemove:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.next=3,c.default.callFunction({name:"cmn",data:{$url:"removeActivity",content:i.activity}});case 3:uni.showToast({icon:"success",title:"删除成功"}),setTimeout((function(){uni.navigateTo({url:"/pagesMgt/BizProductList"})}),1e3);case 5:case"end":return e.stop()}}),e)})))()},setActivityStatus:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.next=3,c.default.callFunction({name:"cmn",data:{$url:"setActivityStatus",id:i.activity._id,is_open:!i.activity.is_open}});case 3:i.activity.is_open=!i.activity.is_open,i.$forceUpdate(),uni.showToast({icon:"success",title:i.activity.is_open?"活动已上架":"活动已下架"});case 6:case"end":return e.stop()}}),e)})))()},goQrcode:function(t){uni.navigateTo({url:"/pagesCmn/activity/ActivityQrcode?id="+t})}}};e.default=o},e3fb:function(t,e,i){function a(t){return""===t||("null"===t||("undefined"===t||(!t&&0!==t&&""!==t||(!(!Array.prototype.isPrototypeOf(t)||0!==t.length)||!(!Object.prototype.isPrototypeOf(t)||0!==Object.keys(t).length)))))}function n(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function s(){return this.dateFormat(new Date,"yyyyMMdd")}function r(t,e){if(t){switch(e||(e="yyyy-MM-dd"),typeof t){case"string":t=new Date(t);break;case"number":t=new Date(t);break}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}function u(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e),s=new Date(n).setHours(0,0,0,0);return a<s&&(i=!0),i}function c(t,e){var i=!1,a=Date.parse(t),n=Date.parse(e);return a<n&&(i=!0),i}function o(t){if(t){var e=Date.parse(t),i=Date.parse(new Date),a=Math.abs(i-e);if(a>6048e5){var n=new Date(e),s=n.getFullYear(),r=n.getMonth()+1,u=n.getDate(),c=(new Date).getFullYear();return c==s?r+"月"+u+"日":s+"年"+r+"月"+u+"日"}if(a<6048e5&&a>864e5){var o=Math.floor(a/864e5);return o+"天前"}if(a<864e5&&a>36e5){o=Math.floor(a/36e5);return o+"小时前"}if(a<36e5&&a>=0)return"刚刚"}}function v(t){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!(!e.test(t)||11!=t.length)}function l(){var t=new Date,e="user/"+t.getFullYear()+(""+(t.getMonth()+101)).substr(1)+"/";return e}function d(t){var e="",i=6e4,a=60*i,n=24*a,s=30*n,r=(new Date).getTime(),u=r-t;if(!(u<0)){var c=u/s,o=u/(7*n),v=u/n,l=u/a,d=u/i;return e=c>=1?parseInt(c)+"月前":o>=1?parseInt(o)+"周前":v>=1?parseInt(v)+"天前":l>=1?parseInt(l)+"小时前":d>=1?parseInt(d)+"分钟前":"刚刚",e}}i("b64b"),i("e25e"),i("ac1f"),i("5319"),t.exports={isEmpty:a,dateFormat:n,today:s,formatTime:r,isDayBefore:u,isTimeBefore:c,formatCreateTime:o,isPhoneAvailable:v,cloudUploadPath:l,getDateDiff:d}}}]);