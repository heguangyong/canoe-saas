(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["thirdParty-WebLogin"],{"0ac7":function(t,e,a){"use strict";a.r(e);var n=a("e001"),i=a("cc6f");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("169f");var u,s=a("f0c5"),o=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"5bb67608",null,!1,n["a"],u);e["default"]=o.exports},"169f":function(t,e,a){"use strict";var n=a("6f5d"),i=a.n(n);i.a},"451b":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".page[data-v-5bb67608]{height:100vh}",""]),t.exports=e},"6f5d":function(t,e,a){var n=a("451b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("4b672938",n,!0,{sourceMap:!1,shadowMode:!1})},"800e":function(t,e,a){"use strict";(function(t){var n=a("4ea4");a("498a"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("1da1")),r=n(a("5530")),u=a("2f62"),s=n(a("d3b3")),o={name:"WebLogin",data:function(){return{isLogin:!1,title:"",card:{phone:"",auth_code:"",error_msg:""},bizCard:{site_bg:"",site:[{title:"最新产品",name:"product",color:"purple",cuIcon:"shop",isOpen:!0,auth:!0},{title:"公司展厅",name:"trend",color:"mauve",cuIcon:"pic",isOpen:!0,auth:!0},{title:"线上活动",name:"activity",color:"cyan",cuIcon:"activity",isOpen:!0,auth:!0},{title:"客服沟通",name:"service",color:"blue",cuIcon:"service",isOpen:!0,auth:!0},{title:"园区企业",name:"company",color:"red",cuIcon:"moreandroid",isOpen:!0,auth:!0},{title:"关于我们",name:"about",color:"green",cuIcon:"info",isOpen:!0,auth:!0}]}}},onShow:function(){var t=this;t.needWxAuth(),t.needAuthFlag||(wx.setNavigationBarTitle({title:t.title}),t.getSiteElements())},computed:(0,r.default)({},(0,u.mapState)(["needAuthFlag","user"])),methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["needWxAuth","wxAuth","updateUser"])),{},{hideLoginModal:function(t){this.modalName=null},loginAccount:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,i,r,u,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e,t("log","loginCard phone",n.card.phone,"auth_code",n.card.auth_code," at thirdParty/WebLogin.vue:133"),i=/^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\d{8}$/,11==n.card.phone.trim().length&&i.test(n.card.phone)){a.next=6;break}return n.card.error_msg="请输入正确手机号",a.abrupt("return");case 6:if(r=/^[0-9]*$/,4==n.card.auth_code.trim().length&&r.test(n.card.auth_code)){a.next=10;break}return n.card.error_msg="请输入正确授权码",a.abrupt("return");case 10:return a.next=12,s.default.auth().anonymousAuthProvider().signIn();case 12:return a.next=14,s.default.auth().getLoginState();case 14:return u=a.sent,t("log","login",u.isAnonymousAuth," at thirdParty/WebLogin.vue:149"),a.next=18,s.default.callFunction({name:"web",data:{$url:"webLogin",phone:n.card.phone,authCode:n.card.auth_code}});case 18:o=a.sent,c=JSON.parse(o.result.data).user,c.userInfo?(t("log","name",c.userInfo.nickName,"bizCardName",c.userInfo.bizCardName," at thirdParty/WebLogin.vue:160"),n.title=c.userInfo.bizCardName,n.updateUser(c),n.isLogin=!0,n.getSiteElements()):n.card.error_msg="请输入正确手机号或授权码";case 21:case"end":return a.stop()}}),a)})))()},inputPhone:function(t){this.card.phone=t.detail.value},inputAuthCode:function(t){this.card.auth_code=t.detail.value},getSiteElements:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,n=null,e.next=4,s.default.callFunction({name:"web",data:{$url:"getCardDetailById",id:a.user.userInfo.bizCardId}});case 4:n=e.sent,a.bizCard=JSON.parse(n.result.data);case 6:case"end":return e.stop()}}),e)})))()},goItem:function(e){var a=this;t("log","item auth",e.currentTarget.dataset.item,"needWxAuth",this.needWxAuth(this.bizCard)," at thirdParty/WebLogin.vue:195");var n=e.currentTarget.dataset.item;n.auth&&a.needAuthFlag?a.wxAuth(a.bizCard):n.isOpen?uni.navigateTo({url:"/pagesSys/site/"+n.name}):uni.showToast({icon:"none",title:"此功能暂未开通"})}})};e.default=o}).call(this,a("0de9")["log"])},cc6f:function(t,e,a){"use strict";a.r(e);var n=a("800e"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},e001:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t.isLogin?t._e():a("v-uni-view",{staticClass:"cu-modal show"},[a("v-uni-view",{staticClass:"cu-dialog",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"}),a("v-uni-view",{staticClass:"bg-white"},[a("v-uni-image",{staticClass:"cu-avatar round lg png",attrs:{src:"https://7072-prod-9goq82ctb17bd75f-1306535128.tcb.qcloud.la/resource/missing-face.png",mode:"widthFix"}}),a("v-uni-view",{staticClass:"content margin-top-sm"},[t._v("用户登录")])],1),a("v-uni-view",{staticClass:"padding-sm bg-white"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("手机号"),a("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),a("v-uni-input",{staticClass:"text-left",attrs:{placeholder:"请输入手机号...",value:t.card.phone},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputPhone.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("授权码"),a("v-uni-text",{staticClass:"cuIcon-titles text-xs text-orange"})],1),a("v-uni-input",{staticClass:"text-left",attrs:{placeholder:"请输入授权码...",value:t.card.auth_code},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputAuthCode.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"text-xs text-orange"},[t._v(t._s(t.card.error_msg))])],1),a("v-uni-view",{staticClass:"flex flex-direction bg-white",staticStyle:{padding:"0 120upx 50upx 120upx"}},[a("v-uni-button",{staticClass:"cu-btn line-green lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loginAccount.apply(void 0,arguments)}}},[t._v("登录")])],1)],1)],1),a("v-uni-scroll-view",{staticClass:"page",attrs:{"scroll-y":!0}},[a("v-uni-image",{staticClass:"response",attrs:{src:t.bizCard.site_bg,mode:"widthFix"}}),a("v-uni-view",{staticClass:"nav-list"},t._l(t.bizCard.site,(function(e,n){return a("v-uni-view",{key:n,staticClass:"nav-li",class:"bg-"+e.color,style:[{animation:"show "+(.2*(n+1)+1)+"s 1"}],attrs:{"hover-class":"none",navigateTo:!0,"data-item":t.bizCard.site[n]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goItem.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"nav-title"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"nav-name"},[t._v(t._s(e.name))]),a("v-uni-text",{class:"cuIcon-"+e.cuIcon})],1)})),1),a("v-uni-view",{staticClass:"cu-tabbar-height"})],1)],1)},r=[]}}]);