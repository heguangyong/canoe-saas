(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesCmn-product-ProductDetail"],{"2cd5":function(t,e,i){"use strict";i.r(e);var a=i("93f7"),n=i("ce6e");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("5f27");var o,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"82d49d88",null,!1,a["a"],o);e["default"]=c.exports},5839:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";.page[data-v-82d49d88]{z-index:0;height:100vh}uni-video[data-v-82d49d88]{width:%?750?%}uni-image[data-v-82d49d88]{width:%?750?%}.carousel[data-v-82d49d88]{height:%?600?%;position:relative}.carousel uni-swiper[data-v-82d49d88]{height:100%}.carousel .image-wrapper[data-v-82d49d88]{width:100%;height:100%}.carousel .swiper-item[data-v-82d49d88]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-content:center;align-content:center;overflow:hidden}.carousel .swiper-item uni-image[data-v-82d49d88]{width:100%;height:100%}\n/* 底部分享 */.popup[data-v-82d49d88]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;height:%?950?%;padding-bottom:62px;position:fixed;left:0;bottom:0;width:100%;z-index:95;border-top-left-radius:3%;border-top-right-radius:3%}.popup-close[data-v-82d49d88]{position:absolute;top:%?30?%;left:%?30?%;font-size:%?39?%;text-align:center;font-weight:700;z-index:199}.popup-title[data-v-82d49d88]{margin-top:%?15?%;line-height:%?60?%;font-size:%?28?%;padding:%?5?% 0;text-align:center;font-weight:700}.popup-content[data-v-82d49d88]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:5px;max-height:%?950?%}\n/* 起到固定的作用 ,从而解决原页面触摸穿透的问题*/.prevent[data-v-82d49d88]{width:100%;height:100%;\n  /*自动回到顶部*/\n  /*position: fixed;*/top:0;left:0;overflow:hidden}\n/* 遮罩样式 */.shade[data-v-82d49d88]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:90}.ups-height[data-v-82d49d88]{height:%?850?%;position:fixed;left:0;bottom:0;z-index:99}',""]),t.exports=e},"5c18":function(t,e,i){var a=i("5839");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("6dac5611",a,!0,{sourceMap:!1,shadowMode:!1})},"5f27":function(t,e,i){"use strict";var a=i("5c18"),n=i.n(a);n.a},"69e4":function(t,e,i){"use strict";i.r(e);var a=i("8f0e"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"8f0e":function(t,e,i){"use strict";i("a9e3"),i("b680"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{stepperNum:0,stepperCacheNum:0}},name:"feng-stepper",props:{val:{type:[String,Number],default:0},min:{type:[String,Number],default:0},max:{type:[String,Number],default:0},step:{type:Number,default:1},label:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:String,default:"#FFF"},unactive:{type:String,default:"#ddd"}},created:function(){this.stepperNum=this.val,this.stepperCacheNum=this.val},watch:{val:function(t){this.stepperNum=this.val}},methods:{less:function(){this.stepperNum<=this.min?this.stepperNum=this.min:this.stepperNum-=Math.ceil(10*this.step)/10,this.stepperCacheNum=Number(this.stepperNum.toFixed(1)),this.emit(this.stepperCacheNum,this.label,"less")},add:function(){this.stepperNum>=this.max?this.stepperNum=this.max:this.stepperNum+=Math.ceil(10*this.step)/10,this.stepperCacheNum=Number(this.stepperNum.toFixed(1)),this.emit(this.stepperCacheNum,this.label,"add")},emit:function(t,e,i){Number(t.toFixed(1))>this.max&&(t=this.max,this.stepperCacheNum=this.max),Number(t.toFixed(1))<this.min&&(t=this.min,this.stepperCacheNum=this.min),this.$emit("change",{val:t,label:e,type:i})},iptVal:function(t){Number(t.detail.value)>this.max?this.stepperNum=this.max:this.stepperNum}}};e.default=a},9226:function(t,e,i){"use strict";var a=i("d824"),n=i.n(a);n.a},"9263c":function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("b680"),i("acd8"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),r=a(i("5530")),o=i("2f62"),s=a(i("6ac9")),c=a(i("aa9a")),u=a(i("d3b3")),d={components:{"uni-popup":s.default,"ups-stepper":c.default},data:function(){return{product:{_id:"",qrcode:"",detail:{content:"",images:[],imgList:[],videos:[]},num:1},priceAndUnitName:""}},onLoad:function(t){t.id&&(this.product._id=t.id)},onShow:function(){this.getDetail()},onShareAppMessage:function(t){if("button"===t.from){var e=t.target.dataset.product;return{title:e.title,imageUrl:e.cover||"",path:"/pagesCmn/product/ShareProductDetail?id="+e._id,success:function(t){uni.showToast({icon:"success",title:"分享成功"})}}}},computed:(0,r.default)({},(0,o.mapState)(["user"])),methods:{ShareProductDetail:function(){uni.showShareMenu({withShareTicket:!0})},getDetail:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,a=null,e.next=4,u.default.callFunction({name:"web",data:{$url:"getProductDetail",id:i.product._id}});case 4:a=e.sent,i.product=JSON.parse(a.result.data),i.product.num=1,i.priceAndUnitName="¥ "+parseFloat(i.product.price).toFixed(2)+i.product.unit_name;case 8:case"end":return e.stop()}}),e)})))()},previewImage:function(e){var i=this;t("log",e," at pagesCmn/product/ProductDetail.vue:160");var a="",n=[];for(var r in a=e.currentTarget.dataset.src,i.product.carouse)n.push(i.product.carouse[r]);for(var o=0;o<i.product.detail.images.length;o++)n.push(i.product.detail.images[o]);wx.previewImage({current:a,urls:n})},goWebLogin:function(){uni.navigateTo({url:"/pages/my/WebLogin"})},goMy:function(){uni.reLaunch({url:"/pages/my/home"})},goEdit:function(){uni.navigateTo({url:"/pagesMgt/BizProductInput?id="+this.product._id})},doRemove:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.next=3,u.default.callFunction({name:"cmn",data:{$url:"removeProduct",content:i.product}});case 3:uni.showToast({icon:"success",title:"删除成功"}),setTimeout((function(){uni.navigateTo({url:"/pagesMgt/BizProductList"})}),1e3);case 5:case"end":return e.stop()}}),e)})))()},goQrcode:function(e){t("log","goQrcode",e," at pagesCmn/product/ProductDetail.vue:223"),uni.navigateTo({url:"/pagesCmn/product/ProductQrcode?id="+e})}}};e.default=d}).call(this,i("0de9")["log"])},"93f7":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("产品详情")])],2),i("v-uni-view",{staticClass:"page bg-white"},[i("v-uni-view",{staticClass:"carousel"},[i("v-uni-swiper",{attrs:{"indicator-dots":!0,circular:"true",duration:"400"}},t._l(t.product.carouse,(function(e,a){return i("v-uni-swiper-item",{key:a,staticClass:"swiper-item",attrs:{"data-src":e},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"image-wrapper"},[i("v-uni-image",{attrs:{src:e,mode:"aspectFill"}})],1)],1)})),1)],1),t.product.detail.content.length>0?i("v-uni-textarea",{staticClass:"text-box font40 bg-white width100 padding-sm solid text-cut",staticStyle:{height:"150rpx"},attrs:{readonly:!0,disabled:!0,"scroll-y":"true",maxlength:"200"},model:{value:t.product.detail.content,callback:function(e){t.$set(t.product.detail,"content",e)},expression:"product.detail.content"}}):t._e(),i("v-uni-view",{staticClass:"cu-list menu-avatar"},[i("v-uni-view",{staticClass:"cu-item",staticStyle:{height:"110rpx","background-color":"gainsboro"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goQrcode(t.product._id)}}},[i("v-uni-view",{staticClass:"cu-avatar round "},[i("v-uni-image",{staticClass:"cu-avatar round ",attrs:{src:t.product.avatar,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"content flex-sub"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(t.product.title))]),i("v-uni-view",{staticClass:"text-gray text-sm flex justify-between"},[t._v("价格："+t._s(t.priceAndUnitName))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"cuIcon-qr_code",staticStyle:{"font-size":"36px"}})],1)],1)],1),t.product.detail.videos.length>0?i("v-uni-view",[i("v-uni-video",{attrs:{src:t.product.detail.videos[0],objectFit:"contain",controls:!0,"show-mute-btn":!0,muted:!0}})],1):t._e(),t._l(t.product.detail.images,(function(e,a){return i("v-uni-image",{key:a,staticStyle:{"vertical-align":"middle"},attrs:{src:e,"data-src":e,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}})})),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-view",{staticClass:"cu-bar bg-white tabbar border  foot"},[i("v-uni-button",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goMy.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-home"}),t._v("我的")],1),i("v-uni-button",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goEdit.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-edit"}),t._v("编辑")],1),i("v-uni-button",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doRemove.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cuIcon-delete"}),t._v("删除")],1),i("v-uni-view",{staticClass:"bg-white submit text-lg"})],1)],2)],1)},r=[]},aa9a:function(t,e,i){"use strict";i.r(e);var a=i("ab30"),n=i("69e4");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("9226");var o,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"5b422df3",null,!1,a["a"],o);e["default"]=c.exports},ab30:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{display:"inline-block"}},[i("v-uni-view",{staticClass:"feng-stepper"},[t.stepperCacheNum>0?i("v-uni-view",{staticClass:"step-cr",style:t.stepperCacheNum<=t.min?"color:"+t.unactive+";":"color:"+t.active+";",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.less.apply(void 0,arguments)}}},[t._v("-")]):t._e(),t.stepperCacheNum>0?i("v-uni-input",{attrs:{type:"number",value:t.stepperCacheNum,disabled:!0},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.iptVal.apply(void 0,arguments)}}}):t._e(),i("v-uni-view",{staticClass:"step-cr",style:t.stepperCacheNum>=t.max?"color:"+t.unactive+";":"color:"+t.active+";",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add.apply(void 0,arguments)}}},[t._v("+")])],1)],1)},r=[]},ce6e:function(t,e,i){"use strict";i.r(e);var a=i("9263c"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},d7ea:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".feng-stepper[data-v-5b422df3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#eee;border-radius:%?25?%}.feng-stepper .step-cr[data-v-5b422df3]{display:inline-block;font-size:%?32?%;line-height:%?44?%;border-radius:50%;height:%?50?%;width:%?50?%;background-color:#d3d3d3;text-align:center}.feng-stepper uni-input[data-v-5b422df3]{width:%?50?%;text-align:center;height:%?50?%}",""]),t.exports=e},d824:function(t,e,i){var a=i("d7ea");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("d81bf4ba",a,!0,{sourceMap:!1,shadowMode:!1})}}]);